(this["webpackJsonpcasfee2020-react-spa-ts"]=this["webpackJsonpcasfee2020-react-spa-ts"]||[]).push([[0],{261:function(e,n,t){e.exports=t(367)},304:function(e,n,t){},367:function(e,n,t){"use strict";t.r(n);var a,r,l,i,o,s,c,u,d,m,p,g,h,f,b,v,_,E,y,j,O,w,x,I,C,k,S,q,T,$,N,M,A,P,D,L,F,B,Q,z,U,R,W,V=t(0),G=t.n(V),H=t(25),Y=t.n(H),K=t(20),X=t(33),J=t(17),Z=t(92),ee=t(13),ne=t.n(ee),te=t(21),ae=t(228),re=t(227),le=t(6),ie=t(222),oe=t(225),se=t(226),ce=function(e){var n=e.children,t=Object(J.b)(),a=t.isAuthenticated,r=t.getAccessTokenSilently,l=function(){var e=Object(te.a)(ne.a.mark((function e(){var n,t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!a){e.next=7;break}return e.next=4,r();case 4:t=e.sent,i(t),n.Authorization="Bearer ".concat(t);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(te.a)(ne.a.mark((function e(n){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=Object(se.a)(n)).sub&&void 0!==t["https://hasura.io/jwt/claims"]&&void 0!==t["https://hasura.io/jwt/claims"]["x-hasura-allowed-roles"]){e.next=3;break}return e.abrupt("return");case 3:sessionStorage.setItem(t.sub,t["https://hasura.io/jwt/claims"]["x-hasura-allowed-roles"]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=Object(oe.a)(function(){var e=Object(te.a)(ne.a.mark((function e(n,t){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.originalHeaders,e.t0=Z.a,e.t1={},e.t2=a,e.t3={},e.next=7,l();case 7:return e.t4=e.sent,e.t5=(0,e.t0)(e.t1,e.t2,e.t3,e.t4),e.abrupt("return",{headers:e.t5});case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),s={uri:"wss://chickenchat.ch/v1/graphql",options:{reconnect:!0,lazy:!0,connectionParams:function(){var e=Object(te.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.t0=e.sent,e.abrupt("return",{headers:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},c=Object(le.createHttpLink)({uri:"https://chickenchat.ch/v1/graphql"}),u=new ie.a(s),d=Object(le.split)((function(e){var n=e.query,t=Object(re.a)(n),a=t.kind,r=t.operation;return"OperationDefinition"===a&&"subscription"===r}),u,o.concat(c)),m=new le.InMemoryCache,p=new le.ApolloClient({link:d,cache:m});return G.a.createElement(ae.ApolloProvider,{client:p},n)},ue=(t(304),t(7)),de=t(24),me=t(435),pe=t(436),ge=t(246),he=Object(ge.a)({palette:{common:{black:"#000000",white:"#f9cd8b"},type:"dark",background:{paper:"#070922",default:"#070922"},primary:{light:"#81D4FA",main:"#0288D1",dark:"rgba(255, 255, 255, .01)",contrastText:"#EF6C00"},secondary:{light:"#FFA726",main:"#f57c00",dark:"#EF6C00",contrastText:"#ffffff"},error:{light:"#E91E63",main:"#AD1457",dark:"#880E4F"},success:{light:"#0f5",main:"#0f0",dark:"#222"}},shape:{borderRadius:0},mixins:{toolbar:{}},spacing:0,props:{MuiCheckbox:{style:{fontSize:10}},MuiChip:{style:{padding:3}},MuiList:{style:{padding:0}},MuiListItemIcon:{style:{color:"#0288D1"}},MuiPaper:{draggable:!1,elevation:0,style:{overflow:"hidden"}},MuiAppBar:{style:{top:"auto",bottom:0}},MuiButton:{disableElevation:!1,color:"secondary",variant:"outlined",size:"small",disableFocusRipple:!1,disableTouchRipple:!1}},typography:{fontSize:14,body1:{fontSize:16,color:"#0288D1"},body2:{fontSize:16,fontWeight:500},button:{fontSize:12,fontWeight:400},h1:{fontWeight:700,fontSize:20,paddingBottom:16},h2:{fontWeight:700,fontSize:18,marginTop:16},h3:{fontWeight:700,fontSize:16,marginTop:16,marginBottom:16},h4:{fontWeight:700,fontSize:14,marginTop:16},h5:{fontWeight:700,fontSize:12,marginTop:16},h6:{fontWeight:700,fontSize:10,color:"#0288D1"}},overrides:{MuiCssBaseline:{"@global":{"*":{"scrollbar-width":"1rem"},"*::-webkit-scrollbar":{width:".5rem",height:"1rem"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.00)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"rgb(245 124 0)",borderRadius:0},a:{textDecoration:"none"}}},MuiToolbar:{root:{overflow:"hidden"}},MuiPopover:{root:{background:"rgba(245, 122, 0, .7)"}},MuiBackdrop:{root:{backgroundColor:"rgba(0, 0, 0, .95)"}},MuiFab:{root:{borderRadius:0},primary:{color:"#fff",boxShadow:"none"},label:{}},MuiSpeedDial:{direction:"left",directionUp:{marginBottom:0},actions:{display:"unset",backgroundColor:"transparent"}},MuiSpeedDialAction:{fab:{backgroundColor:"transparent","&:hover":{borderRadius:3,padding:10}},staticTooltip:{},tooltipOpen:!0,tooltipPlacement:"top-end",tooltipPlacementLeft:{},staticTooltipLabel:{right:"100%",whiteSpace:"nowrap"}},MuiTableCell:{root:{borderBottom:"none"}},MuiInputBase:{root:{}},MuiList:{root:{"&:hover":{}}},MuiListItemIcon:{root:{"& :hover":{color:"#F57C00"}}},MuiContainer:{root:{padding:0,margin:0}},MuiListItemText:{root:{padding:0,margin:0,"& span":{padding:0,fontSize:".875rem"},"& h6":{fontSize:".857rem"},"& a":{color:"#fff"},"& a:hover":{color:"yellow"}}},MuiDivider:{root:{margin:10,opacity:.5}},MuiTypography:{},MuiButton:{contained:{boxShadow:"none"}},MuiIconButton:{root:{padding:"3px"}},MuiAccordionSummary:{expandIcon:{background:"#f57c00","&:hover":{backgroundColor:"rgba(255, 255, 255, .1)"}}}}}),fe=t(405),be=t(415),ve=t(439),_e=t(437),Ee=t(416),ye=t(103),je=t(370),Oe=function(){var e=Object(J.b)().loginWithRedirect;return G.a.createElement(G.a.Fragment,null,G.a.createElement(je.a,{size:"medium",variant:"contained",color:"secondary",onClick:e,"aria-label":"Login To Chat"},"Login"))},we=t(445),xe=Object(fe.a)((function(e){return{large:{backgroundSize:"cover",marginTop:e.spacing(2),width:e.spacing(10),height:e.spacing(10)}}})),Ie=function(){var e=xe();return G.a.createElement(we.a,{className:e.large,alt:"Chicken Fest",src:"/chicken-chat-logo.svg"})},Ce=Object(fe.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100vh",alignContent:"center",padding:e.spacing(2)},title:{fontSize:"2rem",fontWeight:700,textTransform:"uppercase",paddingTop:e.spacing(5)}}})),ke=function(){var e=Ce(),n=Object(J.b)().isAuthenticated,t=Object(de.g)();return n&&t.push("/channel/general"),G.a.createElement(ve.a,{className:e.root},G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},G.a.createElement(Ie,null),G.a.createElement(ye.a,{color:"secondary",variant:"h1",align:"center"},"Welcome to Chicken Chat")),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",mb:3},G.a.createElement(ye.a,{color:"textPrimary",variant:"body1",align:"center"},"Please register or login. Let's go an crackle your nonsense!")),G.a.createElement(Oe,null))},Se=t(421),qe=t(8),Te=t(249),$e=t(446),Ne=t(54),Me=t.n(Ne),Ae=t(97),Pe=t.n(Ae),De=t(229),Le=t.n(De),Fe=function(){var e=Object(J.b)().logout;return G.a.createElement(G.a.Fragment,null,G.a.createElement(Te.a,{color:"primary",size:"small",onClick:function(){e({returnTo:"https://chickenfest.ch"}),window.sessionStorage.clear()},"aria-label":"Logout"},G.a.createElement(Le.a,null)))},Be=t(3),Qe=t(442),ze=t(407),Ue=Object(fe.a)((function(e){var n;return{toolbar:(n={display:"flex",justifyContent:"center",alignItems:"flex-start"},Object(ue.a)(n,e.breakpoints.up("md"),{paddingTop:e.spacing(0),paddingBottom:e.spacing(5)}),Object(ue.a)(n,e.breakpoints.down("md"),{paddingTop:e.spacing(0),paddingLeft:e.spacing(0),paddingRight:e.spacing(0),paddingBottom:e.spacing(2)}),Object(ue.a)(n,"borderTop",1),Object(ue.a)(n,"borderTopStyle","solid"),Object(ue.a)(n,"borderTopColor",e.palette.primary.dark),n),drawerPaper:{height:"100vh",width:"100%",transition:e.transitions.create("width",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.leavingScreen}),width:"100%"}}})),Re=function(e){var n=e.children,t=e.open,a=Ue();return G.a.createElement(Qe.a,{variant:"temporary",elevation:0,anchor:"left",classes:{paper:Object(Be.a)(a.drawerPaper,!t&&a.drawerPaperClose)},open:t},G.a.createElement(ze.a,{className:a.toolbar},n))},We=t(420),Ve=t(238),Ge=t.n(Ve),He=t(447),Ye=t(409),Ke=t(138),Xe=t.n(Ke),Je=t(408),Ze=function(){return G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:1},G.a.createElement(Je.a,{color:"secondary",size:20,style:{margin:"10px"}}))},en=t(14);function nn(){var e=Object(en.a)(["\n    subscription watchCheckUserHasVoted($pollQuestionId: Int, $auth0UserId: String) {\n  user_votes(where: {poll_question_id: {_eq: $pollQuestionId}, auth0_user_id: {_eq: $auth0UserId}}) {\n    auth0_user_id\n    poll_question_id\n    poll_answer_id\n  }\n}\n    "]);return nn=function(){return e},e}function tn(){var e=Object(en.a)(["\n    subscription watchChannelPollActiveState {\n  channel_poll {\n    id\n    channel {\n      name\n      channel_polls {\n        poll_question {\n          created_at\n        }\n      }\n    }\n  }\n}\n    "]);return tn=function(){return e},e}function an(){var e=Object(en.a)(["\n    subscription watchChannelHasActivePoll($currentChannelId: Int!) {\n  poll_questions(where: {channel_polls: {channel_id: {_eq: $currentChannelId}}, _and: {is_active: {_eq: true}}}) {\n    id\n    text\n  }\n}\n    "]);return an=function(){return e},e}function rn(){var e=Object(en.a)(["\n    subscription watchGetChannels {\n  channel(where: {is_private: {_eq: false}}) {\n    id\n    name\n    channel_polls {\n      channel_id\n      poll_question {\n        id\n        text\n      }\n    }\n  }\n}\n    "]);return rn=function(){return e},e}function ln(){var e=Object(en.a)(["\n    subscription getPollQuestionState($pollQuestionId: Int!) {\n  poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    is_active\n  }\n}\n    "]);return ln=function(){return e},e}function on(){var e=Object(en.a)(["\n    subscription watchPollAnswerVotes($pollAnswerId: Int!) {\n  pollAnswerVotes: poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    id\n    votes\n  }\n}\n    "]);return on=function(){return e},e}function sn(){var e=Object(en.a)(["\n    subscription watchChannelPollQuestion($channelId: Int!) {\n  getChannelPoll: channel_poll(where: {channel_id: {_eq: $channelId}, poll_question: {is_active: {_eq: true}}}) {\n    id\n    poll_question {\n      id\n      text\n      poll_anwers(where: {poll_question: {channel_polls: {channel_id: {_eq: $channelId}}}}) {\n        text\n        votes\n        id\n      }\n    }\n  }\n}\n    "]);return sn=function(){return e},e}function cn(){var e=Object(en.a)(["\n    subscription watchGetPollAnswers($pollQuestionId: Int!) {\n  poll_answers: poll_anwers(where: {poll_question: {id: {_eq: $pollQuestionId}}}) {\n    question_id\n    text\n    id\n    votes\n  }\n}\n    "]);return cn=function(){return e},e}function un(){var e=Object(en.a)(["\n    subscription watchGetPollQuestion($pollQuestionId: Int) {\n  poll_question: poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    id\n    text\n    is_active\n  }\n}\n    "]);return un=function(){return e},e}function dn(){var e=Object(en.a)(["\n    subscription watchGetChannelPollQuestionPublishState {\n  getChannelPollQuestionPublishState: channel_poll {\n    channel_id\n    id\n    poll_questions\n    channel {\n      name\n    }\n    poll_question {\n      text\n      is_active\n    }\n  }\n}\n    "]);return dn=function(){return e},e}function mn(){var e=Object(en.a)(["\n    subscription WatchGetPollQuestions {\n  questions: poll_questions {\n    id\n    text\n    created_at\n    updated_at\n    owner_id\n    is_active\n    channel_polls {\n      channel {\n        name\n      }\n    }\n  }\n}\n    "]);return mn=function(){return e},e}function pn(){var e=Object(en.a)(["\n    subscription watchMessageCursor($channel_id: Int!, $user_id: String!) {\n  message_cursor(where: {user_id: {_eq: $user_id}, _and: {channel_id: {_eq: $channel_id}}}) {\n    channel_id\n    message_id\n    user_id\n  }\n}\n    "]);return pn=function(){return e},e}function gn(){var e=Object(en.a)(["\n    subscription watchChannelsLastMessageId($channel_type: channel_type_enum! = CHAT_MESSAGE) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}}, order_by: {name: asc, is_private: asc}) {\n    name\n    id\n    is_private\n    owner_id\n    messages(order_by: {id: desc}, limit: 1) {\n      id\n    }\n  }\n}\n    "]);return gn=function(){return e},e}function hn(){var e=Object(en.a)(["\n    subscription watchNewMessages($channelId: Int!) {\n  newMessages: message(order_by: {id: desc}, limit: 1, where: {channel: {id: {_eq: $channelId}}}) {\n    id\n    text\n    timestamp\n    user {\n      username\n    }\n  }\n}\n    "]);return hn=function(){return e},e}function fn(){var e=Object(en.a)(["\n    subscription getUserIsTyping($self_id: String!, $channel_id: Int!) {\n  user_typing(where: {auth0_user_id: {_neq: $self_id}, _and: {last_typed_channel: {_eq: $channel_id}}}, limit: 1, order_by: {last_typed: desc}) {\n    last_typed\n    username\n  }\n}\n    "]);return fn=function(){return e},e}function bn(){var e=Object(en.a)(["\n    subscription watchUsersWhoHaveSubscribedToChannel($channel_id: Int!, $user_id: String!) {\n  channel(where: {id: {_eq: $channel_id}}) {\n    id\n    user_channels(where: {user: {auth0_user_id: {_neq: $user_id}}}) {\n      user {\n        auth0_user_id\n        username\n      }\n    }\n  }\n}\n    "]);return bn=function(){return e},e}function vn(){var e=Object(en.a)(["\n    subscription watchUsersWhoHaveSubscribedToDirectMessageChannel($user_id: String!) {\n  user(where: {auth0_user_id: {_neq: $user_id}}, order_by: {username: asc}) {\n    auth0_user_id\n    username\n    user_channels(where: {channel: {channel_type: {_eq: DIRECT_MESSAGE}}}) {\n      channel_id\n      channel {\n        name\n        user_channels(where: {user: {auth0_user_id: {_eq: $user_id}}}) {\n          user {\n            auth0_user_id\n            username\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return vn=function(){return e},e}function _n(){var e=Object(en.a)(["\n    subscription watchUsersWhoHaveNotSubscribedToChannel($user_id: String!, $channel_id: Int!) {\n  user(where: {_not: {user_channels: {channel_id: {_eq: $channel_id}}}, auth0_user_id: {_neq: $user_id}}, order_by: {username: asc}) {\n    auth0_user_id\n    username\n  }\n}\n    "]);return _n=function(){return e},e}function En(){var e=Object(en.a)(["\n    subscription watchUsers {\n  user(order_by: {username: asc}) {\n    username\n    auth0_user_id\n  }\n}\n    "]);return En=function(){return e},e}function yn(){var e=Object(en.a)(["\n    subscription watchDirectMessageChannels($channel_type: channel_type_enum!, $user_id: String) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}, _and: {user_channels: {user_id: {_eq: $user_id}}}}) {\n    name\n    id\n    is_private\n    owner_id\n    user_channels(where: {user_id: {_neq: $user_id}}) {\n      user {\n        username\n        auth0_user_id\n      }\n    }\n  }\n}\n    "]);return yn=function(){return e},e}function jn(){var e=Object(en.a)(["\n    subscription watchChannels($channel_type: channel_type_enum!) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}}, order_by: {name: asc, is_private: asc}) {\n    name\n    id\n    is_private\n    owner_id\n  }\n}\n    "]);return jn=function(){return e},e}function On(){var e=Object(en.a)(["\n    subscription watchOnlineUsers {\n  users: user_online(order_by: {username: asc}) {\n    id\n    username\n    auth0_user_id\n  }\n}\n    "]);return On=function(){return e},e}function wn(){var e=Object(en.a)(["\n    subscription watchThreads {\n  channel_thread(order_by: {id: desc}) {\n    id\n    message_id\n    message {\n      image\n      text\n      deleted\n      timestamp\n      id\n      user {\n        auth0_user_id\n        username\n      }\n      user_id\n      channel {\n        id\n        name\n        channel_type\n      }\n    }\n    channel_thread_messages {\n      id\n      image\n      message\n      timestamp\n      user_id\n      user {\n        auth0_user_id\n        username\n      }\n    }\n  }\n}\n    "]);return wn=function(){return e},e}function xn(){var e=Object(en.a)(["\n    subscription watchChannelThread($message_id: Int! = 571) {\n  channel_thread(where: {message_id: {_eq: $message_id}}) {\n    id\n    message {\n      id\n    }\n    channel_thread_messages(order_by: {id: desc}) {\n      id\n      message\n      timestamp\n    }\n  }\n}\n    "]);return xn=function(){return e},e}function In(){var e=Object(en.a)(["\n    subscription watchChannelThreadMessages($limit: Int!, $message_id: Int!) {\n  channel_thread_message(limit: $limit, order_by: {id: desc}, where: {channel_thread: {message_id: {_eq: $message_id}}}) {\n    id\n    message\n    image\n    user {\n      username\n      id\n      auth0_user_id\n    }\n    channel_thread_id\n    timestamp\n  }\n}\n    "]);return In=function(){return e},e}function Cn(){var e=Object(en.a)(["\n    subscription watchGetMessagesIds($channelId: Int!, $limit: Int) {\n  messages: message(order_by: {timestamp: desc}, limit: $limit, where: {channel: {id: {_eq: $channelId}}}) {\n    id\n  }\n}\n    "]);return Cn=function(){return e},e}function kn(){var e=Object(en.a)(["\n    subscription watchMessages($channelId: Int!, $limit: Int) {\n  messages: message(order_by: {timestamp: desc}, limit: $limit, where: {channel: {id: {_eq: $channelId}}}) {\n    id\n    text\n    image\n    timestamp\n    deleted\n    user {\n      username\n      auth0_user_id\n    }\n    channel {\n      name\n    }\n  }\n}\n    "]);return kn=function(){return e},e}function Sn(){var e=Object(en.a)(["\n    query getPollAnswerVotes($pollAnswerId: Int!) {\n  poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    id\n    votes\n  }\n}\n    "]);return Sn=function(){return e},e}function qn(){var e=Object(en.a)(["\n    query getChannelPollQuestion($channelId: Int) {\n  getChannelPoll: channel_poll(where: {channel_id: {_eq: $channelId}, is_active: {_eq: true}}) {\n    id\n    poll_question {\n      id\n      text\n      poll_anwers(where: {poll_question: {}}) {\n        text\n        question_id\n      }\n    }\n  }\n}\n    "]);return qn=function(){return e},e}function Tn(){var e=Object(en.a)(["\n    query getChannelPolls {\n  channelPoll: channel_poll {\n    channel_id\n    id\n    poll_questions\n  }\n}\n    "]);return Tn=function(){return e},e}function $n(){var e=Object(en.a)(["\n    query getPublicChannels {\n  channels: channel(where: {is_private: {_neq: true}}) {\n    id\n    name\n    channel_polls(where: {poll_question: {is_active: {_eq: true}}}) {\n      poll_question {\n        is_active\n      }\n    }\n  }\n}\n    "]);return $n=function(){return e},e}function Nn(){var e=Object(en.a)(["\n    query getPollQuestionAnswers($pollQuestionId: Int) {\n  poll_question: poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    id\n    text\n    is_active\n  }\n  poll_answers: poll_anwers(where: {poll_question: {id: {_eq: $pollQuestionId}}}) {\n    question_id\n    text\n    id\n    votes\n  }\n}\n    "]);return Nn=function(){return e},e}function Mn(){var e=Object(en.a)(["\n    query getPollQuestions {\n  questions: poll_questions {\n    id\n    owner_id\n    text\n  }\n}\n    "]);return Mn=function(){return e},e}function An(){var e=Object(en.a)(["\n    query getChannelThread($message_id: Int) {\n  channel_thread(where: {message_id: {_eq: $message_id}}) {\n    id\n    message {\n      id\n      image\n      text\n      deleted\n      timestamp\n      user {\n        auth0_user_id\n        id\n        username\n      }\n    }\n  }\n}\n    "]);return An=function(){return e},e}function Pn(){var e=Object(en.a)(["\n    query getChannelThreadParentMessage($limit: Int, $message_id: Int) {\n  channel_thread_message(limit: $limit, order_by: {id: asc}, where: {channel_thread: {message_id: {_eq: $message_id}}}) {\n    channel_thread_id\n    timestamp\n    channel_thread {\n      message {\n        text\n        timestamp\n        image\n        id\n        user_id\n        user {\n          auth0_user_id\n          username\n        }\n      }\n    }\n  }\n}\n    "]);return Pn=function(){return e},e}function Dn(){var e=Object(en.a)(["\n    query getChannelThreadId($message_id: Int) {\n  channel_thread(where: {message_id: {_eq: $message_id}}) {\n    id\n  }\n}\n    "]);return Dn=function(){return e},e}function Ln(){var e=Object(en.a)(["\n    query getAuth0UserById($user_id: String) {\n  user(where: {auth0_user_id: {_eq: $user_id}}) {\n    id\n    username\n    auth0_user_id\n    user_channels {\n      channel {\n        name\n        id\n        is_private\n      }\n    }\n  }\n}\n    "]);return Ln=function(){return e},e}function Fn(){var e=Object(en.a)(["\n    query getChannelByName($name: String!) {\n  channel(where: {name: {_eq: $name}}) {\n    name\n    id\n    is_private\n    owner_id\n    channel_type\n  }\n}\n    "]);return Fn=function(){return e},e}function Bn(){var e=Object(en.a)(["\n    query getUserList {\n  users: user {\n    username\n    id\n    auth0_user_id\n    last_seen\n  }\n}\n    "]);return Bn=function(){return e},e}function Qn(){var e=Object(en.a)(["\n    query getChannels {\n  channels: channel {\n    name\n    id\n    is_private\n    owner_id\n  }\n}\n    "]);return Qn=function(){return e},e}function zn(){var e=Object(en.a)(["\n    query getMessagesSum {\n  channel_aggregate(where: {channel_type: {_eq: CHAT_MESSAGE}}, order_by: {name: asc}) {\n    nodes {\n      messages(distinct_on: channel_id) {\n        channel_id\n        channel {\n          name\n        }\n      }\n      messages_aggregate {\n        aggregate {\n          count\n        }\n      }\n    }\n  }\n}\n    "]);return zn=function(){return e},e}function Un(){var e=Object(en.a)(["\n    query getMessages($last_received_id: Int, $last_received_ts: timestamptz, $channel: String) {\n  channel(where: {name: {_eq: $channel}}) {\n    messages(order_by: {timestamp: asc}, where: {_and: {id: {_neq: $last_received_id}, timestamp: {_gte: $last_received_ts}}}) {\n      id\n      text\n      timestamp\n      user {\n        username\n      }\n      channel {\n        name\n      }\n      channel_threads {\n        id\n      }\n    }\n  }\n}\n    "]);return Un=function(){return e},e}function Rn(){var e=Object(en.a)(["\n    mutation updatePollQuestion($pollQuestionId: Int!, $text: String!) {\n  update_poll_questions(where: {id: {_eq: $pollQuestionId}}, _set: {text: $text}) {\n    affected_rows\n  }\n}\n    "]);return Rn=function(){return e},e}function Wn(){var e=Object(en.a)(["\n    mutation setUserVotePollQuestion($userName: String, $auth0UserId: String, $pollQuestionId: Int, $pollAnswerId: Int) {\n  insert_user_votes(objects: {username: $userName, auth0_user_id: $auth0UserId, poll_question_id: $pollQuestionId, poll_answer_id: $pollAnswerId}) {\n    affected_rows\n  }\n}\n    "]);return Wn=function(){return e},e}function Vn(){var e=Object(en.a)(["\n    mutation deletePollAnswerId($pollAnswerId: Int!) {\n  delete_poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    affected_rows\n  }\n}\n    "]);return Vn=function(){return e},e}function Gn(){var e=Object(en.a)(["\n    mutation updatePollAnswerText($text: String!, $pollAnswerId: Int!) {\n  pollAnswerText: update_poll_anwers(where: {id: {_eq: $pollAnswerId}}, _set: {text: $text}) {\n    affected_rows\n    returning {\n      text\n    }\n  }\n}\n    "]);return Gn=function(){return e},e}function Hn(){var e=Object(en.a)(["\n    mutation deletePollQuestionFromChannel($pollQuestionId: Int!, $channelId: Int!) {\n  delete_channel_poll(where: {poll_questions: {_eq: $pollQuestionId}, channel_id: {_eq: $channelId}}) {\n    affected_rows\n  }\n}\n    "]);return Hn=function(){return e},e}function Yn(){var e=Object(en.a)(["\n    mutation deletePollQuestion($pollQuestionId: Int!) {\n  delete_poll_anwers(where: {question_id: {_eq: $pollQuestionId}}) {\n    affected_rows\n  }\n  deletePollQuestion: delete_poll_questions(where: {id: {_eq: $pollQuestionId}, is_active: {_neq: true}}) {\n    affected_rows\n  }\n}\n    "]);return Yn=function(){return e},e}function Kn(){var e=Object(en.a)(["\n    mutation setPublishPollQuestionState($pollQuestionId: Int!, $is_active: Boolean = false) {\n  setPollQuestionState: update_poll_questions(where: {id: {_eq: $pollQuestionId}}, _set: {is_active: $is_active}) {\n    affected_rows\n    returning {\n      is_active\n    }\n  }\n  delete_channel_poll(where: {poll_question: {id: {_eq: $pollQuestionId}}}) {\n    affected_rows\n  }\n}\n    "]);return Kn=function(){return e},e}function Xn(){var e=Object(en.a)(["\n    mutation setPollAnswerVote($pollAnswerId: Int!, $newVote: Int!) {\n  updatePollAnswer: update_poll_anwers(where: {id: {_eq: $pollAnswerId}}, _set: {votes: $newVote}) {\n    affected_rows\n    returning {\n      votes\n    }\n  }\n}\n    "]);return Xn=function(){return e},e}function Jn(){var e=Object(en.a)(["\n    mutation addPublishPollQuestionToChannel($channelID: Int!, $pollQuestionID: Int!) {\n  channelPoll: insert_channel_poll(objects: {channel_id: $channelID, poll_questions: $pollQuestionID, id: $channelID}, on_conflict: {constraint: channel_poll_pkey, update_columns: poll_questions, where: {id: {_eq: $channelID}}}) {\n    affected_rows\n    returning {\n      channel_id\n      id\n      poll_questions\n    }\n  }\n}\n    "]);return Jn=function(){return e},e}function Zn(){var e=Object(en.a)(["\n    mutation addAnswerToQuestion($text: String!, $pollQuestionId: Int!) {\n  insert_poll_anwers(objects: {question_id: $pollQuestionId, text: $text}) {\n    affected_rows\n  }\n}\n    "]);return Zn=function(){return e},e}function et(){var e=Object(en.a)(["\n    mutation addPollQuestion($text: String, $owner_id: String) {\n  insert_poll_questions(objects: {text: $text, owner_id: $owner_id}) {\n    affected_rows\n  }\n}\n    "]);return et=function(){return e},e}function nt(){var e=Object(en.a)(["\n    mutation insertChannelThread($message_id: Int!) {\n  insert_channel_thread(objects: {message_id: $message_id}) {\n    returning {\n      message {\n        image\n        text\n        timestamp\n        id\n        user {\n          auth0_user_id\n          id\n          username\n        }\n      }\n    }\n  }\n}\n    "]);return nt=function(){return e},e}function tt(){var e=Object(en.a)(["\n    mutation deleteThreadMessage($message_id: Int!) {\n  delete_channel_thread_message(where: {id: {_eq: $message_id}}) {\n    affected_rows\n  }\n}\n    "]);return tt=function(){return e},e}function at(){var e=Object(en.a)(["\n    mutation insertChannelThreadMessage($channel_thread_id: Int!, $message: String!, $user_id: String!, $image: String) {\n  insert_channel_thread_message(objects: {user_id: $user_id, channel_thread_id: $channel_thread_id, message: $message, image: $image}) {\n    affected_rows\n    returning {\n      id\n      image\n      message\n      timestamp\n      user_id\n      user {\n        auth0_user_id\n        username\n      }\n    }\n  }\n}\n    "]);return at=function(){return e},e}function rt(){var e=Object(en.a)(["\n    mutation upsertMessageCursor($channel_id: Int!, $message_id: Int!, $user_id: String!) {\n  insert_message_cursor(objects: {channel_id: $channel_id, message_id: $message_id, user_id: $user_id}, on_conflict: {constraint: message_cursor_channel_id_user_id_key, update_columns: message_id}) {\n    returning {\n      channel_id\n      message_id\n      user_id\n    }\n  }\n}\n    "]);return rt=function(){return e},e}function lt(){var e=Object(en.a)(['\n    mutation sendTypingEvent($user_id: String!, $channel_id: Int!) {\n  update_user(_set: {last_typed: "now()", last_typed_channel: $channel_id}, where: {auth0_user_id: {_eq: $user_id}}) {\n    affected_rows\n  }\n}\n    ']);return lt=function(){return e},e}function it(){var e=Object(en.a)(["\n    mutation addChannelUser($channel_id: Int!, $user_id: String!) {\n  addChannelUser(user_id: $user_id, channel_id: $channel_id) {\n    affected_rows\n  }\n}\n    "]);return it=function(){return e},e}function ot(){var e=Object(en.a)(["\n    mutation validateAndAddDirectMessageChannel($name: String!, $user_id1: String!, $user_id2: String!) {\n  validateAndAddDirectMessageChannel(name: $name, user_id1: $user_id1, user_id2: $user_id2) {\n    id\n    name\n  }\n}\n    "]);return ot=function(){return e},e}function st(){var e=Object(en.a)(["\n    mutation addChannel($channel: channel_insert_input!) {\n  insert_channel(objects: [$channel]) {\n    returning {\n      id\n      name\n      owner_id\n      is_private\n    }\n  }\n}\n    "]);return st=function(){return e},e}function ct(){var e=Object(en.a)(['\n    mutation setUserOnline($user_id: String!) {\n  update_user(_set: {last_seen: "now()"}, where: {auth0_user_id: {_eq: $user_id}}) {\n    affected_rows\n  }\n}\n    ']);return ct=function(){return e},e}function ut(){var e=Object(en.a)(["\n    mutation deleteMessage($message_id: Int) {\n  delete_message(where: {id: {_eq: $message_id}}) {\n    affected_rows\n  }\n}\n    "]);return ut=function(){return e},e}function dt(){var e=Object(en.a)(["\n    mutation updateMessage($_eq: Int!, $text: String!, $deleted: Boolean = false) {\n  update_message(where: {id: {_eq: $_eq}}, _set: {text: $text, deleted: $deleted, image: null}) {\n    affected_rows\n  }\n}\n    "]);return dt=function(){return e},e}function mt(){var e=Object(en.a)(["\n    mutation insertMessage($message: message_insert_input!) {\n  insert_message(objects: [$message]) {\n    returning {\n      id\n      timestamp\n      text\n      user {\n        username\n      }\n      channel {\n        name\n      }\n    }\n  }\n}\n    "]);return mt=function(){return e},e}!function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(a||(a={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(r||(r={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(l||(l={})),function(e){e.ChannelNameKey="channel_name_key",e.ChannelPkey="channel_pkey"}(i||(i={})),function(e){e.ChannelPollPkey="channel_poll_pkey"}(o||(o={})),function(e){e.ChannelId="channel_id",e.Id="id",e.IsActive="is_active",e.PollQuestions="poll_questions"}(s||(s={})),function(e){e.ChannelId="channel_id",e.Id="id",e.IsActive="is_active",e.PollQuestions="poll_questions"}(c||(c={})),function(e){e.ChannelType="channel_type",e.Id="id",e.IsPrivate="is_private",e.Name="name",e.OwnerId="owner_id"}(u||(u={})),function(e){e.ChannelThreadMessageIdKey="channel_thread_message_id_key",e.ChannelThreadPkey="channel_thread_pkey"}(d||(d={})),function(e){e.ChannelThreadMessagePkey="channel_thread_message_pkey"}(m||(m={})),function(e){e.ChannelThreadId="channel_thread_id",e.Id="id",e.Image="image",e.Message="message",e.Timestamp="timestamp",e.UserId="user_id"}(p||(p={})),function(e){e.ChannelThreadId="channel_thread_id",e.Id="id",e.Image="image",e.Message="message",e.Timestamp="timestamp",e.UserId="user_id"}(g||(g={})),function(e){e.Id="id",e.MessageId="message_id"}(h||(h={})),function(e){e.Id="id",e.MessageId="message_id"}(f||(f={})),function(e){e.ChannelTypePkey="channel_type_pkey"}(b||(b={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(v||(v={})),function(e){e.Comment="comment",e.Value="value"}(_||(_={})),function(e){e.Comment="comment",e.Value="value"}(E||(E={})),function(e){e.ChannelType="channel_type",e.Id="id",e.IsPrivate="is_private",e.Name="name",e.OwnerId="owner_id"}(y||(y={})),function(e){e.MessagePkey="message_pkey"}(j||(j={})),function(e){e.MessageCursorChannelIdUserIdKey="message_cursor_channel_id_user_id_key",e.MessageCursorPkey="message_cursor_pkey"}(O||(O={})),function(e){e.ChannelId="channel_id",e.Id="id",e.MessageId="message_id",e.UserId="user_id"}(w||(w={})),function(e){e.ChannelId="channel_id",e.Id="id",e.MessageId="message_id",e.UserId="user_id"}(x||(x={})),function(e){e.ChannelId="channel_id",e.Deleted="deleted",e.Id="id",e.Image="image",e.Text="text",e.Timestamp="timestamp",e.UserId="user_id"}(I||(I={})),function(e){e.ChannelId="channel_id",e.Deleted="deleted",e.Id="id",e.Image="image",e.Text="text",e.Timestamp="timestamp",e.UserId="user_id"}(C||(C={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(k||(k={})),function(e){e.PollAnwersPkey="poll_anwers_pkey"}(S||(S={})),function(e){e.CreatedAt="created_at",e.Id="id",e.QuestionId="question_id",e.Text="text",e.UpdatedAt="updated_at",e.UserId="user_id",e.Votes="votes"}(q||(q={})),function(e){e.CreatedAt="created_at",e.Id="id",e.QuestionId="question_id",e.Text="text",e.UpdatedAt="updated_at",e.UserId="user_id",e.Votes="votes"}(T||(T={})),function(e){e.PollQuestionsPkey="poll_questions_pkey"}($||($={})),function(e){e.CreatedAt="created_at",e.Id="id",e.IsActive="is_active",e.OwnerId="owner_id",e.Text="text",e.UpdatedAt="updated_at"}(N||(N={})),function(e){e.CreatedAt="created_at",e.Id="id",e.IsActive="is_active",e.OwnerId="owner_id",e.Text="text",e.UpdatedAt="updated_at"}(M||(M={})),function(e){e.UserChannelsPkey="user_channels_pkey"}(A||(A={})),function(e){e.ChannelId="channel_id",e.UserId="user_id"}(P||(P={})),function(e){e.ChannelId="channel_id",e.UserId="user_id"}(D||(D={})),function(e){e.UserAuth0UserIdKey="user_auth0_user_id_key",e.UserPkey="user_pkey"}(L||(L={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.Username="username"}(F||(F={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(B||(B={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(Q||(Q={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(z||(z={})),function(e){e.UserVotesPkey="user_votes_pkey"}(U||(U={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.PollAnswerId="poll_answer_id",e.PollQuestionId="poll_question_id",e.Username="username",e.VotedAt="voted_at"}(R||(R={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.PollAnswerId="poll_answer_id",e.PollQuestionId="poll_question_id",e.Username="username",e.VotedAt="voted_at"}(W||(W={}));var pt=Object(le.gql)(mt());function gt(e){return le.useMutation(pt,e)}var ht=Object(le.gql)(dt());function ft(e){return le.useMutation(ht,e)}var bt=Object(le.gql)(ut());var vt=Object(le.gql)(ct());function _t(e){return le.useMutation(vt,e)}var Et=Object(le.gql)(st());var yt=Object(le.gql)(ot());var jt=Object(le.gql)(it());var Ot=Object(le.gql)(lt());function wt(e){return le.useMutation(Ot,e)}var xt=Object(le.gql)(rt());function It(e){return le.useMutation(xt,e)}var Ct=Object(le.gql)(at());function kt(e){return le.useMutation(Ct,e)}var St=Object(le.gql)(tt());var qt=Object(le.gql)(nt());var Tt=Object(le.gql)(et());var $t=Object(le.gql)(Zn());var Nt=Object(le.gql)(Jn());var Mt=Object(le.gql)(Xn());var At=Object(le.gql)(Kn());var Pt=Object(le.gql)(Yn());var Dt=Object(le.gql)(Hn());var Lt=Object(le.gql)(Gn());var Ft=Object(le.gql)(Vn());var Bt=Object(le.gql)(Wn());var Qt=Object(le.gql)(Rn());Object(le.gql)(Un());Object(le.gql)(zn());Object(le.gql)(Qn());var zt=Object(le.gql)(Bn());var Ut=Object(le.gql)(Fn());Object(le.gql)(Ln());Object(le.gql)(Dn());Object(le.gql)(Pn());var Rt=Object(le.gql)(An());Object(le.gql)(Mn());Object(le.gql)(Nn());Object(le.gql)($n());Object(le.gql)(Tn());Object(le.gql)(qn());Object(le.gql)(Sn());var Wt=Object(le.gql)(kn());var Vt=Object(le.gql)(Cn());var Gt=Object(le.gql)(In());function Ht(e){return le.useSubscription(Gt,e)}var Yt=Object(le.gql)(xn());function Kt(e){return le.useSubscription(Yt,e)}var Xt=Object(le.gql)(wn());var Jt=Object(le.gql)(On());function Zt(e){return le.useSubscription(Jt,e)}var ea=Object(le.gql)(jn());var na=Object(le.gql)(yn());Object(le.gql)(En());var ta=Object(le.gql)(_n());var aa=Object(le.gql)(vn());var ra=Object(le.gql)(bn());var la=Object(le.gql)(fn());Object(le.gql)(hn());Object(le.gql)(gn());var ia=Object(le.gql)(pn());var oa=Object(le.gql)(mn());Object(le.gql)(dn());var sa=Object(le.gql)(un());function ca(e){return le.useSubscription(sa,e)}var ua=Object(le.gql)(cn());function da(e){return le.useSubscription(ua,e)}var ma=Object(le.gql)(sn());var pa=Object(le.gql)(on());Object(le.gql)(ln());var ga=Object(le.gql)(rn());function ha(e){return le.useSubscription(ga,e)}var fa=Object(le.gql)(an());Object(le.gql)(tn());var ba=Object(le.gql)(nn());var va=function(e){for(var n,t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];(n=console).log.apply(n,[e].concat(a))},_a=function(e){e.user_id;var n,t=Zt(),a=t.data,r=t.loading,l=t.error,i=Object(J.b)().user,o=null!==(n=null===a||void 0===a?void 0:a.users.length)&&void 0!==n?n:0;return l&&va("UserStatus error",l),r?G.a.createElement(Ze,null):G.a.createElement(ve.a,{display:"flex",flex:"1",justifyContent:"flex-end",alignItems:"center",style:{marginRight:he.spacing(3),marginLeft:he.spacing(2)}},G.a.createElement($e.a,{variant:"outlined",color:"primary",size:"small",icon:G.a.createElement(Xe.a,null),label:i.nickname,style:{marginRight:30}}),G.a.createElement(He.a,{title:"Users online","aria-label":"Unsers online",placement:"top"},G.a.createElement(Ye.a,{color:"secondary",badgeContent:o},G.a.createElement(Me.a,{color:"primary"}))))},Ea=(Object(K.atom)({key:"testState"}),Object(K.atom)({key:"currentChannelState"})),ya=Object(K.atom)({key:"getPollQuestionAnswersState",default:1}),ja=Object(K.atom)({key:"giphyState"}),Oa=Object(K.atom)({key:"deletedMessageState",default:!1}),wa=(Object(K.atom)({key:"deletedThreadMessageState",default:!1}),t(410)),xa=t(411),Ia=t(412),Ca=t(413),ka=t(414),Sa=t(440),qa=t(231),Ta=t.n(qa),$a=t(140),Na=t.n($a),Ma=t(96),Aa=t.n(Ma),Pa=t(170),Da=t.n(Pa),La=Object(fe.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},item:{height:"16px"}}})),Fa=function(e){var n,t=e.channelId,a=La(),r=Object(J.b)(),l=r.user,i=r.error,o=Object(V.useState)(0),s=Object(qe.a)(o,2),c=s[0],u=s[1],d=(n={variables:{channelId:t}},le.useSubscription(Vt,n)),m=d.data,p=d.loading,g=d.error,h=function(e){return le.useSubscription(ia,e)}({variables:{user_id:l.sub,channel_id:t}}),f=h.data,b=h.loading,v=h.error;return Object(V.useEffect)((function(){var e,n,t=null!==(e=null===f||void 0===f||null===(n=f.message_cursor[0])||void 0===n?void 0:n.message_id)&&void 0!==e?e:null,a=null===m||void 0===m?void 0:m.messages.filter((function(e){return null!==t&&e.id>t}));u(null===a||void 0===a?void 0:a.length)}),[m,f]),(g||v||i)&&va("Error in UnreadMessageCounter component",g,v,i),p||b?G.a.createElement(G.a.Fragment,null):G.a.createElement(G.a.Fragment,null,c&&void 0!==c?G.a.createElement("div",{className:a.root},G.a.createElement($e.a,{variant:"outlined",size:"small",label:c,color:"secondary",className:a.item})):"")},Ba=Object(fe.a)((function(e){return{root:{width:"100%"},badge:{backgroundColor:"#0f0"}}})),Qa=function(){var e,n,t=Ba(),a=Object(K.useRecoilState)(Ea),r=Object(qe.a)(a,1)[0],l=Object(V.useState)(!0),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(de.i)("/channel/".concat(null===r||void 0===r?void 0:r.name)),u=function(){return c?"secondary":"primary"},d=(n={variables:{channel_type:v.ChatMessage}},le.useSubscription(ea,n)),m=d.data,p=d.loading,g=d.error;return g?(va("Channels could not be loaded",g),G.a.createElement(Sa.a,{severity:"error"},"Channels could not be loaded.")):p?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(wa.a,{component:"div",className:t.root},G.a.createElement(xa.a,{button:!0,onClick:function(){s(!o)},"aria-label":"open channel list"},G.a.createElement(Ia.a,null,G.a.createElement(Ta.a,null)),G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6"},"Channels")),o?G.a.createElement(Na.a,null):G.a.createElement(Aa.a,null)),G.a.createElement(ka.a,{in:o,timeout:"auto"},G.a.createElement(wa.a,{component:"div"},null===m||void 0===m||null===(e=m.channels)||void 0===e?void 0:e.map((function(e,n){return G.a.createElement(xa.a,{key:n,button:!0,component:X.b,to:"/channel/"+e.name,"aria-label":"go to channel ".concat(e.name)},(null===e||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.id)?G.a.createElement(G.a.Fragment,null,G.a.createElement(Ia.a,null,!0===e.is_private?G.a.createElement(Da.a,{color:u()}):G.a.createElement(Me.a,{color:u()})),G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6",color:u()},e.name))):G.a.createElement(G.a.Fragment,null,G.a.createElement(Ia.a,null,!0===e.is_private?G.a.createElement(Da.a,null):G.a.createElement(Me.a,null)),G.a.createElement(Ca.a,{primary:null===e||void 0===e?void 0:e.name}),G.a.createElement(Fa,{channelId:e.id})))}))))))},za=t(233),Ua=t.n(za),Ra=t(232),Wa=t.n(Ra),Va=Object(fe.a)((function(e){return{badgeOnline:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},badgeOffline:{backgroundColor:"#f2115e",color:"#f2115e",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},avatar:{width:24,height:24,backgroundColor:"#000000",color:"#ffffff",fontSize:12,fontWeight:"bold",border:"2px solid #f57c00"}}})),Ga=function(e){var n=e.user,t=e.children,a=e.showBadgeInChildren,r=void 0!==a&&a,l=Va(),i=Zt(),o=i.data,s=i.error;if(s)return va("OnlineUserStatusError",s),G.a.createElement(Sa.a,{severity:"error"},"A OnlineUserStatusError occured.");return G.a.createElement(G.a.Fragment,null,n&&n.username&&G.a.createElement(Ia.a,null,G.a.createElement(Ye.a,{classes:function(e){if(void 0===e||null===e)return{badge:l.badgeOffline};var n=null===o||void 0===o?void 0:o.users.filter((function(n){return e===n.auth0_user_id}));return(null===n||void 0===n?void 0:n.length)?{badge:l.badgeOnline}:{badge:l.badgeOffline}}(n.auth0_user_id),variant:"dot"},r&&G.a.createElement(G.a.Fragment,null,t),!r&&G.a.createElement(G.a.Fragment,null,G.a.createElement(we.a,{className:l.avatar},n.username.substring(0,2).toUpperCase())))))},Ha=Object(fe.a)((function(e){return{nested:{paddingLeft:e.spacing(0)},form:{flexGrow:1,margin:e.spacing(2)},submit:{marginTop:e.spacing(2)},itemText:{color:e.palette.primary.light,fontWeight:700},link:{color:"#0288D1",fontSize:"0.875rem"}}})),Ya=function(e){var n,t,a=e.user_id,r=Ha(),l=G.a.useState(!0),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(de.g)(),u=Object(K.useRecoilState)(Ea),d=Object(qe.a)(u,1)[0],m=Object(de.i)("/channel/".concat(null===d||void 0===d?void 0:d.name)),p=(t={variables:{channel_type:v.DirectMessage,user_id:a}},le.useSubscription(na,t)),g=p.data,h=p.loading,f=p.error;if(f)return va("A DirectMessageUserListError occured",f),G.a.createElement(Sa.a,{severity:"error"},"A DirectMessageUserListError occured.");if(h)return G.a.createElement(Ze,null);return G.a.createElement(G.a.Fragment,null,G.a.createElement(wa.a,{component:"div"},G.a.createElement(xa.a,{button:!0,onClick:function(){s(!o)}},G.a.createElement(Ia.a,{"aria-label":"open direct message list"},G.a.createElement(Wa.a,null)),G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6"},"Direct Messages")),G.a.createElement(Ia.a,null,G.a.createElement(Ua.a,{color:"secondary",onClick:function(){c.push("/addDirectMessageChannelMembers")}})),o?G.a.createElement(Na.a,null):G.a.createElement(Aa.a,null)),G.a.createElement(ka.a,{in:o,timeout:"auto"},G.a.createElement(wa.a,{component:"div"},null===g||void 0===g||null===(n=g.channels)||void 0===n?void 0:n.map((function(e){var n,t,a,l;return G.a.createElement(xa.a,{button:!0,component:X.b,key:e.name,className:r.link,to:"/channel/"+e.name,"aria-label":null===(n=e.user_channels[0])||void 0===n?void 0:n.user.username},G.a.createElement(Ga,{user:null===(t=e.user_channels[0])||void 0===t?void 0:t.user}),(null===e||void 0===e?void 0:e.id)===(null===d||void 0===d?void 0:d.id)?G.a.createElement(G.a.Fragment,null,G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6",color:m?"secondary":"primary"},null===(a=e.user_channels[0])||void 0===a?void 0:a.user.username))):G.a.createElement(G.a.Fragment,null,G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6"},null===(l=e.user_channels[0])||void 0===l?void 0:l.user.username)),G.a.createElement(Fa,{channelId:e.id})))}))))))},Ka=t(444),Xa=t(438),Ja=t(419),Za=t(443),er=t(171),nr=t.n(er),tr=t(236),ar=t.n(tr),rr=t(235),lr=t.n(rr),ir=t(234),or=t.n(ir),sr=Object(fe.a)((function(e){return{nested:{paddingLeft:e.spacing(0)},form:{flexGrow:1,margin:e.spacing(2),marginTop:e.spacing(0)},checkbox:{color:e.palette.secondary.main},submit:{marginTop:e.spacing(2)}}})),cr=function(){var e,n=sr(),t=Object(be.a)(he.breakpoints.up("md")),a=G.a.useState(!1),r=Object(qe.a)(a,2),l=r[0],i=r[1],o=G.a.useState(!0),s=Object(qe.a)(o,2),c=s[0],u=s[1],d=Object(V.useState)(""),m=Object(qe.a)(d,2),p=m[0],g=m[1],h=Object(V.useState)(!1),f=Object(qe.a)(h,2),b=f[0],_=f[1],E=le.useMutation(Et,e),y=Object(qe.a)(E,2),j=y[0],O=y[1],w=O.data,x=O.loading,I=O.error,C=gt(),k=Object(qe.a)(C,1)[0],S=Object(J.b)(),q=S.user,T=S.isLoading,$=Object(de.g)(),N=function(){switch(t){case!0:return"right";case!1:return"center";default:return"right"}},M=function(){u(!c)},A=function(){var e=Object(te.a)(ne.a.mark((function e(n){var t,a,r,l,o,s,c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),p){e.next=3;break}return e.abrupt("return");case 3:return u(!0),e.next=6,j({variables:{channel:{owner_id:q.sub,name:p.toLocaleLowerCase(),is_private:b,channel_type:v.ChatMessage}}});case 6:return c=e.sent,e.next=9,k({variables:{message:{user_id:"admin",text:"Welcome to channel ".concat(null===(t=c.data)||void 0===t||null===(a=t.insert_channel)||void 0===a||null===(r=a.returning[0])||void 0===r?void 0:r.name),channel_id:null===(l=c.data)||void 0===l||null===(o=l.insert_channel)||void 0===o||null===(s=o.returning[0])||void 0===s?void 0:s.id}}});case 9:i(!1),g(""),$.push("/channel/".concat(p.toLocaleLowerCase()));case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return I&&va("AddChannel error",I),x?G.a.createElement(Ze,null):G.a.createElement(wa.a,{component:"div"},G.a.createElement(xa.a,{id:"collapse_add_channel",button:!0,onClick:function(){i(!l)}},G.a.createElement(Ia.a,{"aria-label":"open add channel"},l?G.a.createElement(or.a,null):G.a.createElement(lr.a,null)),G.a.createElement(Ca.a,{primary:"Add Channel"}),l?G.a.createElement(ar.a,{fontSize:"small"}):G.a.createElement(nr.a,{color:"secondary",fontSize:"small"})),G.a.createElement(ka.a,{in:l,timeout:"auto",unmountOnExit:!0},(T||x)&&G.a.createElement(Ze,null),G.a.createElement(wa.a,{component:"div"},I&&G.a.createElement(xa.a,{className:n.nested},G.a.createElement(Ka.a,{open:c,autoHideDuration:5e3,onClose:M,anchorOrigin:{vertical:"top",horizontal:N()}},G.a.createElement(Sa.a,{severity:"error",onClose:M},"You can not use this name as it is already taken."))),w&&G.a.createElement(xa.a,{className:n.nested},G.a.createElement(Ka.a,{open:c,autoHideDuration:5e3,onClose:M,anchorOrigin:{vertical:"top",horizontal:N()}},G.a.createElement(Sa.a,{severity:"success",onClose:M},"Channel has been added."))),G.a.createElement(xa.a,{component:"div",className:n.nested},G.a.createElement(Ee.a,{container:!0},G.a.createElement("form",{id:"add_channel",className:n.form,noValidate:!0,autoComplete:"off",onSubmit:A},G.a.createElement(Ee.a,{item:!0,xs:12},G.a.createElement(Xa.a,{disabled:T||x,value:p,autoFocus:!1,onChange:function(e){g(e.target.value)},autoComplete:"off",placeholder:"Your channel name",id:"add-channel-input",label:"Add a new channel",fullWidth:!0})),G.a.createElement(Ee.a,{item:!0,xs:12},G.a.createElement(Ja.a,{control:G.a.createElement(Za.a,{checked:b,onChange:function(e){_(e.target.checked)},color:"secondary",name:"private",className:n.checkbox}),label:G.a.createElement(ye.a,{variant:"caption",color:"textSecondary"},"Private Channel")})),G.a.createElement(Ee.a,{item:!0,xs:12},G.a.createElement(je.a,{disabled:T||x,type:"submit",value:"Submit",endIcon:G.a.createElement(nr.a,null),className:n.submit,variant:"outlined","arial-label":"Add channel"},"Add new channel"))))))))},ur=t(237),dr=t.n(ur),mr=function(){var e=Object(de.i)("/channel/threads");return G.a.createElement(G.a.Fragment,null,G.a.createElement(xa.a,{button:!0,component:X.b,to:"/channel/threads","aria-label":"Open Threads"},G.a.createElement(Ia.a,null,G.a.createElement(dr.a,null)),G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6",color:e?"secondary":"primary"},"Threads"))))},pr=t(64),gr=t.n(pr),hr=function(){var e=Object(de.i)("/dashboard");return G.a.createElement(G.a.Fragment,null,G.a.createElement(xa.a,{button:!0,component:X.b,to:"/dashboard","aria-label":"Open Dashboard"},G.a.createElement(Ia.a,null,G.a.createElement(gr.a,null)),G.a.createElement(Ca.a,null,G.a.createElement(ye.a,{variant:"h6",color:e?"secondary":"primary"},"Polling"))))},fr=Object(fe.a)((function(e){var n,t;return{root:(n={height:"100vh",overflowY:"scroll",WebkitOverflowScrolling:"touch"},Object(ue.a)(n,e.breakpoints.up("sm"),{paddingBottom:e.spacing(5)}),Object(ue.a)(n,e.breakpoints.down("sm"),{height:"100vh"}),n),branding:{display:"flex",justifyContent:"center",alignItems:"center"},logo:(t={},Object(ue.a)(t,e.breakpoints.down("md"),{width:"150px"}),Object(ue.a)(t,e.breakpoints.up("md"),{width:"200px"}),t),menuButton:Object(ue.a)({width:e.spacing(5),height:e.spacing(5),backgroundColor:e.palette.secondary.main,marginLeft:4,"& .MuiIconButton-label":{marginRight:4},justifyContent:"flex-end",marginTop:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),logout:{paddingRight:e.spacing(1),height:100}}})),br=function(e){var n=e.handleDrawerClose,t=e.open,a=fr(),r=Object(J.b)().user,l=Object(be.a)(he.breakpoints.up("md")),i=Object(J.b)().isAuthenticated,o=sessionStorage.getItem(r.sub);return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",flex:1,justifyContent:"flex-start",alignItems:"flex-start",className:a.root},G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",flex:1,flexDirection:"column"},!0===l&&G.a.createElement(Ee.a,{item:!0,xs:12,className:a.branding},G.a.createElement("img",{alt:"The Great Chicken Fest",src:"/the-great-chicken-fest.svg",className:a.logo})),G.a.createElement(Ee.a,{item:!0,xs:12},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",style:{marginTop:he.spacing(0),marginLeft:he.spacing(1)}},G.a.createElement(Te.a,{"aria-label":"open menu",onClick:n,color:"inherit",size:"medium",className:Object(Be.a)(a.menuButton,t)},G.a.createElement(Ge.a,null)),G.a.createElement(_a,{user_id:r.sub})),G.a.createElement(We.a,{style:{marginTop:he.spacing(1),marginBottom:he.spacing(2)}})),G.a.createElement(Ee.a,{item:!0,xs:12},i?G.a.createElement(G.a.Fragment,null,G.a.createElement(Ya,{user_id:r.sub}),G.a.createElement(We.a,null),"admin"===o&&G.a.createElement(hr,null),G.a.createElement(mr,null),G.a.createElement(We.a,null),G.a.createElement(Qa,null),G.a.createElement(We.a,null),G.a.createElement(cr,null),G.a.createElement(We.a,null)):"",G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-end",alignItems:"flex-start",className:a.logout},G.a.createElement(Fe,null))))))},vr=Object(fe.a)((function(e){var n;return{root:(n={justifyContent:"space-between",backgroundColor:e.palette.background.default,marginTop:e.spacing(0),paddingTop:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(2),zIndex:1e3},Object(ue.a)(n,e.breakpoints.up("md"),{position:"fixed",width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("md"),{position:"fixed"}),n),menuButton:{width:e.spacing(5),height:e.spacing(5),backgroundColor:e.palette.secondary.main,marginLeft:e.spacing(0),"& .MuiIconButton-label":{marginLeft:e.spacing(1)}},title:{width:180,maxWidth:e.spacing(22)}}})),_r=function(e){var n=e.channelName,t=vr(),a=Object(be.a)(he.breakpoints.up("md")),r=G.a.useState(!1),l=Object(qe.a)(r,2),i=l[0],o=l[1];return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",alignItems:"center",flexDirection:"row",width:1,className:t.root,component:"header"},!1===a&&G.a.createElement(Te.a,{className:t.menuButton,color:"inherit","aria-label":"open menu",onClick:function(){o(!0)}},G.a.createElement(Pe.a,null)),G.a.createElement($e.a,{size:"small",variant:"outlined",color:"primary",label:n,icon:G.a.createElement(Me.a,null),className:t.title,"aria-label":"channel: ".concat(n)}),G.a.createElement(Fe,null)),G.a.createElement(Re,{open:i},G.a.createElement(br,{handleDrawerClose:function(){o(!1)},open:i})))},Er=Object(fe.a)((function(e){return{root:{},toolbarIcon:Object(Z.a)({},e.mixins.toolbar)}})),yr=function(){var e=Er();return G.a.createElement(Ee.a,{item:!0,xs:12,md:9,component:"section",className:e.root},G.a.createElement(_r,{channelName:"Page not found!"}),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",style:{height:"100vh",padding:he.spacing(3)}},G.a.createElement(Sa.a,{severity:"warning"},"Ups! Page not found!")))},jr=t(247),Or=function(e){var n=e.component,t=Object(jr.a)(e,["component"]);return G.a.createElement(de.b,Object.assign({component:Object(J.c)(n,{onRedirecting:function(){return G.a.createElement(Ze,null)}})},t))},wr=t(418),xr=t(172),Ir=t.n(xr),Cr=t(239),kr=t.n(Cr),Sr=Object(fe.a)((function(e){return{text:Object(ue.a)({},e.breakpoints.down("sm"),{fontSize:".875rem"})}})),qr=function(e){var n=e.answerId,t=e.userVote,a=e.pollVotes,r=e.text,l=e.totalVotes,i=Sr(),o=function(e){return G.a.createElement(ve.a,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"},G.a.createElement(ve.a,{width:"100%",mr:1},G.a.createElement(Se.a,Object.assign({id:String(n),color:t===n?"secondary":"primary",variant:"determinate"},e))),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row-reverse"},G.a.createElement($e.a,{size:"small",color:t===n?"secondary":"primary",variant:t===n?"default":"outlined",label:"".concat(a," / ").concat(e.value.toFixed(1),"%"),icon:t===n?G.a.createElement(Xe.a,null):G.a.createElement(kr.a,null)})))};return G.a.createElement(ve.a,{key:n,width:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",mb:2},G.a.createElement(ye.a,{variant:"body1",className:i.text},r),G.a.createElement(o,{value:100*a/l,answerid:n}))},Tr=Object(fe.a)((function(e){return{pollSubmit:{marginTop:e.spacing(3)}}})),$r=function(e){var n=e.enabled,t=Tr();return G.a.createElement(G.a.Fragment,null,G.a.createElement(je.a,{type:"submit",variant:"contained",color:"secondary",className:t.pollSubmit,disabled:n,"aria-label":"submit vote"},n?"Choose Your Answer":"Vote"))},Nr=function(e){var n=e.totalVotes;return G.a.createElement(G.a.Fragment,null,n&&G.a.createElement(Ye.a,{color:"secondary",badgeContent:n},G.a.createElement(gr.a,{color:"primary"})))},Mr=t(372),Ar=t(417),Pr=t(422),Dr=t(441),Lr=Object(fe.a)((function(e){return{pollCard:Object(ue.a)({width:"100%",padding:e.spacing(5)},e.breakpoints.down("md"),{transform:"scale(50%)",padding:e.spacing(2),minWidth:"100%"}),text:Object(ue.a)({},e.breakpoints.down("sm"),{fontSize:".875rem"})}})),Fr=function(){var e,n,t,a,r,l,i,o,s,c,u,d=Lr(),m=Object(J.b)().user,p=Object(K.useRecoilState)(Ea),g=Object(qe.a)(p,1)[0],h=G.a.useState(0),f=Object(qe.a)(h,2),b=f[0],v=f[1],_=(u={variables:{pollAnswerId:b}},le.useSubscription(pa,u)).data,E=function(e){return le.useSubscription(ma,e)}({variables:{channelId:null===g||void 0===g?void 0:g.id}}),y=E.data,j=E.loading,O=E.error,w=function(e){return le.useMutation(Mt,e)}(),x=Object(qe.a)(w,1)[0],I=function(){var e,n,t=null===y||void 0===y||null===(e=y.getChannelPoll[0])||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.poll_anwers,a=[];return void 0!==t?(t.map((function(e){return a.push(e.votes)})),a.reduce((function(e,n){return e+n}))):0},C=function(e){return le.useSubscription(ba,e)}({variables:{pollQuestionId:null===y||void 0===y||null===(e=y.getChannelPoll[0])||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.id,auth0UserId:m.sub}}),k=C.data,S=C.loading,q=function(e){return le.useMutation(Bt,e)}({variables:{userName:m.username,auth0UserId:m.sub,pollQuestionId:null===y||void 0===y||null===(t=y.getChannelPoll[0])||void 0===t||null===(a=t.poll_question)||void 0===a?void 0:a.id,pollAnswerId:b}}),T=Object(qe.a)(q,1)[0],$=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(parseInt(n.target.value));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=Object(te.a)(ne.a.mark((function e(n){var t,a,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null!==b){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(r=null===_||void 0===_?void 0:_.pollAnswerVotes[0].votes)&&r++,void 0!==r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,x({variables:{pollAnswerId:b,newVote:r}});case 9:return e.next=11,T({variables:{userName:m.nickname,auth0UserId:m.sub,pollQuestionId:null===y||void 0===y||null===(t=y.getChannelPoll[0])||void 0===t||null===(a=t.poll_question)||void 0===a?void 0:a.id,pollAnswerId:b}});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return j||O||S?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,(null===k||void 0===k||null===(r=k.user_votes)||void 0===r?void 0:r.length)?G.a.createElement(Mr.a,{className:d.pollCard},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",mb:3},G.a.createElement(ve.a,null,G.a.createElement(ye.a,{variant:"caption"},"Anonymous poll"),null===y||void 0===y?void 0:y.getChannelPoll.map((function(e){var n;return G.a.createElement(ye.a,{key:e.id,color:"secondary",variant:"h2",style:{marginTop:0}},null===e||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.text)}))),G.a.createElement(Nr,{totalVotes:I()})),null===y||void 0===y||null===(l=y.getChannelPoll[0])||void 0===l||null===(i=l.poll_question)||void 0===i?void 0:i.poll_anwers.sort((function(e,n){return e.id>n.id?1:-1})).map((function(e){var n;return G.a.createElement(qr,{key:e.id,answerId:e.id,userVote:null===k||void 0===k||null===(n=k.user_votes[0])||void 0===n?void 0:n.poll_answer_id,pollVotes:e.votes,text:e.text,totalVotes:I()})}))):G.a.createElement(Mr.a,{className:d.pollCard},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexDirection:"row",mb:3},G.a.createElement(ve.a,null,G.a.createElement(ye.a,{variant:"caption"},"Anonymous poll"),G.a.createElement(ye.a,{variant:"h2",style:{marginTop:0}},(null===y||void 0===y?void 0:y.getChannelPoll[0])?null===y||void 0===y||null===(o=y.getChannelPoll[0].poll_question)||void 0===o?void 0:o.text:"no value")),G.a.createElement(Nr,{totalVotes:I()})),G.a.createElement("form",{onSubmit:N},G.a.createElement(Ar.a,{component:"fieldset"},G.a.createElement(Pr.a,{"aria-label":"poll",name:"poll",value:b,onChange:$},null===y||void 0===y||null===(s=y.getChannelPoll[0])||void 0===s||null===(c=s.poll_question)||void 0===c?void 0:c.poll_anwers.sort((function(e,n){return e.id>n.id?1:-1})).map((function(e){return G.a.createElement(Ja.a,{key:e.id,value:e.id,control:G.a.createElement(Dr.a,{value:e.id,checked:b===e.id,onChange:$}),label:G.a.createElement(ye.a,{variant:"body2",className:d.text},e.text)})}))),G.a.createElement($r,{enabled:!1})))))},Br=t(240),Qr=Object(fe.a)((function(e){var n;return{popoverRoot:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw"},popupWidth:(n={width:"30vw",padding:e.spacing(1)},Object(ue.a)(n,e.breakpoints.down("lg"),{width:"40vw"}),Object(ue.a)(n,e.breakpoints.down("md"),{width:"50vw"}),Object(ue.a)(n,e.breakpoints.down("sm"),{width:"85vw",margin:0}),Object(ue.a)(n,"margin",e.spacing(0)),Object(ue.a)(n,"paddingBottom",e.spacing(2)),n),voteIcon:{cursor:"pointer"},badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),zr=function(e){var n,t,a=e.channelId,r=Qr(),l=(t={variables:{currentChannelId:a}},le.useSubscription(fa,t)),i=l.data;return l.loading?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,1===(null===i||void 0===i||null===(n=i.poll_questions)||void 0===n?void 0:n.length)&&G.a.createElement(Ir.a,{variant:"popover",popupId:"pollingPopOver"},(function(e){return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ye.a,{variant:"dot",classes:{badge:r.badge}},G.a.createElement(gr.a,Object.assign({color:"primary"},Object(Br.bindTrigger)(e),{className:r.voteIcon}))),G.a.createElement(wr.a,Object.assign({anchorReference:"none",classes:{root:r.popoverRoot}},Object(xr.bindPopover)(e)),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",className:r.popupWidth},G.a.createElement(Ie,null),G.a.createElement(Fr,null),G.a.createElement(je.a,{"aria-label":"close poll popover",onClick:e.close,style:{maxWidth:"10vw"}},"Close"))))})))},Ur=Object(fe.a)((function(e){return{title:{width:180,maxWidth:e.spacing(22)}}})),Rr=function(e){var n,t,a,r,l,i,o,s,c,u=e.channelId,d=Ur(),m=Object(J.b)().user,p=(c={variables:{channel_id:u,user_id:m.sub}},le.useSubscription(ra,c)),g=p.data;return p.loading?G.a.createElement(Ze,null):G.a.createElement(Ga,{user:null===g||void 0===g||null===(n=g.channel[0])||void 0===n||null===(t=n.user_channels[0])||void 0===t?void 0:t.user,showBadgeInChildren:!0},G.a.createElement($e.a,{size:"small",variant:"outlined",color:"primary",label:null===g||void 0===g||null===(a=g.channel[0])||void 0===a||null===(r=a.user_channels[0])||void 0===r||null===(l=r.user)||void 0===l?void 0:l.username,icon:G.a.createElement(Me.a,null),className:d.title,"aria-label":"channel: ".concat(null===g||void 0===g||null===(i=g.channel[0])||void 0===i||null===(o=i.user_channels[0])||void 0===o||null===(s=o.user)||void 0===s?void 0:s.username)}))},Wr=Object(fe.a)((function(e){var n;return{root:(n={justifyContent:"space-between",backgroundColor:e.palette.background.default,marginTop:e.spacing(0),paddingTop:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(2),zIndex:1e3},Object(ue.a)(n,e.breakpoints.up("md"),{position:"fixed",width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("md"),{position:"fixed"}),n),outerContainer:{paddingBottom:"75px"},menuButton:{width:e.spacing(5),height:e.spacing(5),backgroundColor:e.palette.secondary.main,marginLeft:e.spacing(0),"& .MuiIconButton-label":{marginLeft:e.spacing(1)}},title:{width:180,maxWidth:e.spacing(22)}}})),Vr=function(e){var n=e.channelName,t=e.user,a=e.showAddUserButton,r=e.channel,l=e.isThreadList,i=Wr(),o=Object(K.useRecoilState)(Ea),s=Object(qe.a)(o,1)[0],c=Object(be.a)(he.breakpoints.up("md")),u=G.a.useState(!1),d=Object(qe.a)(u,2),m=d[0],p=d[1],g=Object(de.g)();return G.a.createElement(ve.a,{component:"article",className:i.outerContainer},G.a.createElement(ve.a,{display:"flex",alignItems:"center",flexDirection:"row",width:1,className:i.root,component:"nav"},!1===c&&G.a.createElement(Te.a,{className:i.menuButton,color:"inherit","aria-label":"open menu",onClick:function(){r?g.push("/channel/".concat(r)):p(!0)}},G.a.createElement(Pe.a,null)),(null===s||void 0===s?void 0:s.channel_type)===v.DirectMessage&&t&&G.a.createElement(Rr,{channelId:s.id}),(null===s||void 0===s?void 0:s.channel_type)===v.ChatMessage&&!1===(null===s||void 0===s?void 0:s.is_private)&&!l&&G.a.createElement($e.a,{size:"small",variant:"outlined",color:"primary",label:n,icon:G.a.createElement(Me.a,null),className:i.title,"aria-label":"channel: ".concat(n)}),(null===s||void 0===s?void 0:s.channel_type)===v.ChatMessage&&!0===(null===s||void 0===s?void 0:s.is_private)&&!l&&!a&&G.a.createElement($e.a,{size:"small",variant:"outlined",color:"primary",label:n,icon:G.a.createElement(Me.a,null),className:i.title,"aria-label":"channel: ".concat(n)}),l&&G.a.createElement($e.a,{size:"small",variant:"outlined",color:"primary",label:n,icon:G.a.createElement(Me.a,null),className:i.title,"aria-label":"channel: ".concat(n)}),(null===s||void 0===s?void 0:s.channel_type)===v.ChatMessage&&!0===(null===s||void 0===s?void 0:s.is_private)&&a&&G.a.createElement(ve.a,{display:"flex",justifyContent:"center",component:"article"},G.a.createElement(je.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){g.push("/addChannelMembers")},"aria-label":"add user to channel"},"Add users to channel")),G.a.createElement(zr,{channelId:null===s||void 0===s?void 0:s.id}),G.a.createElement(Fe,null)),G.a.createElement(Re,{open:m},G.a.createElement(br,{handleDrawerClose:function(){p(!1)},open:m})))},Gr=Object(fe.a)((function(e){return{root:{overflowY:"scroll",height:"100vh"},spacer:{marginTop:e.spacing(5)}}})),Hr=function(){var e,n=Gr(),t=Object(de.g)(),a=Object(J.b)().isLoading,r=Object(K.useRecoilState)(Ea),l=Object(qe.a)(r,1)[0];l||t.push("/channel/general");var i,o=(i={variables:{user_id:null!==(e=null===l||void 0===l?void 0:l.owner_id)&&void 0!==e?e:"",channel_id:null===l||void 0===l?void 0:l.id}},le.useSubscription(ta,i)),s=o.data,c=o.loading,u=o.error,d=function(e){return le.useMutation(jt,e)}(),m=Object(qe.a)(d,2),p=m[0],g=m[1].error,h=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({variables:{channel_id:null===l||void 0===l?void 0:l.id,user_id:n}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(u||g)&&va("AddChannelMembers - error on user subscription",u,g),G.a.createElement(G.a.Fragment,null,G.a.createElement(Ee.a,{item:!0,xs:12,md:9,className:n.root,component:"section"},G.a.createElement(Vr,{channelName:null===l||void 0===l?void 0:l.name}),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(Ie,null)),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",mt:0,mb:5},G.a.createElement(ye.a,{id:"simple-modal-title",variant:"h2"},"Add users to ",null===l||void 0===l?void 0:l.name),G.a.createElement(ye.a,{color:"secondary",variant:"caption",id:"simple-modal-description"},s&&s.user.length>0?"Select users that you wanna add to this channel.":"All users have subscribed to this channel.")),G.a.createElement(ve.a,null,u&&G.a.createElement(Sa.a,{severity:"error"},"Error - something weird happened..."),(a||c)&&G.a.createElement(Ze,null),!(a||c||u)&&G.a.createElement(G.a.Fragment,null,G.a.createElement(We.a,{className:n.spacer}),G.a.createElement(wa.a,{component:"nav","aria-label":"secondary mailbox folders",className:n.spacer},s&&s.user.map((function(e,n){return G.a.createElement(xa.a,{button:!0,key:n,onClick:function(){e.auth0_user_id&&h(e.auth0_user_id)}},e&&G.a.createElement(Ga,{user:null!==e&&void 0!==e?e:""}),G.a.createElement(Ca.a,{primary:e.username}))}))),G.a.createElement(We.a,{className:n.spacer})))))},Yr=t(203),Kr=Object(fe.a)((function(e){return{root:{overflowY:"scroll",height:"100vh"},spacer:{marginTop:e.spacing(5)}}})),Xr=function(){var e,n=Kr(),t=Object(V.useState)(null),a=Object(qe.a)(t,2)[1],r=Object(J.b)().user,l=Object(V.useState)(null),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=r.sub,u=Object(de.g)(),d=(e={variables:{user_id:c}},le.useSubscription(aa,e)),m=d.data,p=d.loading,g=d.error,h=It(),f=Object(qe.a)(h,2),b=f[0],v=f[1].error,_=gt(),E=Object(qe.a)(_,2),y=E[0],j=E[1].error,O=function(e){return le.useMutation(yt,e)}(),w=Object(qe.a)(O,2),x=w[0],I=w[1].error;if(Object(V.useEffect)((function(){var e=function(){var e=Object(te.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===m||void 0===m?void 0:m.user.filter((function(e){return 0===e.user_channels.filter((function(e){return 1===e.channel.user_channels.length})).length})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var n=Object(te.a)(ne.a.mark((function n(){var t;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:t=n.sent,s(t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[m]),g||I||v||j)return va("AddDirectMessageChannel error",g,I,v,j),G.a.createElement(Sa.a,{severity:"error"},"Fetching users error...");if(p)return G.a.createElement(Ze,null);var C=function(){var e=Object(te.a)(ne.a.mark((function e(n,t){var r,l,i,o,s,c,d;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!t){e.next=10;break}return a(null),e.next=4,x({variables:{name:Object(Yr.a)(),user_id1:n,user_id2:t}});case 4:return c=e.sent,d=c.data,e.next=8,y({variables:{message:{user_id:"admin",text:"Welcome to your new direct message channel",channel_id:null===d||void 0===d||null===(r=d.validateAndAddDirectMessageChannel)||void 0===r?void 0:r.id}}});case 8:(null===d||void 0===d||null===(l=d.validateAndAddDirectMessageChannel)||void 0===l?void 0:l.id)&&(null===d||void 0===d||null===(i=d.validateAndAddDirectMessageChannel)||void 0===i?void 0:i.id)>0&&b({variables:{channel_id:null===d||void 0===d||null===(o=d.validateAndAddDirectMessageChannel)||void 0===o?void 0:o.id,message_id:1,user_id:t}}),u.push("/channel/".concat(null===d||void 0===d||null===(s=d.validateAndAddDirectMessageChannel)||void 0===s?void 0:s.name));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ee.a,{item:!0,xs:12,md:9,className:n.root,component:"section"},G.a.createElement(Vr,{channelName:"general"}),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(Ie,null)),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",mb:5},G.a.createElement(ye.a,{variant:"h2"},"Add a user"),G.a.createElement(ye.a,{color:"secondary",variant:"caption",id:"simple-modal-description"},(null===o||void 0===o?void 0:o.length)?"Select users that you wanna send direct messages to.":"")),G.a.createElement(ve.a,{mb:5},G.a.createElement(We.a,{className:n.spacer}),(null===o||void 0===o?void 0:o.length)&&G.a.createElement(wa.a,{className:n.spacer},null===o||void 0===o?void 0:o.map((function(e,n){return G.a.createElement(xa.a,{button:!0,key:n,onClick:function(){return C(c,e.auth0_user_id)}},G.a.createElement(Ga,{user:e}),G.a.createElement(Ca.a,{primary:e.username}))}))),0===(null===o||void 0===o?void 0:o.length)&&G.a.createElement(Sa.a,{severity:"success"},"All users have been added. U can send a message, by clicking on the user in the menu sidebar in direct messages."),G.a.createElement(We.a,{className:n.spacer}))))},Jr=t(152),Zr=t(62),el=t.n(Zr),nl=t(423),tl=Object(fe.a)((function(e){var n,t;return t={head:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(0)}},Object(ue.a)(t,e.breakpoints.up("md"),{messageText:{paddingBottom:"1rem",color:"rgba(255, 255, 255, 0.7)"}}),Object(ue.a)(t,e.breakpoints.down("md"),{messageText:{paddingBottom:"1rem",color:"rgba(255, 255, 255, 0.7)"}}),Object(ue.a)(t,e.breakpoints.down("sm"),{messageText:{paddingBottom:"1rem",color:"rgba(255, 255, 255, 0.7)"}}),Object(ue.a)(t,"vspace",{marginBottom:e.spacing(1)}),Object(ue.a)(t,"vspaceTop",{marginBottom:e.spacing(3)}),Object(ue.a)(t,"vspaceBottom",{marginTop:e.spacing(1),marginBottom:e.spacing(0)}),Object(ue.a)(t,"avatar",{width:e.spacing(4),height:e.spacing(4),backgroundColor:"#000000",color:"#ffffff",fontSize:11,fontWeight:"bold",border:"2px solid #f57c00"}),Object(ue.a)(t,"avatarDeleted",{width:e.spacing(4),height:e.spacing(4),backgroundColor:"#000000",color:"#ffffff",fontSize:11,fontWeight:"bold",border:"2px solid #f57c00"}),Object(ue.a)(t,"image",{paddingBottom:"0.5rem"}),Object(ue.a)(t,"giphy",(n={},Object(ue.a)(n,e.breakpoints.down("sm"),{width:"100%"}),Object(ue.a)(n,e.breakpoints.up("md"),{width:"25%"}),n)),t})),al=function(e){var n=e.channelThread,t=e.currentChannel,a=e.showThreadInfo,r=tl();return G.a.createElement(G.a.Fragment,null,function(e){var n,l,i,o,s,c,u;return G.a.createElement(G.a.Fragment,null,a&&(null===e||void 0===e||null===(n=e.message)||void 0===n||null===(l=n.channel)||void 0===l?void 0:l.channel_type)===v.ChatMessage&&G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement($e.a,{variant:"outlined",size:"small",color:"primary",label:G.a.createElement("strong",null,"Thread - ",null===t||void 0===t?void 0:t.name," ")})),a&&(null===e||void 0===e||null===(i=e.message)||void 0===i||null===(o=i.channel)||void 0===o?void 0:o.channel_type)===v.DirectMessage&&G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(Rr,{channelId:null===e||void 0===e||null===(s=e.message)||void 0===s||null===(c=s.channel)||void 0===c?void 0:c.id})),G.a.createElement(We.a,{className:r.vspaceTop}),G.a.createElement(xa.a,{key:e.message.id,component:"div",className:r.head},G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(nl.a,null,G.a.createElement(Ia.a,null,G.a.createElement(Ye.a,{variant:"dot"},e.message.deleted?G.a.createElement(we.a,{className:r.avatarDeleted,alt:"Message has been removed"},"!!!"):G.a.createElement(we.a,{className:r.avatar},e.message.user.username.substring(0,2).toUpperCase()))))),G.a.createElement(ve.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(ye.a,{color:"secondary",variant:"caption"},e.message.deleted?G.a.createElement("strong",null,"Oh sorry it seems..."):G.a.createElement(G.a.Fragment,null,G.a.createElement("strong",null,e.message.user.username," "))),G.a.createElement(ye.a,{variant:"caption",color:"primary",style:{marginLeft:"8px"}},G.a.createElement("i",null,el()(e.message.timestamp).fromNow())),G.a.createElement(We.a,{className:r.vspace}))),G.a.createElement(ye.a,{component:"div",className:r.messageText},e.message.text),(null===(u=e.message)||void 0===u?void 0:u.image)?G.a.createElement(ve.a,{className:r.image},G.a.createElement("img",{alt:e.message.image,src:e.message.image,className:r.giphy})):"")))}(n))},rl=t(98),ll=t.n(rl),il=function(e){var n,t,a,r=e.messageId,l=le.useMutation(St,a),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=s.data,u=s.error;return u||void 0!==(null===c||void 0===c||null===(n=c.delete_channel_thread_message)||void 0===n?void 0:n.affected_rows)&&0===(null===c||void 0===c||null===(t=c.delete_channel_thread_message)||void 0===t?void 0:t.affected_rows)?G.a.createElement(Sa.a,{severity:"error"},"Message could not get deleted..."):G.a.createElement(Te.a,{onClick:function(){return function(e){o({variables:{message_id:e}})}(r)},"aria-label":"delete message ".concat(r)},G.a.createElement(ll.a,{color:"primary",fontSize:"small"}))},ol=Object(fe.a)((function(e){var n;return n={root:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(2),overflowWrap:"break-word",hyphens:"auto",textOverflow:"ellipsis"}},Object(ue.a)(n,e.breakpoints.up("md"),{messageText:{padding:"1rem",paddingLeft:"0rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(ue.a)(n,e.breakpoints.down("md"),{messageText:{padding:"1rem",paddingLeft:"0rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(ue.a)(n,e.breakpoints.down("sm"),{messageText:{padding:"1rem",paddingLeft:"0rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(ue.a)(n,"vspace",{marginBottom:e.spacing(1)}),Object(ue.a)(n,"vspaceTop",{marginBottom:e.spacing(3)}),Object(ue.a)(n,"vspaceBottom",{marginTop:e.spacing(1),marginBottom:e.spacing(0)}),Object(ue.a)(n,"image",{paddingBottom:"0.5rem"}),Object(ue.a)(n,"avatar",{width:e.spacing(4),height:e.spacing(4),backgroundColor:"#000000",color:"#ffffff",fontSize:11,fontWeight:"bold",border:"2px solid #f57c00"}),Object(ue.a)(n,"loadMoreButton",{display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1)}),n})),sl=function(e){var n,t,a=e.messages,r=e.user,l=e.channelThread,i=e.currentChannel,o=e.handleIncreaseLimit,s=e.limit,c=e.showThreadInfo,u=ol();return G.a.createElement(G.a.Fragment,null,G.a.createElement(al,{channelThread:l,currentChannel:i,showThreadInfo:c}),G.a.createElement(ve.a,{className:u.loadMoreButton},(null===a||void 0===a?void 0:a.length)===s&&G.a.createElement(je.a,{onClick:function(){return o()},"aria-label":"load more messages"},"load more (+",s,")")),a?null===(n=Object(Jr.a)(a))||void 0===n||null===(t=n.reverse())||void 0===t?void 0:t.map((function(e){return function(e){var n,t,a;return G.a.createElement(xa.a,{key:e.id,component:"div",className:u.root},G.a.createElement(nl.a,null,G.a.createElement(Ia.a,null,G.a.createElement(Ye.a,{variant:"dot"},G.a.createElement(we.a,{className:u.avatar},null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.username.substring(0,2).toUpperCase())))),G.a.createElement(ve.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(ye.a,{variant:"caption"},G.a.createElement("strong",null,null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username," "),G.a.createElement("i",null,el()(e.timestamp).fromNow())),G.a.createElement(We.a,{className:u.vspace})),G.a.createElement(ve.a,null,G.a.createElement(ye.a,{variant:"caption"},r.sub===(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.auth0_user_id)?G.a.createElement(il,{messageId:e.id}):""))),G.a.createElement(ye.a,{component:"div",className:u.messageText},e.message),e.image?G.a.createElement(ve.a,{className:u.image},G.a.createElement("img",{alt:e.image,src:e.image})):"",G.a.createElement(We.a,{className:u.vspace})))}(e)})):G.a.createElement(Ze,null))},cl=t(106),ul=t(241),dl=Object(fe.a)((function(e){return{giphySearchInput:Object(ue.a)({display:"flex",flex:1,paddingBottom:e.spacing(2),marginTop:e.spacing(1)},e.breakpoints.down("md"),{marginTop:e.spacing(1)}),giphyCarousel:{display:"flex",padding:e.spacing(3)}}})),ml=new cl.GiphyFetch("gNDqYmKTip2mgTRqQbS5BwslaLM8Jdq0"),pl=function(e){var n=e.hideGiphyCarousel,t=dl(),a=Object(K.useRecoilState)(ja),r=Object(qe.a)(a,2)[1],l=Object(V.useState)(""),i=Object(qe.a)(l,2),o=i[0],s=i[1];return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",flexDirection:"column",style:{maxWidth:"100%"}},G.a.createElement(ul.Carousel,{key:o,fetchGifs:function(e){return o?ml.search(o,{offset:e,limit:5}):ml.trending({offset:e,limit:5})},onGifClick:function(e,t){t.preventDefault(),r(e),n()},gifHeight:50,gutter:6}),G.a.createElement(Xa.a,{className:t.giphySearchInput,size:"small",label:"Search giphy ...",variant:"standard",onChange:function(e){s(e.target.value)}})))},gl=t(148),hl=t.n(gl),fl=Object(fe.a)((function(e){return{giphyImage:{padding:e.spacing(1),marginTop:e.spacing(2)},giphyButton:Object(ue.a)({},e.breakpoints.up("md"),{height:56})}})),bl=function(e){var n=e.children,t=fl(),a=G.a.useState(!1),r=Object(qe.a)(a,2),l=r[0],i=r[1],o=G.a.useState(!1),s=Object(qe.a)(o,2),c=s[0],u=s[1],d=G.a.useState(!1),m=Object(qe.a)(d,2),p=m[0],g=m[1];return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{style:{display:p?"block":"none"},className:t.giphyImage,order:1,flex:"1",justifyContent:"flex-start",alignItems:"center"},G.a.createElement(pl,{hideGiphyCarousel:function(){return u(!c),void g(!1)}})),G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},G.a.createElement(ve.a,{flex:1},G.a.createElement(je.a,{color:!1===c?"primary":"secondary",size:"large",onClick:function(){g(!p),u(!c)},className:t.giphyButton,"aria-label":"giphy"},G.a.createElement(hl.a,null))),G.a.createElement(ve.a,{flex:16,justifyContent:"flex-end"},n)),G.a.createElement(Re,{open:l},G.a.createElement(br,{handleDrawerClose:function(){i(!1)},open:l})))},vl=t(424),_l=t(59),El=t.n(_l),yl=function(){var e,n,t=Object(J.b)().user,a=Object(K.useRecoilState)(Ea),r=Object(qe.a)(a,1)[0],l=(n={variables:{self_id:t.sub,channel_id:r.id}},le.useSubscription(la,n)),i=l.data,o=l.loading,s=l.error;return s&&va("Typing Indicator Error...",s),G.a.createElement(G.a.Fragment,null,!o&&(null===i||void 0===i||null===(e=i.user_typing[0])||void 0===e?void 0:e.username)?"".concat(i.user_typing[0].username," is typing ..."):"Type your message here ...")},jl=Object(fe.a)((function(e){var n,t,a;return{root:{display:"flex",flex:1,flexDirection:"column",justifyContent:"space-between"},giphyImage:{marginTop:e.spacing(0)},form:(n={display:"flex",marginLeft:e.spacing(1),marginRight:e.spacing(1),flexDirection:"column",flexGrow:1},Object(ue.a)(n,e.breakpoints.down("md"),{marginTop:e.spacing(1)}),Object(ue.a)(n,e.breakpoints.up("md"),{marginTop:e.spacing(0)}),n),messageInput:(t={},Object(ue.a)(t,e.breakpoints.down("md"),{fontSize:"1rem"}),Object(ue.a)(t,"&.MuiFormLabel-root.Mui-focused",{color:e.palette.secondary.main}),t),image:(a={border:"2px solid "+e.palette.secondary.main,height:150,marginBottom:e.spacing(3)},Object(ue.a)(a,e.breakpoints.up("md"),{maxHeight:250}),Object(ue.a)(a,e.breakpoints.down("lg"),{border:"2px solid "+e.palette.secondary.main,height:150,maxWidth:"150vw",maxHeight:"70vw"}),Object(ue.a)(a,e.breakpoints.down("md"),{border:"2px solid "+e.palette.secondary.main,height:120,maxWidth:"100vw",maxHeight:"50vw"}),a)}})),Ol=function(e){var n,t,a,r,l=jl(),i=Object(be.a)(he.breakpoints.up("md")),o=Object(V.useRef)(null),s=Object(J.b)().user,c=Object(V.useState)(""),u=Object(qe.a)(c,2),d=u[0],m=u[1],p=Object(K.useRecoilState)(ja),g=Object(qe.a)(p,2),h=g[0],f=g[1],b=Object(K.useRecoilState)(Oa),v=Object(qe.a)(b,2)[1],_=e.channelId,E=wt({variables:{user_id:s.sub,channel_id:_}}),y=Object(qe.a)(E,1)[0],j=kt(),O=Object(qe.a)(j,1)[0],w=function(){var n=Object(te.a)(ne.a.mark((function n(t){var a,r,l,i;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),(d.trim()||h)&&e.channelThreadId){n.next=3;break}return n.abrupt("return");case 3:return i={variables:{channel_thread_id:e.channelThreadId,message:d,image:null===h||void 0===h||null===(a=h.images)||void 0===a||null===(r=a.fixed_width)||void 0===r?void 0:r.url,user_id:s.sub}},m(""),null===o||void 0===o||null===(l=o.current)||void 0===l||l.focus(),f(null),v(!1),n.next=10,O(i);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return G.a.createElement(ve.a,{className:l.root},G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",className:l.giphyImage},h&&G.a.createElement("img",{className:l.image,alt:null===h||void 0===h||null===(n=h.images)||void 0===n||null===(t=n.fixed_width)||void 0===t?void 0:t.url,src:null===h||void 0===h||null===(a=h.images)||void 0===a||null===(r=a.fixed_width)||void 0===r?void 0:r.url,onClick:function(){return f(null)}})),G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:l.form,onSubmit:w},G.a.createElement(Xa.a,{value:d,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&y(),m(e)}(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&w(e)},inputProps:{maxLength:2e3},inputRef:o,focused:!0,size:function(){switch(i){case!0:return"medium";case!1:default:return"small"}}(),variant:"outlined",multiline:!0,rows:1,color:"primary",autoComplete:"off",id:"chat-message-input-".concat(e.channelThreadId),label:G.a.createElement(yl,null),InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{type:"submit",color:"secondary","aria-label":"submit message"},G.a.createElement(El.a,null))),classes:{input:l.messageInput}},InputLabelProps:{className:l.messageInput}})))},wl=Object(fe.a)((function(e){var n;return{root:{marginTop:e.spacing(0),padding:e.spacing(2),paddingBottom:e.spacing(0)},messageInput:(n={position:"fixed",bottom:0,padding:e.spacing(2),background:e.palette.background.default,zIndex:1e3},Object(ue.a)(n,e.breakpoints.up("lg"),{width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("lg"),{width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("md"),{width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("sm"),{width:"100vw"}),n)}})),xl=function(){var e,n,t=wl(),a=Object(V.useState)(20),r=Object(qe.a)(a,2),l=r[0],i=r[1],o=Object(J.b)().user,s=Object(V.useRef)(null),c=Object(K.useRecoilState)(Ea),u=Object(qe.a)(c,1)[0],d=Object(de.g)(),m=Object(de.h)(),p=m.messageId,g=m.channel,h=Ht({variables:{limit:l,message_id:parseInt(p)},fetchPolicy:"network-only"}),f=h.data,b=h.loading,v=h.error,_=(n={variables:{message_id:parseInt(p)}},le.useQuery(Rt,n)),E=_.data,y=_.loading,j=_.error;return Object(V.useEffect)((function(){setTimeout((function(){var e;f&&(null===f||void 0===f||null===(e=f.channel_thread_message)||void 0===e?void 0:e.length)>3&&function(){var e;"object"===typeof s&&(null===s||void 0===s||null===(e=s.current)||void 0===e||e.scrollIntoView())}()}),200),void 0===(null===u||void 0===u?void 0:u.id)&&d.push("/channel/".concat(g))}),[f,g,u,d]),b||y?G.a.createElement(Ze,null):v||j?(va("Thread Error",v,j),G.a.createElement(Sa.a,{severity:"error"},"Thread Error")):G.a.createElement(ve.a,{display:"flex",flexDirection:"column"},G.a.createElement(ve.a,{className:t.root},G.a.createElement(wa.a,{id:"message-list",component:"div"},G.a.createElement(sl,{messages:null===f||void 0===f?void 0:f.channel_thread_message,user:o,channelThread:null===E||void 0===E?void 0:E.channel_thread[0],currentChannel:u,handleIncreaseLimit:function(){i(l+20)},limit:l,showThreadInfo:!1})),G.a.createElement("div",{ref:s})),G.a.createElement(ve.a,{className:t.messageInput},G.a.createElement(bl,null,G.a.createElement(Ol,{channelId:null===u||void 0===u?void 0:u.id,channelThreadId:null===E||void 0===E||null===(e=E.channel_thread[0])||void 0===e?void 0:e.id}))))},Il=Object(fe.a)((function(e){var n,t;return{giphyVisible:{marginTop:e.spacing(2)},giphyHidden:{display:"none",marginTop:e.spacing(2)},giphyImage:{marginTop:e.spacing(2)},form:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},messageInput:(n={},Object(ue.a)(n,e.breakpoints.down("md"),{fontSize:"1rem"}),Object(ue.a)(n,"&.MuiFormLabel-root.Mui-focused",{color:e.palette.secondary.main}),n),image:{maxHeight:55,paddingRight:e.spacing(1)},giphyButton:(t={marginRight:e.spacing(1)},Object(ue.a)(t,e.breakpoints.up("md"),{height:56}),Object(ue.a)(t,e.breakpoints.down("md"),{height:40}),t)}})),Cl=function(e){var n,t,a=Il(),r=Object(be.a)(he.breakpoints.down("md")),l=G.a.useState(!1),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(J.b)().user,u=Object(V.useState)(""),d=Object(qe.a)(u,2),m=d[0],p=d[1],g=Object(K.useRecoilState)(ja),h=Object(qe.a)(g,2),f=h[0],b=h[1],v=Object(K.useRecoilState)(Oa),_=Object(qe.a)(v,2)[1],E=G.a.useState(!1),y=Object(qe.a)(E,2),j=y[0],O=y[1],w=e.channelId,x=wt({variables:{user_id:c.sub,channel_id:w}}),I=Object(qe.a)(x,1)[0],C=kt(),k=Object(qe.a)(C,1)[0],S=function(){var n=Object(te.a)(ne.a.mark((function n(t){var a,r;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),""!==m||null!==f){n.next=3;break}return n.abrupt("return");case 3:if(!(m.length>2e3)){n.next=6;break}return alert("Your text limit has reached the limit of 2000 characters"),n.abrupt("return");case 6:if(void 0!==e.channelThreadId){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,k({variables:{channel_thread_id:e.channelThreadId,message:m,image:null===f||void 0===f||null===(a=f.images)||void 0===a||null===(r=a.fixed_width)||void 0===r?void 0:r.url,user_id:c.sub}});case 10:p(""),b(null),_(!1);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ee.a,{item:!0,xs:12,className:f?a.giphyImage:""},f&&G.a.createElement("img",{className:a.image,alt:null===f||void 0===f?void 0:f.bitly_url,src:null===f||void 0===f||null===(n=f.images)||void 0===n||null===(t=n.fixed_width)||void 0===t?void 0:t.url,onClick:function(){return b(null)}})),G.a.createElement(Ee.a,{item:!0,xs:12,className:j?a.giphyVisible:a.giphyHidden},G.a.createElement(pl,{hideGiphyCarousel:function(){return O(!1),void s(!o)}})),G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},G.a.createElement(ve.a,null,G.a.createElement(je.a,{variant:"outlined",color:!1===o?"primary":"secondary",onClick:function(){O(!j),s(!o)},className:a.giphyButton,"aria-label":"add giphy"},G.a.createElement(hl.a,null))),G.a.createElement(ve.a,{flex:16,justifyContent:"flex-end"},G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:a.form,onSubmit:S},G.a.createElement(Xa.a,{value:m,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&I(),p(e)}(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&S(e)},size:function(){switch(r){case!1:return"medium";case!0:default:return"small"}}(),variant:"outlined",color:"secondary",autoComplete:"off",id:"chat-message-input-".concat(e.channelThreadId),label:"Crackle your message here ...",InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{type:"submit",color:"secondary","aria-label":"send message"},G.a.createElement(El.a,null))),classes:{input:a.messageInput}},InputLabelProps:{className:a.messageInput}})))))},kl=function(e){var n,t,a=e.channelThread,r=Object(V.useState)(20),l=Object(qe.a)(r,2),i=l[0],o=l[1],s=Object(J.b)(),c=s.user,u=s.error,d=Ht({variables:{limit:i,message_id:a.message_id}}),m=d.data,p=d.error;return p||u?(va("Thread Error",p,u),G.a.createElement(Sa.a,{severity:"error"},"Thread Error")):G.a.createElement(G.a.Fragment,null,G.a.createElement(wa.a,{component:"div"},G.a.createElement(sl,{messages:null===m||void 0===m?void 0:m.channel_thread_message,user:c,channelThread:a,currentChannel:null===a||void 0===a||null===(n=a.message)||void 0===n?void 0:n.channel,handleIncreaseLimit:function(){o(i+20)},limit:i,showThreadInfo:!0}),G.a.createElement(Cl,{channelId:null===(t=a.message)||void 0===t?void 0:t.id,channelThreadId:a.id})))},Sl=Object(fe.a)((function(e){var n;return{root:{height:"100vh",marginTop:e.spacing(0),paddingTop:e.spacing(0),paddingBottom:e.spacing(0)},messageContainer:(n={},Object(ue.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(10),paddingBottom:e.spacing(8)}),Object(ue.a)(n,e.breakpoints.down("md"),{padding:e.spacing(2),paddingBottom:e.spacing(8)}),Object(ue.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(2),paddingBottom:e.spacing(4)}),Object(ue.a)(n,"paddingTop",e.spacing(4)),Object(ue.a)(n,"marginBottom",e.spacing(2)),n)}})),ql=function(){var e,n,t=Sl(),a=le.useSubscription(Xt,n),r=a.data,l=a.error,i=a.loading;return l?(va("Thread Error",l),G.a.createElement(Sa.a,{severity:"error"},"Thread Error")):i?G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",style:{height:"100vh"}},G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},G.a.createElement(Ze,null),G.a.createElement(ye.a,{variant:"caption",color:"secondary"},"Loading threads")))):G.a.createElement(G.a.Fragment,null,G.a.createElement("div",{className:t.root},G.a.createElement(Ee.a,{container:!0},null===r||void 0===r||null===(e=r.channel_thread)||void 0===e?void 0:e.map((function(e,n){if(e&&e.channel_thread_messages.length)return G.a.createElement(G.a.Fragment,{key:n},G.a.createElement(Ee.a,{item:!0,xs:12,className:t.messageContainer},G.a.createElement(kl,{channelThread:e})))})))))},Tl=Object(fe.a)((function(){return{root:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:"1",overflowY:"scroll",maxHeight:"90vh",height:"90vh"}}})),$l=function(){var e=Tl(),n=Object(de.h)().channel;return G.a.createElement(Ee.a,{item:!0,xs:12,md:9},G.a.createElement(ve.a,{className:e.root,component:"article"},n?G.a.createElement(G.a.Fragment,null,G.a.createElement(Vr,{channelName:"Thread - ".concat(n),channel:n}),G.a.createElement(xl,null)):G.a.createElement(G.a.Fragment,null,G.a.createElement(Vr,{channelName:"Threadlist",isThreadList:!0}),G.a.createElement(ql,null))))},Nl=function(){var e=Object(J.b)().user,n=_t({variables:{user_id:null===e||void 0===e?void 0:e.sub}}),t=Object(qe.a)(n,1)[0];return Object(V.useEffect)((function(){var n=setInterval((function(){void 0!==(null===e||void 0===e?void 0:e.sub)&&t()}),7e3);return function(){clearInterval(n)}}),[t,e]),G.a.createElement($l,null)},Ml=t(154),Al=t.n(Ml),Pl=Object(fe.a)((function(e){return{root:{marginLeft:e.spacing(1),marginRight:e.spacing(2)}}})),Dl=function(e){var n,t,a,r,l=Object(de.g)(),i=Pl(),o=Kt({variables:{message_id:null===(n=e.message)||void 0===n?void 0:n.id}}),s=o.data,c=o.loading,u=o.error,d=(r={variables:{message_id:null===(t=e.message)||void 0===t?void 0:t.id}},le.useMutation(qt,r)),m=Object(qe.a)(d,2),p=m[0],g=m[1].error,h=function(n){var t;n.stopPropagation(),l.push("/channel/".concat(e.channelName,"/thread/").concat(null===(t=e.message)||void 0===t?void 0:t.id))},f=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.next=3,p();case 3:h(n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(g||u)&&va("Error in Thread Reply",g,u),c?G.a.createElement(G.a.Fragment,null,G.a.createElement(Te.a,{className:i.root,"aria-label":"reply to message"},G.a.createElement(Al.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"},"aria-label":"reply to message"}))):(null===s||void 0===s||null===(a=s.channel_thread)||void 0===a?void 0:a.length)?G.a.createElement(G.a.Fragment,null,G.a.createElement(Te.a,{className:i.root,onClick:function(e){return h(e)},"aria-label":"reply to message"},G.a.createElement(Al.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"},"aria-label":"reply to message"}))):G.a.createElement(G.a.Fragment,null,G.a.createElement(Te.a,{className:i.root,onClick:f,"aria-label":"reply to message"},G.a.createElement(Al.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"},"aria-label":"reply to message"})))},Ll=Object(fe.a)((function(e){var n;return n={messageText:{paddingBottom:"1rem","&:hover":{textDecoration:"underline"}}},Object(ue.a)(n,e.breakpoints.up("md"),{messageText:{fontSize:12}}),Object(ue.a)(n,e.breakpoints.down("md"),{messageText:{fontSize:11}}),Object(ue.a)(n,e.breakpoints.down("sm"),{messageText:{paddingBottom:".8rem"}}),Object(ue.a)(n,"lastReply",{color:e.palette.primary.main,fontStyle:"italic",paddingLeft:e.spacing(1)}),n})),Fl=function(e){var n,t,a,r,l,i,o,s,c=e.channelName,u=e.message,d=Ll(),m=Kt({variables:{message_id:null===u||void 0===u?void 0:u.id}}),p=m.data,g=m.error;return g&&va("Error in ThreadReplyIn",g),G.a.createElement(G.a.Fragment,null,(null===p||void 0===p||null===(n=p.channel_thread[0])||void 0===n||null===(t=n.channel_thread_messages)||void 0===t?void 0:t.length)?G.a.createElement(G.a.Fragment,null,G.a.createElement(ye.a,{variant:"caption",color:"textPrimary",component:X.b,className:d.messageText,to:{pathname:"/channel/".concat(c,"/thread/").concat(null===u||void 0===u?void 0:u.id)},"aria-label":"reply to message in channel thread ".concat(c)},"".concat(null===p||void 0===p||null===(a=p.channel_thread[0])||void 0===a||null===(r=a.channel_thread_messages)||void 0===r?void 0:r.length," ").concat(1===(null===p||void 0===p||null===(l=p.channel_thread[0])||void 0===l||null===(i=l.channel_thread_messages)||void 0===i?void 0:i.length)?"reply":"replies")),G.a.createElement(ye.a,{variant:"caption",color:"textSecondary",className:d.lastReply},"Last reply ".concat(el()(null===p||void 0===p||null===(o=p.channel_thread[0])||void 0===o||null===(s=o.channel_thread_messages[0])||void 0===s?void 0:s.timestamp).fromNow()))):"")},Bl=function(e){var n,t,a,r=e.messageId,l=Object(K.useSetRecoilState)(Oa),i=le.useMutation(bt,a),o=Object(qe.a)(i,2),s=o[0],c=o[1],u=c.data,d=c.error,m=function(){var e=Object(te.a)(ne.a.mark((function e(n,t){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),l(!0),e.next=4,s({variables:{message_id:t}});case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(d||void 0!==(null===u||void 0===u||null===(n=u.delete_message)||void 0===n?void 0:n.affected_rows)&&0===(null===u||void 0===u||null===(t=u.delete_message)||void 0===t?void 0:t.affected_rows))&&va("Message could not get deleted...",d),G.a.createElement(Te.a,{onClick:function(e){return m(e,r)},"aria-label":"Delete message id ".concat(r)},G.a.createElement(ll.a,{color:"primary",fontSize:"small"}))},Ql=function(e){var n,t,a=e.messageId,r=ft(),l=Object(qe.a)(r,2),i=l[0],o=l[1],s=o.data,c=o.error,u=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),e.next=3,i({variables:{_eq:a,text:"...this message was deleted.",deleted:!0}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(c||void 0!==(null===s||void 0===s||null===(n=s.update_message)||void 0===n?void 0:n.affected_rows)&&0===(null===s||void 0===s||null===(t=s.update_message)||void 0===t?void 0:t.affected_rows))&&va("Message could not get updated...",c),G.a.createElement(Te.a,{onClick:u,"aria-label":"Replace message"},G.a.createElement(ll.a,{color:"primary",fontSize:"small"}))},zl=function(e){var n,t=e.messageId,a=Kt({variables:{message_id:t}}),r=a.data,l=a.loading,i=a.error;return l?G.a.createElement(G.a.Fragment,null):i?G.a.createElement(Sa.a,{severity:"error"},"useWatchChannelThreadSubscription Error..."):(null===r||void 0===r||null===(n=r.channel_thread)||void 0===n?void 0:n.length)?G.a.createElement(Ql,{messageId:t}):G.a.createElement(Bl,{messageId:t})},Ul=Object(fe.a)((function(e){var n;return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between"},form:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},messageInput:(n={},Object(ue.a)(n,e.breakpoints.down("md"),{fontSize:"1rem"}),Object(ue.a)(n,"&.MuiFormLabel-root.Mui-focused",{color:e.palette.secondary.main}),n)}})),Rl=function(e){var n,t,a=e.message,r=Ul(),l=Object(V.useState)(""),i=Object(qe.a)(l,2),o=i[0],s=i[1];Object(V.useEffect)((function(){s(a.text)}),[a]);var c=ft(),u=Object(qe.a)(c,2),d=u[0],m=u[1],p=m.data,g=m.loading,h=m.error,f=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==o){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d({variables:{_eq:a.id,text:o}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return g?G.a.createElement(G.a.Fragment,null,G.a.createElement(Ze,null)):((h||void 0!==(null===p||void 0===p||null===(n=p.update_message)||void 0===n?void 0:n.affected_rows)&&0===(null===p||void 0===p||null===(t=p.update_message)||void 0===t?void 0:t.affected_rows))&&va("Message could not get deleted...",h),G.a.createElement("div",{className:r.root},G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:r.form},G.a.createElement(Xa.a,{value:o,autoFocus:!0,onChange:function(e){!function(e){s(e)}(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&f(e)},variant:"outlined",color:"secondary",autoComplete:"off",multiline:!0,rowsMax:4,id:"update-chat-message-input",label:"Update message...",InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{id:"message_submit",onClick:function(e){return f(e)},color:"secondary","aria-label":"Send message"},G.a.createElement(El.a,null))),classes:{input:r.messageInput}},InputLabelProps:{className:r.messageInput}}))))},Wl=Object(fe.a)((function(e){var n,t;return t={root:{marginBottom:"90px",overflowY:"scroll"},listItem:Object(ue.a)({display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(2),overflowWrap:"break-word",hyphens:"auto",textOverflow:"ellipsis"},e.breakpoints.down("md"),{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),paddingBottom:e.spacing(0)}),messageText:{color:"#fff"}},Object(ue.a)(t,e.breakpoints.up("md"),{messageText:{padding:"1rem",paddingLeft:"0rem","&:hover":{cursor:"pointer"}}}),Object(ue.a)(t,e.breakpoints.down("md"),{messageText:{padding:"1rem",paddingLeft:"0rem",paddingBottom:".3rem"}}),Object(ue.a)(t,"vspace",Object(ue.a)({marginTop:e.spacing(3),marginBottom:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.spacing(1),marginBottom:e.spacing(0)})),Object(ue.a)(t,"image",{paddingBottom:"0.5rem"}),Object(ue.a)(t,"giphy",(n={},Object(ue.a)(n,e.breakpoints.down("sm"),{width:"100%"}),Object(ue.a)(n,e.breakpoints.up("md"),{width:"25%"}),n)),Object(ue.a)(t,"avatar",{width:e.spacing(4),height:e.spacing(4),backgroundColor:"#000000",color:"#ffffff",fontSize:11,fontWeight:"bold",border:"2px solid #f57c00"}),Object(ue.a)(t,"avatarDeleted",{width:e.spacing(4),height:e.spacing(4),backgroundColor:"#000000",color:"#ffffff",fontSize:11,fontWeight:"bold",border:"2px solid #f57c00"}),Object(ue.a)(t,"loadMoreButton",{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(3)}),Object(ue.a)(t,"divider",{flex:1}),Object(ue.a)(t,"date",{marginRight:"5px",color:"#ffffff",fontWeight:500}),Object(ue.a)(t,"time",{color:"#ffffff",fontWeight:500}),t})),Vl=function(e){var n,t,a=e.messages,r=e.lastMessage,l=e.preLastMessageId,i=e.user,o=e.handleIncreaseLimit,s=e.limit,c=e.setRef,u=e.setDoScroll,d=e.delayAfterScrolling,m=Wl(),p=Object(V.useState)(!1),g=Object(qe.a)(p,2),h=g[0],f=g[1],b=Object(V.useState)(null),v=Object(qe.a)(b,2),_=v[0],E=v[1],y=Object(de.h)().channel,j=Object(K.useRecoilValue)(Oa),O=Object(V.useRef)(null);Object(V.useEffect)((function(){c(O)}),[c,O]);var w=function(e){var n,t,a,r,l;return G.a.createElement(xa.a,{key:e.id,component:"div",className:m.listItem},G.a.createElement(nl.a,null,G.a.createElement(Ia.a,{"aria-label":null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.username.substring(0,2).toUpperCase()},G.a.createElement(Ye.a,{variant:"dot"},e.deleted?G.a.createElement(we.a,{className:m.avatarDeleted,alt:"Message has been removed"},"!!!"):G.a.createElement(we.a,{className:m.avatar},null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username.substring(0,2).toUpperCase())))),G.a.createElement(ve.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center"},G.a.createElement(ve.a,{component:"div",display:"flex",justifyContent:"space-between",flexGrow:"1",style:{marginRight:16}},G.a.createElement(ye.a,{color:"secondary",variant:"caption"},e.deleted?G.a.createElement("strong",null,"Oh sorry it seems..."):G.a.createElement(G.a.Fragment,null,G.a.createElement("strong",null,null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.username," "))),G.a.createElement(ye.a,{variant:"caption",color:"primary",style:{marginLeft:"8px"}},function(e){var n=el()();return el.a.duration(n.diff(e)).asHours()>12?G.a.createElement(G.a.Fragment,null,G.a.createElement("span",{className:m.date},el()(e).format("Do, MMM")),G.a.createElement("span",{className:m.time},el()(e).format("h:mm"))):G.a.createElement("span",{className:m.date},el()(e).fromNow())}(e.timestamp))),G.a.createElement(ve.a,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(Dl,{message:e,channelName:y}),e.deleted?"":G.a.createElement(G.a.Fragment,null,i.sub===(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.auth0_user_id)&&G.a.createElement(ye.a,{variant:"caption"},!(h&&_===e.id)&&G.a.createElement(zl,{messageId:e.id})))))),G.a.createElement(ye.a,{component:"p",className:m.messageText,onClick:function(){return function(e){var n;(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.auth0_user_id)===i.sub&&(E(e.id),f(!h))}(e)}},h&&_===e.id&&i.sub===(null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.auth0_user_id)&&!1===e.deleted?G.a.createElement(Rl,{message:e}):e.text),(null===e||void 0===e?void 0:e.image)?G.a.createElement(ve.a,{className:m.image},G.a.createElement("img",{alt:e.image,src:e.image,className:m.giphy})):"",G.a.createElement(ve.a,null,G.a.createElement(Fl,{message:e,channelName:y})),G.a.createElement(We.a,{className:m.vspace})))};return G.a.createElement(G.a.Fragment,null,G.a.createElement(wa.a,{id:"message-list",component:"div",className:m.root,onScroll:function(){u(!0),d()}},(null===a||void 0===a?void 0:a.length)===s&&G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",className:m.loadMoreButton,component:"div"},G.a.createElement(We.a,{className:m.divider}),G.a.createElement(je.a,{onClick:function(){return o()},"aria-label":"load more messages"},"load more (+",s,")"),G.a.createElement(We.a,{className:m.divider})),null===(n=Object(Jr.a)(a))||void 0===n||null===(t=n.reverse())||void 0===t?void 0:t.map((function(e){return w(e)})),!j&&r&&0!==l&&l&&l<r.id?w(r):"",G.a.createElement("div",{ref:O})))},Gl=Object(fe.a)((function(e){var n,t,a;return{root:{display:"flex",flex:1,flexDirection:"column",justifyContent:"space-between"},giphyImage:{marginTop:e.spacing(0)},form:(n={display:"flex",marginLeft:e.spacing(1),marginRight:e.spacing(1),flexDirection:"column",flexGrow:1},Object(ue.a)(n,e.breakpoints.down("md"),{marginTop:e.spacing(1)}),Object(ue.a)(n,e.breakpoints.up("md"),{marginTop:e.spacing(0)}),n),messageInput:(t={},Object(ue.a)(t,e.breakpoints.down("md"),{fontSize:"1rem"}),Object(ue.a)(t,"&.MuiFormLabel-root.Mui-focused",{color:e.palette.secondary.main}),t),image:(a={border:"2px solid "+e.palette.secondary.main,height:150,marginBottom:e.spacing(3)},Object(ue.a)(a,e.breakpoints.up("md"),{maxHeight:250}),Object(ue.a)(a,e.breakpoints.down("lg"),{border:"2px solid "+e.palette.secondary.main,height:150,maxWidth:"150vw",maxHeight:"70vw"}),Object(ue.a)(a,e.breakpoints.down("md"),{border:"2px solid "+e.palette.secondary.main,height:120,maxWidth:"100vw",maxHeight:"50vw"}),a)}})),Hl=function(e){var n,t,a=Gl(),r=Object(be.a)(he.breakpoints.up("md")),l=Object(J.b)().user,i=Object(V.useState)(""),o=Object(qe.a)(i,2),s=o[0],c=o[1],u=Object(K.useRecoilState)(ja),d=Object(qe.a)(u,2),m=d[0],p=d[1],g=Object(K.useRecoilState)(Oa),h=Object(qe.a)(g,2)[1],f=Object(V.useRef)(null),b=e.channelId,v=wt({variables:{user_id:l.sub,channel_id:b}}),_=Object(qe.a)(v,1)[0],E=gt(),y=Object(qe.a)(E,1)[0],j=function(){var n=Object(te.a)(ne.a.mark((function n(t){var a,r,i,o,u,d;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),s.trim()||m){n.next=3;break}return n.abrupt("return");case 3:return e.handleSetLastMessage({id:e.preLastMessageId+1,user:{username:l.nickname},user_id:l.sub,text:s,image:null===m||void 0===m||null===(a=m.images)||void 0===a||null===(r=a.fixed_width)||void 0===r?void 0:r.url,channel_id:b}),e.scrollToBottom(),d={variables:{message:{user_id:l.sub,text:s,image:null===m||void 0===m||null===(i=m.images)||void 0===i||null===(o=i.fixed_width)||void 0===o?void 0:o.url,channel_id:b}}},c(""),null===f||void 0===f||null===(u=f.current)||void 0===u||u.focus(),p(null),h(!1),n.next=12,y(d);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return G.a.createElement(ve.a,{className:a.root},G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",className:a.giphyImage},m&&G.a.createElement("img",{className:a.image,alt:"Giphy",src:null===m||void 0===m||null===(n=m.images)||void 0===n||null===(t=n.fixed_width)||void 0===t?void 0:t.url,onClick:function(){return p(null)}})),G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:a.form,onSubmit:j},G.a.createElement(Xa.a,{value:s,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&_(),c(e)}(e.target.value)},focused:!0,inputRef:f,inputProps:{maxLength:2e3},size:function(){switch(r){case!0:return"medium";case!1:default:return"small"}}(),variant:"outlined",multiline:!0,rows:1,color:"primary",autoComplete:"off",id:"chat-message-input",label:G.a.createElement(yl,null),onKeyPress:function(e){"Enter"===e.key&&j(e)},InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{id:"message_submit",type:"submit",color:"secondary","aria-label":"Send message"},G.a.createElement(El.a,null))),classes:{input:a.messageInput}},InputLabelProps:{className:a.messageInput}})))},Yl=t(366),Kl=Object(fe.a)((function(e){var n;return{root:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:"1",maxHeight:"90vh",height:"90vh"},messageInput:(n={position:"fixed",bottom:0,padding:e.spacing(2),background:e.palette.background.default,zIndex:1e3},Object(ue.a)(n,e.breakpoints.up("md"),{width:"75vw"}),Object(ue.a)(n,e.breakpoints.up("lg"),{width:"75vw"}),Object(ue.a)(n,e.breakpoints.down("sm"),{width:"100vw"}),n),polling:{position:"fixed",overflow:"hidden",flex:1}}})),Xl=function(e){var n,t,a=e.channelId,r=Kl(),l=Object(V.useState)(20),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(V.useState)(null),u=Object(qe.a)(c,2),d=u[0],m=u[1],p=Object(V.useState)(null),g=Object(qe.a)(p,2),h=g[0],f=g[1],b=Object(V.useState)(!0),v=Object(qe.a)(b,2),_=v[0],E=v[1],y=Object(V.useState)(!1),j=Object(qe.a)(y,2),O=j[0],w=j[1],x=Object(J.b)().user,I=0,C=Object(de.h)().channel,k=(n={variables:{channelId:a,limit:o},fetchPolicy:"network-only"},le.useSubscription(Wt,n)),S=k.data,q=k.loading,T=k.error,$=It(),N=Object(qe.a)($,1)[0],M=Object(V.useCallback)((function(){"object"===typeof h&&setTimeout((function(){var e;null===h||void 0===h||null===(e=h.current)||void 0===e||e.scrollIntoView()}),200)}),[h]),A=Object(V.useCallback)(Yl.debounce((function(){w(!1)}),1e4),[]);if(Object(V.useEffect)((function(){var e,n;(null===S||void 0===S||null===(e=S.messages[0])||void 0===e?void 0:e.id)&&N({variables:{channel_id:a,message_id:null===S||void 0===S||null===(n=S.messages[0])||void 0===n?void 0:n.id,user_id:x.sub}}),setTimeout((function(){var e;(_&&S&&(null===S||void 0===S||null===(e=S.messages)||void 0===e?void 0:e.length)>5||S&&!O)&&(M(),E(!1))}),1e3)}),[S,a,x.sub,_,M,N,O,h]),T&&va("Messages could not be loaded.",T),q)return G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",style:{height:"100vh"}},G.a.createElement(ve.a,null,G.a.createElement(Ie,null),G.a.createElement(Se.a,{color:"secondary",style:{marginTop:"8px"}})));S&&(I=null===S||void 0===S||null===(t=S.messages[0])||void 0===t?void 0:t.id);return G.a.createElement(ve.a,{display:"flex",flexDirection:"column"},G.a.createElement(Vr,{channelName:C,user:x.sub,showAddUserButton:!0}),G.a.createElement(ve.a,{className:r.root,component:"article"},G.a.createElement(Vl,{messages:null===S||void 0===S?void 0:S.messages,lastMessage:d,preLastMessageId:I,user:x,handleIncreaseLimit:function(){s(o+20),A.cancel()},limit:o,setRef:f,setDoScroll:w,delayAfterScrolling:A})),G.a.createElement(ve.a,{className:r.messageInput,component:"footer"},G.a.createElement(bl,null,G.a.createElement(Hl,{channelId:a,handleSetLastMessage:function(e){m(e)},preLastMessageId:I,scrollToBottom:M}))))},Jl=function(){var e,n=Object(K.useRecoilState)(Ea),t=Object(qe.a)(n,2),a=t[0],r=t[1],l=Object(J.b)(),i=l.isAuthenticated,o=l.isLoading,s=l.error,c=Object(de.h)().channel,u=(e={variables:{name:c}},le.useQuery(Ut,e)),d=u.data,m=u.loading,p=u.error;return o||m?G.a.createElement(Ze,null):((!a&&void 0!==(null===d||void 0===d?void 0:d.channel[0])||a&&a.name!==c&&void 0!==(null===d||void 0===d?void 0:d.channel[0]))&&r(null===d||void 0===d?void 0:d.channel[0]),s||p?(va("Error in ChatApp component",s,p),G.a.createElement(Sa.a,{severity:"error"},"Error in ChatApp component")):G.a.createElement(G.a.Fragment,null,i&&a&&G.a.createElement(Xl,{channelId:null===a||void 0===a?void 0:a.id})))},Zl=Object(fe.a)((function(){return{chatApp:{height:"100vh",overflowY:"hidden"}}})),ei=function(){var e=Zl();return G.a.createElement(Ee.a,{item:!0,xs:12,md:9,className:e.chatApp,component:"section"},G.a.createElement(Jl,null))},ni=function(){var e=Object(J.b)().user,n=_t({variables:{user_id:null===e||void 0===e?void 0:e.sub}}),t=Object(qe.a)(n,1)[0];return Object(V.useEffect)((function(){var n=setInterval((function(){void 0!==(null===e||void 0===e?void 0:e.sub)&&t()}),7e3);return function(){clearInterval(n)}}),[t,e]),G.a.createElement(ei,null)},ti=t(425),ai=t(426),ri=t(427),li=t(428),ii=t(429),oi=t(430),si=Object(fe.a)((function(e){return{root:{overflowY:"scroll",height:"100vh"}}})),ci=function(){var e,n=si(),t=(e={variables:{}},le.useQuery(zt,e)),a=t.data,r=t.loading,l=t.error;return r?G.a.createElement(Je.a,null):l?(va("Users could not be loaded.",l),G.a.createElement(Sa.a,{severity:"error"},"Users could not be loaded.")):G.a.createElement(ve.a,{className:n.root},G.a.createElement("h2",null,"Userlist"),G.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore, quos sunt magni natus suscipit nesciunt. Nostrum voluptatum suscipit assumenda officia in! Incidunt similique a adipisci facere neque, cum nesciunt reprehenderit."),a&&G.a.createElement(ti.a,{component:Mr.a},G.a.createElement(ai.a,{"aria-label":"simple table"},G.a.createElement(ri.a,null,G.a.createElement(li.a,null,G.a.createElement(ii.a,null,"Avatar"),G.a.createElement(ii.a,null,"Username"),G.a.createElement(ii.a,{align:"right"},"UserId"),G.a.createElement(ii.a,{align:"left"},"Auth0"),G.a.createElement(ii.a,{align:"left"},"Last seen"))),a.users.map((function(e){return G.a.createElement(oi.a,null,G.a.createElement(li.a,{key:e.id},G.a.createElement(ii.a,null,G.a.createElement(we.a,{alt:e.username,src:"https://api.adorable.io/avatars/173/abott@adorable.png"})),G.a.createElement(ii.a,{component:"th",scope:"row"},G.a.createElement(ye.a,{variant:"body2"},e.username)),G.a.createElement(ii.a,{align:"right"},G.a.createElement(ye.a,{variant:"caption"},e.id)),G.a.createElement(ii.a,{align:"left"},G.a.createElement(ye.a,{variant:"body2"},e.auth0_user_id)),G.a.createElement(ii.a,{align:"left"},e.last_seen?e.last_seen:"Has not logged in yet.")))})))))},ui=t(448),di=t(431),mi=t(432),pi=t(433),gi=t(434),hi=t(245),fi=t.n(hi),bi=t(112),vi=t.n(bi),_i=function(e){var n,t=e.questionId,a=e.setActiveState,r=(n={variables:{pollQuestionId:t}},le.useMutation(Pt,n)),l=Object(qe.a)(r,2),i=l[0],o=l[1].error,s=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i({variables:{pollQuestionId:n}});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o&&va("Error on delete question",o),G.a.createElement(G.a.Fragment,null,!0===a?G.a.createElement(je.a,{size:"small",color:"secondary",disabled:!0,startIcon:G.a.createElement(vi.a,null)},"Delete"):G.a.createElement(je.a,{size:"small",color:"secondary",onClick:function(){s(t)},"aria-label":"Delete Question",startIcon:G.a.createElement(vi.a,null)},"Delete"))},Ei=function(e){var n,t=e.questionId,a=e.questionLocked,r=G.a.useState(t),l=Object(qe.a)(r,2),i=l[0],o=l[1],s=Object(K.useRecoilValue)(ya),c=Object(V.useState)(""),u=Object(qe.a)(c,1)[0],d=ha(),m=d.data,p=d.loading,g=d.error,h=le.useMutation(Nt,n),f=Object(qe.a)(h,1)[0],b=function(e){return le.useMutation(Dt,e)}({variables:{pollQuestionId:s,channelId:parseInt(u)}}),v=Object(qe.a)(b,2),_=v[0],E=v[1].error;if(Object(V.useEffect)((function(){o(t)}),[t,i]),p)return G.a.createElement(ve.a,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(Ze,null));(g||E)&&va("error on delete question from channel",g,E);var y=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({variables:{channelID:n,pollQuestionID:s}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_({variables:{pollQuestionId:s,channelId:n}});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column",pb:1},null===m||void 0===m?void 0:m.channel.sort((function(e,n){return e.id-n.id})).map((function(e,n){var t,r,l,o,s,c,u,d,m,p,g,h,f;return G.a.createElement(ve.a,{key:n,display:"flex",justifyContent:"space-between",alignItems:"center"},G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",flex:1},G.a.createElement($e.a,{disabled:(null===(t=e.channel_polls[0])||void 0===t||null===(r=t.poll_question)||void 0===r?void 0:r.id)!==i&&void 0!==(null===(l=e.channel_polls[0])||void 0===l||null===(o=l.poll_question)||void 0===o?void 0:o.id)||!a,onClick:function(){return y(e.id)},onDelete:function(){j(e.id)},style:{marginTop:he.spacing(1),marginRight:he.spacing(1),maxWidth:150},variant:"outlined",size:"small",color:(null===(s=e.channel_polls[0])||void 0===s?void 0:s.channel_id)===e.id?"secondary":"primary",label:e.name}),G.a.createElement($e.a,{variant:(null===(c=e.channel_polls[0])||void 0===c||null===(u=c.poll_question)||void 0===u?void 0:u.text)?"default":"outlined",color:(null===(d=e.channel_polls[0])||void 0===d||null===(m=d.poll_question)||void 0===m?void 0:m.text)?"secondary":"primary",label:(null===(p=e.channel_polls[0])||void 0===p||null===(g=p.poll_question)||void 0===g?void 0:g.text)?null===(h=e.channel_polls[0])||void 0===h||null===(f=h.poll_question)||void 0===f?void 0:f.text:"No poll set.",size:"small",style:{marginTop:he.spacing(1),width:150,minWidth:100,maxWidth:150}})))}))))},yi=t(243),ji=t.n(yi),Oi=t(244),wi=t.n(Oi),xi=Object(fe.a)((function(e){return{lock:{color:e.palette.error.main},unlock:{color:e.palette.success.main}}})),Ii=function(e){var n,t=e.pollQuestionId,a=e.setActiveState,r=xi(),l=G.a.useState(a),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=(n={variables:{pollQuestionId:t,is_active:a}},le.useMutation(At,n)),u=Object(qe.a)(c,1)[0],d=da({variables:{pollQuestionId:t}}),m=d.data,p=d.loading;Object(V.useEffect)((function(){var e,n=null===m||void 0===m||null===(e=m.poll_answers)||void 0===e?void 0:e.length;s(!(n&&n>1))}),[o,m]);var g=function(){var e=Object(te.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{pollQuestionId:t,is_active:!a}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(je.a,{color:"secondary",disabled:o,startIcon:a?G.a.createElement(ji.a,{className:r.lock}):G.a.createElement(wi.a,{className:r.unlock}),onClick:g},a?"locked":"unlocked"))},Ci=Object(fe.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}},text:Object(ue.a)({marginLeft:e.spacing(2)},e.breakpoints.down("sm"),{fontSize:14,lineHeight:"15px"}),details:{alignItems:"flex-start"},voteIcon:{color:"grey"},voteIconPublished:{color:e.palette.primary.main}}})),ki=function(){var e,n=Ci(),t=(e={variables:{}},le.useSubscription(oa,e)),a=t.data,r=t.loading,l=t.error,i=Object(K.useRecoilState)(ya),o=Object(qe.a)(i,2)[1],s=ha().loading,c=function(e){o(e)};return r||s?G.a.createElement(Ze,null):(l&&va("GetPollQuestions Error",l),G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",style:{marginRight:he.spacing(2)}},G.a.createElement(ye.a,{variant:"h3",style:{padding:he.spacing(2)}},"Poll list overview:"),G.a.createElement($e.a,{variant:"outlined",size:"small",color:"secondary",label:"Total polls: "+(null===a||void 0===a?void 0:a.questions.length)})),0===(null===a||void 0===a?void 0:a.questions.length)?G.a.createElement(Sa.a,{severity:"info"},"Please add a new question."):null===a||void 0===a?void 0:a.questions.sort((function(e,n){return n.id-e.id})).map((function(e,t){return G.a.createElement(ui.a,{key:t,defaultExpanded:!1},G.a.createElement(di.a,{expandIcon:G.a.createElement(Aa.a,null),"aria-controls":e.text},(null===e||void 0===e?void 0:e.channel_polls.length)>0?G.a.createElement(Ye.a,{variant:"dot",badgeContent:e.id,classes:{badge:n.badge}},G.a.createElement(gr.a,{className:n.voteIconPublished})):G.a.createElement(gr.a,{className:n.voteIcon}),G.a.createElement(ye.a,{color:(null===e||void 0===e?void 0:e.channel_polls.length)>0?"secondary":"primary",component:X.b,onClick:function(){c(e.id)},to:{pathname:"/dashboard/pollings/edit/question/"+e.id,state:{fromDashboard:!0}},className:n.text},e.text)),G.a.createElement(mi.a,{className:n.details},G.a.createElement("div",{onMouseEnter:function(){c(e.id)}},G.a.createElement(G.a.Fragment,null,G.a.createElement(ye.a,{variant:"caption"},"Where you want to publish this poll? Orange colored channels has an active poll."),G.a.createElement(Ei,{questionId:e.id,questionLocked:e.is_active})))),G.a.createElement(pi.a,null,G.a.createElement(gi.a,{disableElevation:!0,variant:"outlined"},G.a.createElement(je.a,{color:"secondary",component:X.b,to:"/dashboard/pollings/edit/question/".concat(e.id),"aria-label":"Poll Question",size:"small",startIcon:G.a.createElement(fi.a,null)},"Edit"),G.a.createElement(Ii,{pollQuestionId:e.id,setActiveState:e.is_active}),G.a.createElement(_i,{questionId:e.id,setActiveState:e.is_active}))))}))))},Si=t(374),qi=Object(fe.a)((function(e){var n;return{root:{padding:e.spacing(2)},form:{},messageInput:{floatingLabelFocusStyle:{color:e.palette.secondary.dark}},messageButton:(n={},Object(ue.a)(n,e.breakpoints.down("md"),{width:"100%",size:"small"}),Object(ue.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(ue.a)(n,"marginTop",e.spacing(2)),Object(ue.a)(n,"marginLeft",e.spacing(0)),Object(ue.a)(n,"backgroundColor",e.palette.primary.dark),n)}})),Ti=function(){var e,n=qi(),t=Object(J.b)().user,a=le.useMutation(Tt,e),r=Object(qe.a)(a,1)[0],l=G.a.useState({title:""}),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(V.useState)(!1),u=Object(qe.a)(c,2),d=u[0],m=u[1];Object(V.useEffect)((function(){!0===d&&setTimeout((function(){o.title="",m(!1)}),1e3)}),[d,o]);var p=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==o.title&&o.title.trim()){e.next=7;break}return m(!0),o.title="",e.abrupt("return");case 7:m(!1);case 8:return e.next=10,r({variables:{text:o.title.trim(),owner_id:t.sub}});case 10:s({title:""});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{className:n.root},G.a.createElement(ye.a,{variant:"h2",style:{paddingBottom:he.spacing(2)}},"Add new poll"),G.a.createElement("form",{className:n.form,noValidate:!0,autoComplete:"off",onSubmit:p},G.a.createElement(Si.a,null,G.a.createElement(Xa.a,{error:d,id:"title",key:1,required:!0,value:o.title,onChange:function(e){return function(e){m(!1),s(Object(Z.a)({},o,Object(ue.a)({},e.target.id,e.target.value)))}(e)},size:"small",variant:"outlined",multiline:!0,rows:1,autoComplete:"off",placeholder:"Type your question here ...",onKeyPress:function(e){"Enter"===e.key&&p(e)},onFocus:function(){m(!1)},label:!0===d?"Error adding question":"Add an meaningfull question",fullWidth:!0,inputProps:{maxLength:200},InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{id:"message_submit",type:"submit",color:"secondary","aria-label":"Send message"},G.a.createElement(El.a,null))),classes:{input:n.messageInput}},InputLabelProps:{className:n.messageInput}})))))},$i=Object(fe.a)((function(e){return{divider:{marginTop:e.spacing(2)}}})),Ni=function(){var e=$i();return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ti,null),G.a.createElement(We.a,{className:e.divider}),G.a.createElement(ki,null))},Mi=function(e){var n=e.pollQuestionId;return Object(V.useEffect)((function(){}),[n]),G.a.createElement(G.a.Fragment,null,G.a.createElement($e.a,{color:"secondary",size:"small",variant:"outlined",label:"Poll question id: "+n}))},Ai=t(151),Pi=t.n(Ai),Di=function(e){var n,t=e.answerId,a=e.setActiveState,r=(n={variables:{pollAnswerId:t}},le.useMutation(Ft,n)),l=Object(qe.a)(r,1)[0];Object(V.useEffect)((function(){}),[t,a]);var i=function(){var e=Object(te.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{pollAnswerId:n}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(Te.a,{id:"answer_update",type:"submit",color:"secondary","aria-label":"Update answer text",disabled:a,onClick:function(){i(t)}},G.a.createElement(vi.a,null)))},Li=Object(fe.a)((function(e){return{messageInput:Object(ue.a)({floatingLabelFocusStyle:{color:e.palette.secondary.dark}},e.breakpoints.down("sm"),{fontSize:14})}})),Fi=function(e){var n,t=e.pollQuestionId,a=Li(),r=G.a.useState(!0),l=Object(qe.a)(r,2),i=l[0],o=l[1],s=G.a.useState(0),c=Object(qe.a)(s,2),u=c[0],d=c[1],m=Object(V.useState)({}),p=Object(qe.a)(m,2),g=p[0],h=p[1],f=G.a.useState({text:""}),b=Object(qe.a)(f,2),v=b[0],_=b[1],E=ca({variables:{pollQuestionId:t}}),y=da({variables:{pollQuestionId:t}}),j=y.data,O=y.loading,w=(n={variables:{text:v.text,pollAnswerId:u}},le.useMutation(Lt,n)),x=Object(qe.a)(w,1)[0],I=function(e){if(d(e),""===v.text||!v.text.trim())return o(!1),h(Object(ue.a)({},e,!0)),void(v.text="");h(Object(ue.a)({},e,!1)),x({variables:{text:Object.values(v)[0],pollAnswerId:e}}),v.text="",o(!0)};return E.loading||O?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"flex-start",alignItems:"center"},G.a.createElement(ye.a,{variant:"h3"},"Answers to these question"),G.a.createElement($e.a,{variant:"outlined",size:"small",color:"primary",label:"Total answers: "+(null===j||void 0===j?void 0:j.poll_answers.length),style:{marginLeft:"16px"}})),0===(null===j||void 0===j?void 0:j.poll_answers.length)?G.a.createElement(Sa.a,{severity:"info"},"Please add at least two answers to the poll."):null===j||void 0===j?void 0:j.poll_answers.sort((function(e,n){return e.id-n.id})).map((function(e){var n,t;return G.a.createElement(Si.a,{row:!0,key:e.id},G.a.createElement(Xa.a,{id:String(e.id),error:g[e.id],key:e.id,name:e.text+e.id,required:!0,disabled:null===E||void 0===E||null===(n=E.data)||void 0===n?void 0:n.poll_question[0].is_active,onKeyPress:function(n){"Enter"===n.key&&(I(e.id),v.text="")},onChange:function(n){!function(e,n){var t=(null===n||void 0===n?void 0:n.target.value.trim())||"";_({text:t}),o(!1)}(null===e||void 0===e||e.id,n),d(e.id)},onFocus:function(n){h(Object(ue.a)({},e.id,!1)),v.text=""},onBlur:function(){h(Object(ue.a)({},e.id,!1))},onMouseOut:function(){h(Object(ue.a)({},e.id,!1))},rows:1,size:"small",variant:"outlined",autoComplete:"off",placeholder:e.text,label:e.text,fullWidth:!0,margin:"dense",inputProps:{maxLength:250},InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{key:e.id,type:"submit",color:"secondary","aria-label":"update_answer_text",onClick:function(){I(e.id)},disabled:e.id!==u||!0===i},G.a.createElement(Pi.a,null)),G.a.createElement(Di,{answerId:e.id,setActiveState:!(!(null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.poll_question[0].is_active)&&0===e.votes)}),G.a.createElement(Ye.a,{badgeContent:e.votes?e.votes:0,color:"secondary"},G.a.createElement(gr.a,{color:"primary"}))),classes:{input:a.messageInput}},InputLabelProps:{shrink:!0,className:a.messageInput}}))})))},Bi=Object(fe.a)((function(e){return{divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},form:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},messageInput:Object(ue.a)({floatingLabelFocusStyle:{color:e.palette.secondary.dark}},e.breakpoints.down("sm"),{fontSize:14})}})),Qi=function(e){var n=e.pollQuestion,t=e.pollQuestionId,a=e.pollQuestionDisabled,r=Bi(),l=Object(V.useState)(n),i=Object(qe.a)(l,2),o=i[0],s=i[1],c=Object(V.useState)(!0),u=Object(qe.a)(c,2),d=u[0],m=u[1],p=Object(V.useState)(!1),g=Object(qe.a)(p,2),h=g[0],f=g[1];Object(V.useEffect)((function(){!0===h&&setTimeout((function(){s(""),f(!1)}),1e3)}),[h,o]);var b,v=(b={variables:{pollQuestionId:t,text:o.trim()}},le.useMutation(Qt,b)),_=Object(qe.a)(v,2),E=_[0],y=_[1],j=y.loading,O=y.error,w=function(){var e=Object(te.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.trim()&&""!==o){e.next=6;break}return f(!0),s(""),e.abrupt("return");case 6:f(!1);case 7:return e.next=9,E({variables:{pollQuestionId:t,text:o}});case 9:s("");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j||O?G.a.createElement(Ze,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(ye.a,{variant:"h2",style:{minHeight:"2rem"}},n),G.a.createElement(Si.a,{row:!0,className:r.form},G.a.createElement(Xa.a,{error:h,key:t,name:"poll_answer",value:o,required:!0,id:"outlined-multiline-static",label:!0===h?"Error update question title":"Update poll question",multiline:!0,rows:1,size:"small",variant:"outlined",autoComplete:"off",placeholder:o,disabled:a,fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&w()},onChange:function(e){!function(e){s(null===e||void 0===e?void 0:e.target.value),m(!1)}(e)},onBlur:function(){f(!1)},onMouseOut:function(){f(!1)},inputProps:{maxLength:500},InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{key:t,id:"question_update",type:"submit",color:"secondary","aria-label":"Update question",disabled:a||d,onClick:w},G.a.createElement(Pi.a,null))),classes:{input:r.messageInput}},InputLabelProps:{className:r.messageInput}})),G.a.createElement(We.a,{className:r.divider}))},zi=Object(fe.a)((function(e){var n;return{root:{padding:e.spacing(2),marginTop:e.spacing(5)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},form:{},messageInput:Object(ue.a)({floatingLabelFocusStyle:{color:e.palette.secondary.dark}},e.breakpoints.down("sm"),{fontSize:14}),messageButton:(n={},Object(ue.a)(n,e.breakpoints.down("md"),{width:"100%",size:"small"}),Object(ue.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(ue.a)(n,"marginTop",e.spacing(2)),Object(ue.a)(n,"marginLeft",e.spacing(0)),Object(ue.a)(n,"backgroundColor",e.palette.primary.dark),n)}})),Ui=function(){var e,n,t,a,r,l,i,o,s,c,u,d,m,p,g,h=zi(),f=G.a.useState({text:""}),b=Object(qe.a)(f,2),v=b[0],_=b[1],E=G.a.useState(0),y=Object(qe.a)(E,2)[1],j=Object(de.h)().question,O=Object(V.useState)(!1),w=Object(qe.a)(O,2),x=w[0],I=w[1],C=ca({variables:{pollQuestionId:parseInt(j)}}),k=le.useMutation($t,g),S=Object(qe.a)(k,1)[0];Object(V.useEffect)((function(){!0===x&&setTimeout((function(){_({text:""}),I(!1)}),1e3)}),[x,v]);var q=function(e){if(e.preventDefault(),!v.text.trim()||""===v.text)return I(!0),void(v.text="");I(!1),S({variables:{text:v.text.trim(),pollQuestionId:parseInt(j)}}),_({text:""})};return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{className:h.root},G.a.createElement(Mi,{pollQuestionId:parseInt(j)}),G.a.createElement(Qi,{pollQuestion:(null===C||void 0===C||null===(e=C.data)||void 0===e||null===(n=e.poll_question[0])||void 0===n?void 0:n.text)?null===C||void 0===C||null===(t=C.data)||void 0===t||null===(a=t.poll_question[0])||void 0===a?void 0:a.text:"",pollQuestionId:parseInt(j),pollQuestionDisabled:!!(null===C||void 0===C||null===(r=C.data)||void 0===r||null===(l=r.poll_question[0])||void 0===l?void 0:l.is_active)}),G.a.createElement("form",{className:h.form,noValidate:!0,autoComplete:"off",onSubmit:q},G.a.createElement(Si.a,{row:!0},G.a.createElement(Xa.a,{error:x,value:v.text,key:null===C||void 0===C||null===(i=C.data)||void 0===i||null===(o=i.poll_question[0])||void 0===o?void 0:o.id,name:"poll_answer",required:!0,id:"outlined-multiline-static",label:!0===x?"Error adding answer":"Add an answer to these question",multiline:!0,rows:1,size:"small",variant:"outlined",autoComplete:"off",placeholder:"Type your answers here ...",disabled:null===C||void 0===C||null===(s=C.data)||void 0===s||null===(c=s.poll_question[0])||void 0===c?void 0:c.is_active,onKeyPress:function(e){"Enter"===e.key&&q(e)},onFocus:function(){I(!1)},onBlur:function(){I(!1)},onMouseOut:function(){I(!1)},onChange:function(e){var n,t;return function(e,n){var t=(null===n||void 0===n?void 0:n.target.value)||"",a=(null===n||void 0===n?void 0:n.target.id)||"";void 0!==a&&void 0!==t&&(y(parseInt(a)),_({text:t}))}(null===C||void 0===C||null===(n=C.data)||void 0===n||null===(t=n.poll_question[0])||void 0===t||t.id,e)},fullWidth:!0,inputProps:{maxLength:150},InputProps:{endAdornment:G.a.createElement(vl.a,{position:"end"},G.a.createElement(Te.a,{id:"message_submit",type:"submit",color:"secondary","aria-label":"Send message",disabled:null===C||void 0===C||null===(u=C.data)||void 0===u||null===(d=u.poll_question[0])||void 0===d?void 0:d.is_active},G.a.createElement(El.a,null))),classes:{input:h.messageInput}},InputLabelProps:{className:h.messageInput}}))),G.a.createElement(We.a,{className:h.divider}),G.a.createElement(Fi,{pollQuestionId:parseInt(j)}),G.a.createElement(We.a,{className:h.divider}),G.a.createElement(gi.a,{disableElevation:!0,variant:"outlined"},G.a.createElement(je.a,{color:"secondary",component:X.b,to:"/dashboard","aria-label":"back to dashboard",startIcon:G.a.createElement(Pe.a,null)},"Back"),G.a.createElement(Ii,{pollQuestionId:parseInt(j),setActiveState:!!(null===C||void 0===C||null===(m=C.data)||void 0===m||null===(p=m.poll_question[0])||void 0===p?void 0:p.is_active)}))))},Ri=Object(fe.a)((function(e){return{root:{overflowY:"scroll",maxHeight:"100vh",height:"100vh",padding:e.spacing(0)},article:{padding:e.spacing(0),paddingTop:e.spacing(8)}}})),Wi=function(){var e=Ri(),n=Object(J.b)(),t=n.user,a=n.isAuthenticated,r=sessionStorage.getItem(t.sub);return G.a.createElement(G.a.Fragment,null,a&&"admin"===r?G.a.createElement(G.a.Fragment,null,G.a.createElement(Ee.a,{item:!0,xs:12,md:9,component:"section",className:e.root},G.a.createElement(_r,{channelName:"Dashboard"}),G.a.createElement(ve.a,{component:"article",className:e.article},G.a.createElement(de.d,null,G.a.createElement(de.b,{exact:!0,path:"/dashboard/users",component:ci}),G.a.createElement(de.b,{exact:!0,path:"/dashboard",component:Ni}),G.a.createElement(de.b,{exact:!0,path:"/dashboard/pollings",component:Ni}),G.a.createElement(de.b,{exact:!0,path:"/dashboard/pollings/edit/question/:question",component:Ui}),G.a.createElement(de.b,{component:yr}))))):G.a.createElement(Ee.a,{item:!0,xs:12,md:9,component:"section",className:e.root},G.a.createElement(_r,{channelName:"No permission!"}),G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",style:{height:"100vh",padding:he.spacing(3)}},G.a.createElement(Sa.a,{severity:"warning"},"You have no permission to access this page! If you still need access, contact our administrator."))))},Vi=function(){var e=Object(J.b)().user,n=_t({variables:{user_id:null===e||void 0===e?void 0:e.sub}}),t=Object(qe.a)(n,1)[0];return Object(V.useEffect)((function(){var n=setInterval((function(){void 0!==(null===e||void 0===e?void 0:e.sub)&&t()}),7e3);return function(){clearInterval(n)}}),[t,e]),G.a.createElement(Wi,null)},Gi=Object(fe.a)((function(e){return{container:Object(ue.a)({maxHeight:"100vh",margin:0,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",overflowX:"hidden",height:"100vh"},e.breakpoints.down("md"),{overflowY:"hidden"}),sidebar:{overflowY:"hidden",minHeight:"50vh",display:"flex",alignItems:"flex-start"}}})),Hi=function(){var e=Object(J.b)(),n=e.isAuthenticated,t=e.isLoading,a=Gi(),r=Object(be.a)(he.breakpoints.up("md"));return t?G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",style:{height:"100vh",backgroundColor:he.palette.error.dark}},G.a.createElement(ve.a,null,G.a.createElement(Ie,null),G.a.createElement(Se.a,{color:"primary",style:{marginTop:"16px"}})))):G.a.createElement(me.a,{theme:he},G.a.createElement(pe.a,null),n?G.a.createElement(_e.a,{component:"main",disableGutters:!0,maxWidth:"xl",className:a.container},G.a.createElement(G.a.Fragment,null,!0===r&&G.a.createElement(Ee.a,{item:!0,xs:5,sm:4,md:3,className:a.sidebar,component:"nav"},G.a.createElement(br,{handleDrawerClose:function(){return!1},open:!1})),G.a.createElement(de.d,null,G.a.createElement(de.a,{exact:!0,from:"/",to:"/channel/general"}),G.a.createElement(de.a,{exact:!0,from:"/channel",to:"/channel/general"}),G.a.createElement(Or,{path:"/channel/:channel/thread/:messageId",component:Nl}),G.a.createElement(Or,{path:"/channel/threads",component:Nl}),G.a.createElement(Or,{path:"/channel/:channel",component:ni}),G.a.createElement(Or,{path:"/add-user-to-channel",component:ni}),G.a.createElement(Or,{path:"/addChannelMembers",component:Hr}),G.a.createElement(Or,{path:"/addDirectMessageChannelMembers",component:Xr}),G.a.createElement(Or,{path:"/dashboard",component:Vi}),G.a.createElement(de.b,{exact:!0,path:"/404-not-found",component:yr}),G.a.createElement(de.a,{to:"/404-not-found"})))):G.a.createElement(de.d,null,G.a.createElement(de.a,{exact:!0,from:"/channel",to:"/channel/general"}),G.a.createElement(Or,{path:"/channel/:channel",component:ni}),G.a.createElement(Or,{path:"/dashboard",component:Vi}),G.a.createElement(de.b,{path:"/",component:ke}),G.a.createElement(de.a,{to:"/"})))};Y.a.render(G.a.createElement(J.a,{domain:"tom-schall.eu.auth0.com",clientId:"5grQYQ4dnRzUJ8wbP0EfBt5WNCIkQr33",redirectUri:"https://chickenfest.ch/channel/general",onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},audience:"hasura"},G.a.createElement(X.a,null,G.a.createElement(K.RecoilRoot,null,G.a.createElement(ce,null,G.a.createElement(G.a.Fragment,null,G.a.createElement(Hi,null)))))),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.a9ebbe9d.chunk.js.map