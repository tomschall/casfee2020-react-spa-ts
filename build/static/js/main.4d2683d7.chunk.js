(this["webpackJsonpcasfee2020-react-spa-ts"]=this["webpackJsonpcasfee2020-react-spa-ts"]||[]).push([[0],{258:function(e,n,a){e.exports=a(364)},301:function(e,n,a){},364:function(e,n,a){"use strict";a.r(n);var t,r,i,l,o,s,c,u,d,m,p,g,h,f,b,v,_,E,y,j,O,w,x,I,k,C,S,q,T,$,N,M,A,B,P,D,z,L,F,R,Q,U,W,V=a(0),G=a.n(V),H=a(25),Y=a.n(H),X=a(21),K=a(34),J=a(17),Z=a(78),ee=a(13),ne=a.n(ee),ae=a(22),te=a(226),re=a(225),ie=a(7),le=a(221),oe=a(224),se=function(e){var n=e.children,a=Object(J.b)(),t=a.isAuthenticated,r=a.getAccessTokenSilently,i=function(){var e=Object(ae.a)(ne.a.mark((function e(){var n,a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!t){e.next=6;break}return e.next=4,r();case 4:a=e.sent,n.Authorization="Bearer ".concat(a);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Object(oe.a)(function(){var e=Object(ae.a)(ne.a.mark((function e(n,a){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.originalHeaders,e.t0=Z.a,e.t1={},e.t2=t,e.t3={},e.next=7,i();case 7:return e.t4=e.sent,e.t5=(0,e.t0)(e.t1,e.t2,e.t3,e.t4),e.abrupt("return",{headers:e.t5});case 10:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}()),o={uri:"wss://chickenchat.ch/v1/graphql",options:{reconnect:!0,lazy:!0,connectionParams:function(){var e=Object(ae.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return e.t0=e.sent,e.abrupt("return",{headers:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},s=Object(ie.createHttpLink)({uri:"https://chickenchat.ch/v1/graphql"}),c=new le.a(o),u=Object(ie.split)((function(e){var n=e.query,a=Object(re.a)(n),t=a.kind,r=a.operation;return"OperationDefinition"===t&&"subscription"===r}),c,l.concat(s)),d=new ie.InMemoryCache,m=new ie.ApolloClient({link:u,cache:d});return G.a.createElement(te.ApolloProvider,{client:m},n)},ce=(a(301),a(24)),ue=a(442),de=a(443),me=a(241),pe=Object(me.a)({palette:{common:{black:"#000000",white:"#f9cd8b"},type:"dark",background:{paper:"#070922",default:"#070922"},primary:{light:"#81D4FA",main:"#0288D1",dark:"rgba(255, 255, 255, .01)",contrastText:"#EF6C00"},secondary:{light:"#FFA726",main:"#f57c00",dark:"#EF6C00",contrastText:"#ffffff"},error:{light:"#E91E63",main:"#AD1457",dark:"#880E4F"},success:{light:"#0f5",main:"#0f0",dark:"#222"}},shape:{borderRadius:2},mixins:{toolbar:{}},spacing:0,props:{MuiCheckbox:{style:{fontSize:10}},MuiChip:{style:{padding:3}},MuiList:{style:{padding:0}},MuiListItemIcon:{style:{color:"#0288D1"}},MuiPaper:{draggable:!1,elevation:0,style:{overflow:"hidden"}},MuiAppBar:{style:{top:"auto",bottom:0}},MuiButton:{disableElevation:!1,color:"secondary",variant:"outlined",size:"small",disableFocusRipple:!1,disableTouchRipple:!1}},typography:{fontSize:14,body1:{fontSize:16,color:"#0288D1"},body2:{fontSize:16,fontWeight:500},button:{fontSize:12,fontWeight:400},h1:{fontWeight:700,fontSize:20,paddingBottom:16},h2:{fontWeight:700,fontSize:18,marginTop:16},h3:{fontWeight:700,fontSize:16,marginTop:16,marginBottom:16},h4:{fontWeight:700,fontSize:14,marginTop:16},h5:{fontWeight:700,fontSize:12,marginTop:16},h6:{fontWeight:700,fontSize:10,color:"#0288D1"}},overrides:{MuiCssBaseline:{"@global":{"*":{"scrollbar-width":"1rem"},"*::-webkit-scrollbar":{width:".5rem",height:"1rem"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.00)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"rgb(245 124 0)",borderRadius:0},a:{textDecoration:"none"}}},MuiPopover:{root:{background:"rgba(245, 122, 0, .7)"}},MuiBackdrop:{root:{backgroundColor:"rgba(0, 0, 0, .95)"}},MuiFab:{root:{borderRadius:0},primary:{color:"#fff",boxShadow:"none"},label:{}},MuiSpeedDial:{direction:"left",directionUp:{marginBottom:0},actions:{display:"unset",backgroundColor:"transparent"}},MuiSpeedDialAction:{fab:{backgroundColor:"transparent","&:hover":{borderRadius:3,padding:10}},staticTooltip:{},tooltipOpen:!0,tooltipPlacement:"top-end",tooltipPlacementLeft:{},staticTooltipLabel:{right:"100%",whiteSpace:"nowrap"}},MuiTableCell:{root:{borderBottom:"none"}},MuiInputBase:{root:{}},MuiList:{root:{"&:hover":{}}},MuiListItemIcon:{root:{"& :hover":{color:"#F57C00"}}},MuiContainer:{root:{padding:0,margin:0}},MuiListItemText:{root:{padding:0,margin:0,"& span":{padding:0,fontSize:".875rem"},"& h6":{fontSize:".857rem"},"& a":{color:"#fff"},"& a:hover":{color:"yellow"}}},MuiDivider:{root:{margin:10,opacity:.3}},MuiTypography:{},MuiButton:{contained:{boxShadow:"none"}},MuiIconButton:{root:{padding:"3px"}}}}),ge=a(445),he=a(410),fe=a(411),be=a(114),ve=a(407),_e=function(){var e=Object(J.b)().loginWithRedirect;return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{size:"large",variant:"contained",color:"secondary",onClick:function(){e()}},"Login"))},Ee=a(409),ye=Object(Ee.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100vh"},title:{fontSize:"2rem",fontWeight:700,textTransform:"uppercase",paddingTop:e.spacing(5)}}})),je=function(){var e=ye();return G.a.createElement(he.a,{maxWidth:"lg"},G.a.createElement(fe.a,{container:!0,className:e.root},G.a.createElement(fe.a,{item:!0},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement("img",{src:"/logo-chicken-chat.png",alt:"Chicken Chat"})),G.a.createElement(be.a,{className:e.title,variant:"h2"},"Welcome to Chicken Chat"),G.a.createElement(be.a,{color:"textPrimary",variant:"body1"},"Please register or login. Lets go an cackle your nonsense!")),G.a.createElement(fe.a,{item:!0},G.a.createElement(_e,null))))},Oe=a(427),we=Object(Ee.a)((function(e){return{root:{},toolbarIcon:Object(Z.a)({},e.mixins.toolbar)}})),xe=function(){var e=we();return G.a.createElement(ge.a,{className:e.root},G.a.createElement("h2",null,"Upppsss ....! Something went wrong!"))},Ie=a(242),ke=a(412),Ce=Object(Ee.a)((function(e){return{root:{display:"flex",justifyContent:"center",marginTop:e.spacing(0),width:"100%"}}})),Se=function(){Ce();return G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:1},G.a.createElement(ke.a,{color:"secondary",size:20,style:{margin:"10px"}}))},qe=function(e){var n=e.component,a=Object(Ie.a)(e,["component"]);return G.a.createElement(ce.b,Object.assign({component:Object(J.c)(n,{onRedirecting:function(){return G.a.createElement(G.a.Fragment,null,G.a.createElement(Se,null))}})},a))},Te=a(9),$e=a(446),Ne=a(415),Me=a(416),Ae=a(417),Be=a(418),Pe=a(14);function De(){var e=Object(Pe.a)(["\n    subscription watchCheckUserHasVoted($pollQuestionId: Int, $auth0UserId: String) {\n  user_votes(where: {poll_question_id: {_eq: $pollQuestionId}, auth0_user_id: {_eq: $auth0UserId}}) {\n    auth0_user_id\n    poll_question_id\n    poll_answer_id\n  }\n}\n    "]);return De=function(){return e},e}function ze(){var e=Object(Pe.a)(["\n    subscription watchChannelPollActiveState {\n  channel_poll {\n    id\n    channel {\n      name\n      channel_polls {\n        poll_question {\n          created_at\n        }\n      }\n    }\n  }\n}\n    "]);return ze=function(){return e},e}function Le(){var e=Object(Pe.a)(["\n    subscription watchChannelHasActivePoll($currentChannelId: Int!) {\n  poll_questions(where: {channel_polls: {channel_id: {_eq: $currentChannelId}}, _and: {is_active: {_eq: true}}}) {\n    id\n    text\n  }\n}\n    "]);return Le=function(){return e},e}function Fe(){var e=Object(Pe.a)(["\n    subscription watchGetChannels {\n  channel(where: {is_private: {_eq: false}}) {\n    id\n    name\n    channel_polls {\n      channel_id\n      poll_question {\n        id\n        text\n      }\n    }\n  }\n}\n    "]);return Fe=function(){return e},e}function Re(){var e=Object(Pe.a)(["\n    subscription getPollQuestionState($pollQuestionId: Int!) {\n  poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    is_active\n  }\n}\n    "]);return Re=function(){return e},e}function Qe(){var e=Object(Pe.a)(["\n    subscription watchPollAnswerVotes($pollAnswerId: Int!) {\n  pollAnswerVotes: poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    id\n    votes\n  }\n}\n    "]);return Qe=function(){return e},e}function Ue(){var e=Object(Pe.a)(["\n    subscription watchChannelPollQuestion($channelId: Int!) {\n  getChannelPoll: channel_poll(where: {channel_id: {_eq: $channelId}, poll_question: {is_active: {_eq: true}}}) {\n    id\n    poll_question {\n      id\n      text\n      poll_anwers(where: {poll_question: {channel_polls: {channel_id: {_eq: $channelId}}}}) {\n        text\n        votes\n        id\n      }\n    }\n  }\n}\n    "]);return Ue=function(){return e},e}function We(){var e=Object(Pe.a)(["\n    subscription watchGetPollAnswers($pollQuestionId: Int!) {\n  poll_answers: poll_anwers(where: {poll_question: {id: {_eq: $pollQuestionId}}}) {\n    question_id\n    text\n    id\n    votes\n  }\n}\n    "]);return We=function(){return e},e}function Ve(){var e=Object(Pe.a)(["\n    subscription watchGetPollQuestion($pollQuestionId: Int) {\n  poll_question: poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    id\n    text\n    is_active\n  }\n}\n    "]);return Ve=function(){return e},e}function Ge(){var e=Object(Pe.a)(["\n    subscription watchGetChannelPollQuestionPublishState {\n  getChannelPollQuestionPublishState: channel_poll {\n    channel_id\n    id\n    poll_questions\n    channel {\n      name\n    }\n    poll_question {\n      text\n      is_active\n    }\n  }\n}\n    "]);return Ge=function(){return e},e}function He(){var e=Object(Pe.a)(["\n    subscription WatchGetPollQuestions {\n  questions: poll_questions {\n    id\n    text\n    created_at\n    updated_at\n    owner_id\n    is_active\n    channel_polls {\n      channel {\n        name\n      }\n    }\n  }\n}\n    "]);return He=function(){return e},e}function Ye(){var e=Object(Pe.a)(["\n    subscription watchMessageCursor($channel_id: Int!, $user_id: String!) {\n  message_cursor(where: {user_id: {_eq: $user_id}, _and: {channel_id: {_eq: $channel_id}}}) {\n    channel_id\n    message_id\n    user_id\n  }\n}\n    "]);return Ye=function(){return e},e}function Xe(){var e=Object(Pe.a)(["\n    subscription watchChannelsLastMessageId($channel_type: channel_type_enum! = CHAT_MESSAGE) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}}, order_by: {name: asc, is_private: asc}) {\n    name\n    id\n    is_private\n    owner_id\n    messages(order_by: {id: desc}, limit: 1) {\n      id\n    }\n  }\n}\n    "]);return Xe=function(){return e},e}function Ke(){var e=Object(Pe.a)(["\n    subscription watchNewMessages($channelId: Int!) {\n  newMessages: message(order_by: {id: desc}, limit: 1, where: {channel: {id: {_eq: $channelId}}}) {\n    id\n    text\n    timestamp\n    user {\n      username\n    }\n  }\n}\n    "]);return Ke=function(){return e},e}function Je(){var e=Object(Pe.a)(["\n    subscription getUserIsTyping($self_id: String!, $channel_id: Int!) {\n  user_typing(where: {auth0_user_id: {_neq: $self_id}, _and: {last_typed_channel: {_eq: $channel_id}}}, limit: 1, order_by: {last_typed: desc}) {\n    last_typed\n    username\n  }\n}\n    "]);return Je=function(){return e},e}function Ze(){var e=Object(Pe.a)(["\n    subscription watchUsersWhoHaveSubscribedToDirectMessageChannel($user_id: String!) {\n  user(where: {auth0_user_id: {_neq: $user_id}}, order_by: {username: asc}) {\n    auth0_user_id\n    username\n    user_channels(where: {channel: {channel_type: {_eq: DIRECT_MESSAGE}}}) {\n      channel_id\n      channel {\n        name\n        user_channels(where: {user: {auth0_user_id: {_eq: $user_id}}}) {\n          user {\n            auth0_user_id\n            username\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return Ze=function(){return e},e}function en(){var e=Object(Pe.a)(["\n    subscription watchUsersWhoHaveNotSubscribedToChannel($user_id: String!, $channel_id: Int!) {\n  user(where: {_not: {user_channels: {channel_id: {_eq: $channel_id}}}, auth0_user_id: {_neq: $user_id}}, order_by: {username: asc}) {\n    auth0_user_id\n    username\n  }\n}\n    "]);return en=function(){return e},e}function nn(){var e=Object(Pe.a)(["\n    subscription watchUsers {\n  user(order_by: {username: asc}) {\n    username\n    auth0_user_id\n  }\n}\n    "]);return nn=function(){return e},e}function an(){var e=Object(Pe.a)(["\n    subscription watchDirectMessageChannels($channel_type: channel_type_enum!, $user_id: String) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}, _and: {user_channels: {user_id: {_eq: $user_id}}}}) {\n    name\n    id\n    is_private\n    owner_id\n    user_channels(where: {user_id: {_neq: $user_id}}) {\n      user {\n        username\n        auth0_user_id\n      }\n    }\n  }\n}\n    "]);return an=function(){return e},e}function tn(){var e=Object(Pe.a)(["\n    subscription watchChannels($channel_type: channel_type_enum!) {\n  channels: channel(where: {channel_type: {_eq: $channel_type}}, order_by: {name: asc, is_private: asc}) {\n    name\n    id\n    is_private\n    owner_id\n  }\n}\n    "]);return tn=function(){return e},e}function rn(){var e=Object(Pe.a)(["\n    subscription watchOnlineUsers {\n  users: user_online(order_by: {username: asc}) {\n    id\n    username\n    auth0_user_id\n  }\n}\n    "]);return rn=function(){return e},e}function ln(){var e=Object(Pe.a)(["\n    subscription watchThreads {\n  channel_thread(order_by: {id: desc}) {\n    id\n    message_id\n    message {\n      image\n      text\n      deleted\n      timestamp\n      id\n      user {\n        auth0_user_id\n        username\n      }\n      user_id\n      channel {\n        id\n        name\n      }\n    }\n    channel_thread_messages {\n      id\n      image\n      message\n      timestamp\n      user_id\n      user {\n        auth0_user_id\n        username\n      }\n    }\n  }\n}\n    "]);return ln=function(){return e},e}function on(){var e=Object(Pe.a)(["\n    subscription watchChannelThread($message_id: Int!) {\n  channel_thread_message(order_by: {id: desc}, where: {channel_thread: {message_id: {_eq: $message_id}}}) {\n    id\n    message\n    channel_thread_id\n    timestamp\n  }\n}\n    "]);return on=function(){return e},e}function sn(){var e=Object(Pe.a)(["\n    subscription watchChannelThreadMessages($limit: Int!, $message_id: Int!) {\n  channel_thread_message(limit: $limit, order_by: {id: desc}, where: {channel_thread: {message_id: {_eq: $message_id}}}) {\n    id\n    message\n    image\n    user {\n      username\n      id\n      auth0_user_id\n    }\n    channel_thread_id\n    timestamp\n  }\n}\n    "]);return sn=function(){return e},e}function cn(){var e=Object(Pe.a)(["\n    subscription watchMessages($channelId: Int!, $limit: Int) {\n  messages: message(order_by: {timestamp: desc}, limit: $limit, where: {channel: {id: {_eq: $channelId}}}) {\n    id\n    text\n    image\n    timestamp\n    deleted\n    user {\n      username\n      auth0_user_id\n    }\n    channel {\n      name\n    }\n  }\n}\n    "]);return cn=function(){return e},e}function un(){var e=Object(Pe.a)(["\n    query getPollAnswerVotes($pollAnswerId: Int!) {\n  poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    id\n    votes\n  }\n}\n    "]);return un=function(){return e},e}function dn(){var e=Object(Pe.a)(["\n    query getChannelPollQuestion($channelId: Int) {\n  getChannelPoll: channel_poll(where: {channel_id: {_eq: $channelId}, is_active: {_eq: true}}) {\n    id\n    poll_question {\n      id\n      text\n      poll_anwers(where: {poll_question: {}}) {\n        text\n        question_id\n      }\n    }\n  }\n}\n    "]);return dn=function(){return e},e}function mn(){var e=Object(Pe.a)(["\n    query getChannelPolls {\n  channelPoll: channel_poll {\n    channel_id\n    id\n    poll_questions\n  }\n}\n    "]);return mn=function(){return e},e}function pn(){var e=Object(Pe.a)(["\n    query getPublicChannels {\n  channels: channel(where: {is_private: {_neq: true}}) {\n    id\n    name\n    channel_polls(where: {poll_question: {is_active: {_eq: true}}}) {\n      poll_question {\n        is_active\n      }\n    }\n  }\n}\n    "]);return pn=function(){return e},e}function gn(){var e=Object(Pe.a)(["\n    query getPollQuestionAnswers($pollQuestionId: Int) {\n  poll_question: poll_questions(where: {id: {_eq: $pollQuestionId}}) {\n    id\n    text\n    is_active\n  }\n  poll_answers: poll_anwers(where: {poll_question: {id: {_eq: $pollQuestionId}}}) {\n    question_id\n    text\n    id\n    votes\n  }\n}\n    "]);return gn=function(){return e},e}function hn(){var e=Object(Pe.a)(["\n    query getPollQuestions {\n  questions: poll_questions {\n    id\n    owner_id\n    text\n  }\n}\n    "]);return hn=function(){return e},e}function fn(){var e=Object(Pe.a)(["\n    query getChannelThread($message_id: Int) {\n  channel_thread(where: {message_id: {_eq: $message_id}}) {\n    id\n    message {\n      id\n      image\n      text\n      deleted\n      timestamp\n      user {\n        auth0_user_id\n        id\n        username\n      }\n    }\n  }\n}\n    "]);return fn=function(){return e},e}function bn(){var e=Object(Pe.a)(["\n    query getChannelThreadParentMessage($limit: Int, $message_id: Int) {\n  channel_thread_message(limit: $limit, order_by: {id: asc}, where: {channel_thread: {message_id: {_eq: $message_id}}}) {\n    channel_thread_id\n    timestamp\n    channel_thread {\n      message {\n        text\n        timestamp\n        image\n        id\n        user_id\n        user {\n          auth0_user_id\n          username\n        }\n      }\n    }\n  }\n}\n    "]);return bn=function(){return e},e}function vn(){var e=Object(Pe.a)(["\n    query getChannelThreadId($message_id: Int) {\n  channel_thread(where: {message_id: {_eq: $message_id}}) {\n    id\n  }\n}\n    "]);return vn=function(){return e},e}function _n(){var e=Object(Pe.a)(["\n    query getAuth0UserById($user_id: String) {\n  user(where: {auth0_user_id: {_eq: $user_id}}) {\n    id\n    username\n    auth0_user_id\n    user_channels {\n      channel {\n        name\n        id\n        is_private\n      }\n    }\n  }\n}\n    "]);return _n=function(){return e},e}function En(){var e=Object(Pe.a)(["\n    query getChannelByName($name: String!) {\n  channel(where: {name: {_eq: $name}}) {\n    name\n    id\n    is_private\n    owner_id\n    channel_type\n  }\n}\n    "]);return En=function(){return e},e}function yn(){var e=Object(Pe.a)(["\n    query getUserList {\n  users: user {\n    username\n    id\n    auth0_user_id\n    last_seen\n  }\n}\n    "]);return yn=function(){return e},e}function jn(){var e=Object(Pe.a)(["\n    query getChannels {\n  channels: channel {\n    name\n    id\n    is_private\n    owner_id\n  }\n}\n    "]);return jn=function(){return e},e}function On(){var e=Object(Pe.a)(["\n    query getMessagesSum {\n  channel_aggregate(where: {channel_type: {_eq: CHAT_MESSAGE}}, order_by: {name: asc}) {\n    nodes {\n      messages(distinct_on: channel_id) {\n        channel_id\n        channel {\n          name\n        }\n      }\n      messages_aggregate {\n        aggregate {\n          count\n        }\n      }\n    }\n  }\n}\n    "]);return On=function(){return e},e}function wn(){var e=Object(Pe.a)(["\n    query getMessages($last_received_id: Int, $last_received_ts: timestamptz, $channel: String) {\n  channel(where: {name: {_eq: $channel}}) {\n    messages(order_by: {timestamp: asc}, where: {_and: {id: {_neq: $last_received_id}, timestamp: {_gte: $last_received_ts}}}) {\n      id\n      text\n      timestamp\n      user {\n        username\n      }\n      channel {\n        name\n      }\n      channel_threads {\n        id\n      }\n    }\n  }\n}\n    "]);return wn=function(){return e},e}function xn(){var e=Object(Pe.a)(["\n    mutation setUserVotePollQuestion($userName: String, $auth0UserId: String, $pollQuestionId: Int, $pollAnswerId: Int) {\n  insert_user_votes(objects: {username: $userName, auth0_user_id: $auth0UserId, poll_question_id: $pollQuestionId, poll_answer_id: $pollAnswerId}) {\n    affected_rows\n  }\n}\n    "]);return xn=function(){return e},e}function In(){var e=Object(Pe.a)(["\n    mutation deletePollAnswerId($pollAnswerId: Int!) {\n  delete_poll_anwers(where: {id: {_eq: $pollAnswerId}}) {\n    affected_rows\n  }\n}\n    "]);return In=function(){return e},e}function kn(){var e=Object(Pe.a)(["\n    mutation updatePollAnswerText($text: String!, $pollAnswerId: Int!) {\n  pollAnswerText: update_poll_anwers(where: {id: {_eq: $pollAnswerId}}, _set: {text: $text}) {\n    affected_rows\n    returning {\n      text\n    }\n  }\n}\n    "]);return kn=function(){return e},e}function Cn(){var e=Object(Pe.a)(["\n    mutation deletePollQuestionFromChannel($pollQuestionId: Int!, $channelId: Int!) {\n  delete_channel_poll(where: {poll_questions: {_eq: $pollQuestionId}, channel_id: {_eq: $channelId}}) {\n    affected_rows\n  }\n}\n    "]);return Cn=function(){return e},e}function Sn(){var e=Object(Pe.a)(["\n    mutation deletePollQuestion($pollQuestionId: Int!) {\n  delete_poll_anwers(where: {question_id: {_eq: $pollQuestionId}}) {\n    affected_rows\n  }\n  deletePollQuestion: delete_poll_questions(where: {id: {_eq: $pollQuestionId}, is_active: {_neq: true}}) {\n    affected_rows\n  }\n}\n    "]);return Sn=function(){return e},e}function qn(){var e=Object(Pe.a)(["\n    mutation setPublishPollQuestionState($pollQuestionId: Int!, $is_active: Boolean = false) {\n  setPollQuestionState: update_poll_questions(where: {id: {_eq: $pollQuestionId}}, _set: {is_active: $is_active}) {\n    affected_rows\n    returning {\n      is_active\n    }\n  }\n}\n    "]);return qn=function(){return e},e}function Tn(){var e=Object(Pe.a)(["\n    mutation setPollAnswerVote($pollAnswerId: Int!, $newVote: Int!) {\n  updatePollAnswer: update_poll_anwers(where: {id: {_eq: $pollAnswerId}}, _set: {votes: $newVote}) {\n    affected_rows\n    returning {\n      votes\n    }\n  }\n}\n    "]);return Tn=function(){return e},e}function $n(){var e=Object(Pe.a)(["\n    mutation addPublishPollQuestionToChannel($channelID: Int!, $pollQuestionID: Int!) {\n  channelPoll: insert_channel_poll(objects: {channel_id: $channelID, poll_questions: $pollQuestionID, id: $channelID}, on_conflict: {constraint: channel_poll_pkey, update_columns: poll_questions, where: {id: {_eq: $channelID}}}) {\n    affected_rows\n    returning {\n      channel_id\n      id\n      poll_questions\n    }\n  }\n}\n    "]);return $n=function(){return e},e}function Nn(){var e=Object(Pe.a)(["\n    mutation addAnswerToQuestion($text: String!, $pollQuestionId: Int!) {\n  insert_poll_anwers(objects: {question_id: $pollQuestionId, text: $text}) {\n    affected_rows\n  }\n}\n    "]);return Nn=function(){return e},e}function Mn(){var e=Object(Pe.a)(["\n    mutation addPollQuestion($text: String, $owner_id: String) {\n  insert_poll_questions(objects: {text: $text, owner_id: $owner_id}) {\n    affected_rows\n  }\n}\n    "]);return Mn=function(){return e},e}function An(){var e=Object(Pe.a)(["\n    mutation insertChannelThread($message_id: Int!) {\n  insert_channel_thread(objects: {message_id: $message_id}) {\n    returning {\n      message {\n        image\n        text\n        timestamp\n        id\n        user {\n          auth0_user_id\n          id\n          username\n        }\n      }\n    }\n  }\n}\n    "]);return An=function(){return e},e}function Bn(){var e=Object(Pe.a)(["\n    mutation deleteThreadMessage($message_id: Int!) {\n  delete_channel_thread_message(where: {id: {_eq: $message_id}}) {\n    affected_rows\n  }\n}\n    "]);return Bn=function(){return e},e}function Pn(){var e=Object(Pe.a)(["\n    mutation insertChannelThreadMessage($channel_thread_id: Int!, $message: String!, $user_id: String!, $image: String) {\n  insert_channel_thread_message(objects: {user_id: $user_id, channel_thread_id: $channel_thread_id, message: $message, image: $image}) {\n    affected_rows\n    returning {\n      id\n      image\n      message\n      timestamp\n      user_id\n      user {\n        auth0_user_id\n        username\n      }\n    }\n  }\n}\n    "]);return Pn=function(){return e},e}function Dn(){var e=Object(Pe.a)(["\n    mutation upsertMessageCursor($channel_id: Int!, $message_id: Int!, $user_id: String!) {\n  insert_message_cursor(objects: {channel_id: $channel_id, message_id: $message_id, user_id: $user_id}, on_conflict: {constraint: message_cursor_channel_id_user_id_key, update_columns: message_id}) {\n    returning {\n      channel_id\n      message_id\n      user_id\n    }\n  }\n}\n    "]);return Dn=function(){return e},e}function zn(){var e=Object(Pe.a)(['\n    mutation sendTypingEvent($user_id: String!, $channel_id: Int!) {\n  update_user(_set: {last_typed: "now()", last_typed_channel: $channel_id}, where: {auth0_user_id: {_eq: $user_id}}) {\n    affected_rows\n  }\n}\n    ']);return zn=function(){return e},e}function Ln(){var e=Object(Pe.a)(["\n    mutation addChannelUser($channel_id: Int!, $user_id: String!) {\n  addChannelUser(user_id: $user_id, channel_id: $channel_id) {\n    affected_rows\n  }\n}\n    "]);return Ln=function(){return e},e}function Fn(){var e=Object(Pe.a)(["\n    mutation validateAndAddDirectMessageChannel($name: String!, $user_id1: String!, $user_id2: String!) {\n  validateAndAddDirectMessageChannel(name: $name, user_id1: $user_id1, user_id2: $user_id2) {\n    id\n    name\n  }\n}\n    "]);return Fn=function(){return e},e}function Rn(){var e=Object(Pe.a)(["\n    mutation addChannel($channel: channel_insert_input!) {\n  insert_channel(objects: [$channel]) {\n    returning {\n      id\n      name\n      owner_id\n      is_private\n    }\n  }\n}\n    "]);return Rn=function(){return e},e}function Qn(){var e=Object(Pe.a)(['\n    mutation setUserOnline($user_id: String!) {\n  update_user(_set: {last_seen: "now()"}, where: {auth0_user_id: {_eq: $user_id}}) {\n    affected_rows\n  }\n}\n    ']);return Qn=function(){return e},e}function Un(){var e=Object(Pe.a)(["\n    mutation deleteMessage($message_id: Int) {\n  delete_message(where: {id: {_eq: $message_id}}) {\n    affected_rows\n  }\n}\n    "]);return Un=function(){return e},e}function Wn(){var e=Object(Pe.a)(["\n    mutation updateMessage($_eq: Int!, $text: String!, $deleted: Boolean = false) {\n  update_message(where: {id: {_eq: $_eq}}, _set: {text: $text, deleted: $deleted}) {\n    affected_rows\n  }\n}\n    "]);return Wn=function(){return e},e}function Vn(){var e=Object(Pe.a)(["\n    mutation insertMessage($message: message_insert_input!) {\n  insert_message(objects: [$message]) {\n    returning {\n      id\n      timestamp\n      text\n      user {\n        username\n      }\n      channel {\n        name\n      }\n    }\n  }\n}\n    "]);return Vn=function(){return e},e}!function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(t||(t={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(r||(r={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(i||(i={})),function(e){e.ChannelNameKey="channel_name_key",e.ChannelPkey="channel_pkey"}(l||(l={})),function(e){e.ChannelPollPkey="channel_poll_pkey"}(o||(o={})),function(e){e.ChannelId="channel_id",e.Id="id",e.IsActive="is_active",e.PollQuestions="poll_questions"}(s||(s={})),function(e){e.ChannelId="channel_id",e.Id="id",e.IsActive="is_active",e.PollQuestions="poll_questions"}(c||(c={})),function(e){e.ChannelType="channel_type",e.Id="id",e.IsPrivate="is_private",e.Name="name",e.OwnerId="owner_id"}(u||(u={})),function(e){e.ChannelThreadMessageIdKey="channel_thread_message_id_key",e.ChannelThreadPkey="channel_thread_pkey"}(d||(d={})),function(e){e.ChannelThreadMessagePkey="channel_thread_message_pkey"}(m||(m={})),function(e){e.ChannelThreadId="channel_thread_id",e.Id="id",e.Image="image",e.Message="message",e.Timestamp="timestamp",e.UserId="user_id"}(p||(p={})),function(e){e.ChannelThreadId="channel_thread_id",e.Id="id",e.Image="image",e.Message="message",e.Timestamp="timestamp",e.UserId="user_id"}(g||(g={})),function(e){e.Id="id",e.MessageId="message_id"}(h||(h={})),function(e){e.Id="id",e.MessageId="message_id"}(f||(f={})),function(e){e.ChannelTypePkey="channel_type_pkey"}(b||(b={})),function(e){e.ChatMessage="CHAT_MESSAGE",e.DirectMessage="DIRECT_MESSAGE"}(v||(v={})),function(e){e.Comment="comment",e.Value="value"}(_||(_={})),function(e){e.Comment="comment",e.Value="value"}(E||(E={})),function(e){e.ChannelType="channel_type",e.Id="id",e.IsPrivate="is_private",e.Name="name",e.OwnerId="owner_id"}(y||(y={})),function(e){e.MessagePkey="message_pkey"}(j||(j={})),function(e){e.MessageCursorChannelIdUserIdKey="message_cursor_channel_id_user_id_key",e.MessageCursorPkey="message_cursor_pkey"}(O||(O={})),function(e){e.ChannelId="channel_id",e.Id="id",e.MessageId="message_id",e.UserId="user_id"}(w||(w={})),function(e){e.ChannelId="channel_id",e.Id="id",e.MessageId="message_id",e.UserId="user_id"}(x||(x={})),function(e){e.ChannelId="channel_id",e.Deleted="deleted",e.Id="id",e.Image="image",e.Text="text",e.Timestamp="timestamp",e.UserId="user_id"}(I||(I={})),function(e){e.ChannelId="channel_id",e.Deleted="deleted",e.Id="id",e.Image="image",e.Text="text",e.Timestamp="timestamp",e.UserId="user_id"}(k||(k={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(C||(C={})),function(e){e.PollAnwersPkey="poll_anwers_pkey"}(S||(S={})),function(e){e.CreatedAt="created_at",e.Id="id",e.QuestionId="question_id",e.Text="text",e.UpdatedAt="updated_at",e.UserId="user_id",e.Votes="votes"}(q||(q={})),function(e){e.CreatedAt="created_at",e.Id="id",e.QuestionId="question_id",e.Text="text",e.UpdatedAt="updated_at",e.UserId="user_id",e.Votes="votes"}(T||(T={})),function(e){e.PollQuestionsPkey="poll_questions_pkey"}($||($={})),function(e){e.CreatedAt="created_at",e.Id="id",e.IsActive="is_active",e.OwnerId="owner_id",e.Text="text",e.UpdatedAt="updated_at"}(N||(N={})),function(e){e.CreatedAt="created_at",e.Id="id",e.IsActive="is_active",e.OwnerId="owner_id",e.Text="text",e.UpdatedAt="updated_at"}(M||(M={})),function(e){e.UserChannelsPkey="user_channels_pkey"}(A||(A={})),function(e){e.ChannelId="channel_id",e.UserId="user_id"}(B||(B={})),function(e){e.ChannelId="channel_id",e.UserId="user_id"}(P||(P={})),function(e){e.UserAuth0UserIdKey="user_auth0_user_id_key",e.UserPkey="user_pkey"}(D||(D={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.Username="username"}(z||(z={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(L||(L={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(F||(F={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.LastSeen="last_seen",e.LastTyped="last_typed",e.LastTypedChannel="last_typed_channel",e.Username="username"}(R||(R={})),function(e){e.UserVotesPkey="user_votes_pkey"}(Q||(Q={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.PollAnswerId="poll_answer_id",e.PollQuestionId="poll_question_id",e.Username="username",e.VotedAt="voted_at"}(U||(U={})),function(e){e.Auth0UserId="auth0_user_id",e.Id="id",e.PollAnswerId="poll_answer_id",e.PollQuestionId="poll_question_id",e.Username="username",e.VotedAt="voted_at"}(W||(W={}));var Gn=Object(ie.gql)(Vn());function Hn(e){return ie.useMutation(Gn,e)}var Yn=Object(ie.gql)(Wn());function Xn(e){return ie.useMutation(Yn,e)}var Kn=Object(ie.gql)(Un());var Jn=Object(ie.gql)(Qn());function Zn(e){return ie.useMutation(Jn,e)}var ea=Object(ie.gql)(Rn());var na=Object(ie.gql)(Fn());var aa=Object(ie.gql)(Ln());var ta=Object(ie.gql)(zn());function ra(e){return ie.useMutation(ta,e)}var ia=Object(ie.gql)(Dn());function la(e){return ie.useMutation(ia,e)}var oa=Object(ie.gql)(Pn());function sa(e){return ie.useMutation(oa,e)}var ca=Object(ie.gql)(Bn());var ua=Object(ie.gql)(An());var da=Object(ie.gql)(Mn());var ma=Object(ie.gql)(Nn());var pa=Object(ie.gql)($n());var ga=Object(ie.gql)(Tn());var ha=Object(ie.gql)(qn());var fa=Object(ie.gql)(Sn());var ba=Object(ie.gql)(Cn());var va=Object(ie.gql)(kn());var _a=Object(ie.gql)(In());var Ea=Object(ie.gql)(xn());Object(ie.gql)(wn());Object(ie.gql)(On());Object(ie.gql)(jn());var ya=Object(ie.gql)(yn());var ja=Object(ie.gql)(En());Object(ie.gql)(_n());Object(ie.gql)(vn());Object(ie.gql)(bn());var Oa=Object(ie.gql)(fn());Object(ie.gql)(hn());Object(ie.gql)(gn());Object(ie.gql)(pn());Object(ie.gql)(mn());Object(ie.gql)(dn());Object(ie.gql)(un());var wa=Object(ie.gql)(cn());function xa(e){return ie.useSubscription(wa,e)}var Ia=Object(ie.gql)(sn());function ka(e){return ie.useSubscription(Ia,e)}var Ca=Object(ie.gql)(on());function Sa(e){return ie.useSubscription(Ca,e)}var qa=Object(ie.gql)(ln());var Ta=Object(ie.gql)(rn());function $a(e){return ie.useSubscription(Ta,e)}var Na=Object(ie.gql)(tn());var Ma=Object(ie.gql)(an());Object(ie.gql)(nn());var Aa=Object(ie.gql)(en());var Ba=Object(ie.gql)(Ze());var Pa=Object(ie.gql)(Je());Object(ie.gql)(Ke());Object(ie.gql)(Xe());var Da=Object(ie.gql)(Ye());var za=Object(ie.gql)(He());Object(ie.gql)(Ge());var La=Object(ie.gql)(Ve());function Fa(e){return ie.useSubscription(La,e)}var Ra=Object(ie.gql)(We());function Qa(e){return ie.useSubscription(Ra,e)}var Ua=Object(ie.gql)(Ue());var Wa=Object(ie.gql)(Qe());Object(ie.gql)(Re());var Va=Object(ie.gql)(Fe());var Ga=Object(ie.gql)(Le());var Ha=Object(ie.gql)(ze());var Ya=Object(ie.gql)(De());Object(X.atom)({key:"testState"});var Xa=Object(X.atom)({key:"currentChannelState"}),Ka=Object(X.atom)({key:"getPollQuestionAnswersState",default:1}),Ja=Object(X.atom)({key:"giphyState"}),Za=Object(X.atom)({key:"deletedMessageState",default:!1}),et=(Object(X.atom)({key:"deletedThreadMessageState",default:!1}),a(451)),nt=Object(Ee.a)((function(e){return{root:{},large:{backgroundSize:"cover",marginTop:e.spacing(2),width:e.spacing(10),height:e.spacing(10)}}})),at=function(){var e=nt();return G.a.createElement(et.a,{className:e.large,alt:"Chicken Fest",src:"/chicken-chat-logo.svg"})},tt=a(413),rt=a(414),it=Object(Ee.a)((function(e){return{root:{},toolbarIcon:Object(Z.a)({},e.mixins.toolbar),badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},avatar:{width:24,height:24,backgroundColor:"#ed1859",color:"white",fontSize:10}}})),lt=function(e){var n=e.user,a=it(),t=$a(),r=t.data,i=(t.loading,t.error);if(i)return console.log("onlineUsersError",i),G.a.createElement($e.a,{severity:"error"},"A DirectMessageUserListError occured.");return G.a.createElement(tt.a,null,G.a.createElement(rt.a,{classes:{badge:a.badge},variant:"dot",invisible:function(e){if(void 0===e)return!0;var n=null===r||void 0===r?void 0:r.users.filter((function(n){return e===n.auth0_user_id}));return!(null===n||void 0===n?void 0:n.length)}(n.auth0_user_id)},G.a.createElement(et.a,{className:a.avatar},n.username.substring(0,2).toUpperCase())))},ot=Object(Ee.a)((function(e){return{root:{overflowY:"scroll"},avatar:{backgroundColor:"#000000",color:"#F57C00"},spacer:{marginTop:e.spacing(5)}}})),st=function(){var e,n=ot(),a=Object(ce.g)(),t=Object(X.useRecoilState)(Xa),r=Object(Te.a)(t,2),i=r[0],l=(r[1],Object(J.b)().isLoading),o=(e={variables:{user_id:i.owner_id,channel_id:i.id}},ie.useSubscription(Aa,e)),s=o.data,c=o.loading,u=o.error,d=function(e){return ie.useMutation(aa,e)}(),m=Object(Te.a)(d,2),p=m[0],g=m[1],h=(g.data,g.loading,g.error),f=function(){var e=Object(ae.a)(ne.a.mark((function e(n,a){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({variables:{channel_id:i.id,user_id:a}});case 2:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();return(u||h)&&console.log("error on user subscription",u),G.a.createElement(G.a.Fragment,null,G.a.createElement(he.a,{maxWidth:"sm",className:n.root},G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(at,null)),G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",mt:0,mb:5},G.a.createElement(be.a,{id:"simple-modal-title",variant:"h2"},"Add users to ",i.name),G.a.createElement(be.a,{color:"secondary",variant:"caption",id:"simple-modal-description"},s&&s.user.length>0?"Select users that you wanna add to this channel.":"All users have subscribed to this channel.")),G.a.createElement(ge.a,null,u&&G.a.createElement($e.a,{severity:"error"},"Error - something weird happened..."),(l||c)&&G.a.createElement(Se,null),!(l||c||u)&&G.a.createElement(G.a.Fragment,null,G.a.createElement(Ne.a,{className:n.spacer}),G.a.createElement(Me.a,{component:"nav","aria-label":"secondary mailbox folders",className:n.spacer},s&&s.user.map((function(e,n){return G.a.createElement(Ae.a,{button:!0,key:n,onClick:function(n){return f(n,e.auth0_user_id)}},G.a.createElement(lt,{user:e}),G.a.createElement(Be.a,{primary:e.username}))}))),G.a.createElement(Ne.a,{className:n.spacer})))),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",mt:5},G.a.createElement(ve.a,{variant:"contained",color:"secondary",size:"large",onClick:function(){a.push("/channel/".concat(i.name))}},"Back to channel")))))},ct=a(198),ut=Object(Ee.a)((function(e){return{avatar:{backgroundColor:"#000000",color:"#F57C00"},spacer:{marginTop:e.spacing(5)}}})),dt=function(){var e,n=ut(),a=Object(V.useState)(null),t=Object(Te.a)(a,2),r=(t[0],t[1]),i=Object(J.b)().user,l=Object(V.useState)(null),o=Object(Te.a)(l,2),s=o[0],c=o[1],u=i.sub,d=Object(ce.g)(),m=(e={variables:{user_id:u}},ie.useSubscription(Ba,e)),p=m.data,g=m.loading,h=m.error,f=la(),b=Object(Te.a)(f,2),v=b[0],_=b[1].error,E=Hn(),y=Object(Te.a)(E,2),j=y[0],O=y[1].error,w=function(e){return ie.useMutation(na,e)}(),x=Object(Te.a)(w,2),I=x[0],k=x[1].error;if(Object(V.useEffect)((function(){var e=function(){var e=Object(ae.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===p||void 0===p?void 0:p.user.filter((function(e){return 0===e.user_channels.filter((function(e){return 1===e.channel.user_channels.length})).length})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var n=Object(ae.a)(ne.a.mark((function n(){var a;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:a=n.sent,c(a);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[p]),h||k||_||O)return console.log("error",k),G.a.createElement($e.a,{severity:"error"},"Fetching users error...");if(g)return G.a.createElement(Se,null);var C=function(){var e=Object(ae.a)(ne.a.mark((function e(n,a){var t,i,l,o,s,c,u;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(null),e.next=3,I({variables:{name:Object(ct.a)(),user_id1:n,user_id2:a}});case 3:return c=e.sent,u=c.data,e.next=7,j({variables:{message:{user_id:"admin",text:"Welcome to your new direct message channel",channel_id:null===u||void 0===u||null===(t=u.validateAndAddDirectMessageChannel)||void 0===t?void 0:t.id}}});case 7:(null===u||void 0===u||null===(i=u.validateAndAddDirectMessageChannel)||void 0===i?void 0:i.id)&&(null===u||void 0===u||null===(l=u.validateAndAddDirectMessageChannel)||void 0===l?void 0:l.id)>0&&v({variables:{channel_id:null===u||void 0===u||null===(o=u.validateAndAddDirectMessageChannel)||void 0===o?void 0:o.id,message_id:1,user_id:a}}),d.push("/channel/".concat(null===u||void 0===u||null===(s=u.validateAndAddDirectMessageChannel)||void 0===s?void 0:s.name));case 9:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(he.a,{maxWidth:"sm"},G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(at,null)),G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",mb:5},G.a.createElement(be.a,{variant:"h2"},"Add a user"),G.a.createElement(be.a,{color:"secondary",variant:"caption",id:"simple-modal-description"},(null===s||void 0===s?void 0:s.length)?"Select users that you wanna send direct messages to.":"")),G.a.createElement(ge.a,{mb:5},G.a.createElement(Ne.a,{className:n.spacer}),(null===s||void 0===s?void 0:s.length)&&G.a.createElement(Me.a,{className:n.spacer},null===s||void 0===s?void 0:s.map((function(e,n){return G.a.createElement(Ae.a,{button:!0,key:n,onClick:function(){return C(u,e.auth0_user_id)}},G.a.createElement(lt,{user:e}),G.a.createElement(Be.a,{primary:e.username}))}))),0===(null===s||void 0===s?void 0:s.length)&&G.a.createElement($e.a,{severity:"success"},"All users have been added. U can send a message, by clicking on the user in the menu sidebar in direct messages."),G.a.createElement(Ne.a,{className:n.spacer}))),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",mt:5},G.a.createElement(ve.a,{variant:"contained",color:"secondary",size:"large",onClick:function(){d.push("/channel/general")}},"Back to Channel")))))},mt=a(420),pt=a(6),gt=a(3),ht=a(245),ft=a(234),bt=a.n(ft),vt=a(452),_t=a(373),Et=a(73),yt=a.n(Et),jt=a(137),Ot=a.n(jt),wt=function(e){e.user_id;var n,a=$a(),t=a.data,r=a.loading,i=a.error,l=Object(J.b)().user,o=null!==(n=null===t||void 0===t?void 0:t.users.length)&&void 0!==n?n:0;return i?G.a.createElement($e.a,{severity:"error"},"Online users could not be loaded."):G.a.createElement(G.a.Fragment,null,r?G.a.createElement(Se,null):G.a.createElement(ge.a,{display:"flex",flex:"1",justifyContent:"space-between",alignItems:"center"},G.a.createElement(vt.a,{variant:"outlined",color:"primary",size:"small",icon:G.a.createElement(Ot.a,null),label:l.nickname,style:{marginRight:30}}),G.a.createElement(_t.a,{title:"Users online","aria-label":"Unsers online",placement:"top"},G.a.createElement(rt.a,{color:"secondary",badgeContent:o},G.a.createElement(yt.a,{color:"primary"})))))},xt=a(421),It=a(139),kt=a.n(It),Ct=a(93),St=a.n(Ct),qt=a(94),Tt=a.n(qt),$t=a(113),Nt=a.n($t),Mt=Object(Ee.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},item:{height:"16px"}}})),At=function(e){var n,a=e.channelId,t=Mt(),r=Object(J.b)(),i=r.user,l=r.error,o=Object(V.useState)(0),s=Object(Te.a)(o,2),c=s[0],u=s[1],d=xa({variables:{channelId:a},fetchPolicy:"network-only"}),m=d.data,p=d.loading,g=d.error,h=(n={variables:{user_id:i.sub,channel_id:a}},ie.useSubscription(Da,n)),f=h.data,b=h.loading,v=h.error;return Object(V.useEffect)((function(){var e,n,a=null!==(e=null===f||void 0===f||null===(n=f.message_cursor[0])||void 0===n?void 0:n.message_id)&&void 0!==e?e:void 0,t=null===m||void 0===m?void 0:m.messages.filter((function(e){return void 0!==a&&e.id>a}));u(null===t||void 0===t?void 0:t.length)}),[m,f]),(g||v||l)&&console.log("Error in ChannelListMessageCounter Component",g,v,l),p||b?G.a.createElement(G.a.Fragment,null):G.a.createElement(G.a.Fragment,null,c&&void 0!==c?G.a.createElement("div",{className:t.root},G.a.createElement(vt.a,{variant:"outlined",size:"small",label:c,color:"secondary",className:t.item})):"")},Bt=a(228),Pt=a.n(Bt),Dt=Object(Ee.a)((function(e){return{root:{width:"100%"},treeView:{display:"flex",flexDirection:"row",justifyContent:"space-between"},badge:{backgroundColor:"#0f0"}}})),zt=function(){Dt();return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ae.a,{button:!0},G.a.createElement(tt.a,null,G.a.createElement(Pt.a,null)),G.a.createElement(Be.a,null,G.a.createElement(K.b,{to:"/channel/threads"},G.a.createElement(be.a,{variant:"h6"},"Threads")))))},Lt=Object(Ee.a)((function(e){return{root:{width:"100%"},treeView:{display:"flex",flexDirection:"row",justifyContent:"space-between"},badge:{backgroundColor:"#0f0"}}})),Ft=function(){var e,n,a=Lt(),t=Object(X.useRecoilState)(Xa),r=Object(Te.a)(t,1)[0],i=G.a.useState(!0),l=Object(Te.a)(i,2),o=l[0],s=l[1],c=(Object(mt.a)(pe.breakpoints.down("md")),n={variables:{channel_type:v.ChatMessage}},ie.useSubscription(Na,n)),u=c.data,d=c.loading,m=c.error,p=function(e){var n=e.data;return G.a.createElement(Ae.a,{button:!0,component:function(e){return G.a.createElement(K.b,Object.assign({to:"/channel/"+n.name},e))}},(null===n||void 0===n?void 0:n.name)===(null===r||void 0===r?void 0:r.name)?G.a.createElement(tt.a,null,!0===n.is_private?G.a.createElement(Nt.a,{color:"secondary"}):G.a.createElement(yt.a,{color:"secondary"})):G.a.createElement(tt.a,null,!0===n.is_private?G.a.createElement(Nt.a,null):G.a.createElement(yt.a,null)),(null===n||void 0===n?void 0:n.name)===(null===r||void 0===r?void 0:r.name)?G.a.createElement(Be.a,null,G.a.createElement(be.a,{variant:"h6",color:"secondary"},n.name)):G.a.createElement(G.a.Fragment,null,G.a.createElement(Be.a,{primary:null===n||void 0===n?void 0:n.name}),G.a.createElement(At,{channelId:n.id})))};return m?G.a.createElement($e.a,{severity:"error"},"Channels could not be loaded."):d?G.a.createElement(Se,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(Me.a,{className:a.root},G.a.createElement(zt,null),G.a.createElement(Ae.a,{button:!0,onClick:function(){s(!o)}},G.a.createElement(tt.a,null,G.a.createElement(kt.a,null)),G.a.createElement(Be.a,null,G.a.createElement(be.a,{variant:"h6"},"Channels")),o?G.a.createElement(St.a,null):G.a.createElement(Tt.a,null)),G.a.createElement(xt.a,{in:o,timeout:"auto",unmountOnExit:!0},G.a.createElement(Me.a,{component:"div"},null===u||void 0===u||null===(e=u.channels)||void 0===e?void 0:e.map((function(e){return G.a.createElement(p,{data:e,key:e.id,"data-channel-name":e.name})}))))))},Rt=a(229),Qt=a.n(Rt),Ut=a(140),Wt=a.n(Ut),Vt=Object(Ee.a)((function(e){return{root:{},nested:{paddingLeft:e.spacing(0)},form:{flexGrow:1,margin:e.spacing(2)},submit:{marginTop:e.spacing(2)},itemText:{color:e.palette.primary.light,fontWeight:700},link:{color:"#f9cd8b"}}})),Gt=function(e){var n,a=e.user_id,t=Vt(),r=G.a.useState(!0),i=Object(Te.a)(r,2),l=i[0],o=i[1],s=Object(ce.g)(),c=(n={variables:{channel_type:v.DirectMessage,user_id:a}},ie.useSubscription(Ma,n)),u=c.data,d=c.loading,m=c.error,p=function(e){return G.a.createElement(Ae.a,Object.assign({button:!0,component:"a"},e))};if(m)return console.log("error",m),G.a.createElement($e.a,{severity:"error"},"A DirectMessageUserListError occured.");if(d)return G.a.createElement(Se,null);return G.a.createElement(G.a.Fragment,null,G.a.createElement(Me.a,{className:t.root},G.a.createElement(Ae.a,{button:!0,onClick:function(){o(!l)}},G.a.createElement(tt.a,null,G.a.createElement(Wt.a,null)),G.a.createElement(Be.a,null,G.a.createElement(be.a,{variant:"h6"},"Direct Messages")),G.a.createElement(tt.a,null,G.a.createElement(Qt.a,{color:"secondary",onClick:function(){s.push("/addDirectMessageChannelMembers")}})),l?G.a.createElement(St.a,null):G.a.createElement(Tt.a,null)),G.a.createElement(xt.a,{in:l,timeout:"auto",unmountOnExit:!0},G.a.createElement(Me.a,{component:"div"},null===u||void 0===u?void 0:u.channels.map((function(e){var n,a;return G.a.createElement(p,{key:e.id,href:"/channel/"+e.name},G.a.createElement(lt,{user:null===(n=e.user_channels[0])||void 0===n?void 0:n.user}),G.a.createElement(Be.a,{primary:null===(a=e.user_channels[0])||void 0===a?void 0:a.user.username}),G.a.createElement(At,{channelId:e.id}))}))))))},Ht=a(230),Yt=a.n(Ht),Xt=Object(Ee.a)((function(e){var n;return{button:(n={},Object(pt.a)(n,e.breakpoints.down("md"),{}),Object(pt.a)(n,e.breakpoints.up("md"),{}),n)}})),Kt=function(){var e=Xt(),n=Object(J.b)().logout;return G.a.createElement(G.a.Fragment,null,G.a.createElement(ht.a,{color:"primary",size:"small",className:e.button,onClick:function(){n({returnTo:"https://chickenfest.ch"}),window.localStorage.clear()}},G.a.createElement(Yt.a,null)))},Jt=a(449),Zt=a(444),er=a(424),nr=a(448),ar=a(171),tr=a.n(ar),rr=a(233),ir=a.n(rr),lr=a(232),or=a.n(lr),sr=a(231),cr=a.n(sr),ur=Object(Ee.a)((function(e){return{root:{},nested:{paddingLeft:e.spacing(0)},form:{flexGrow:1,margin:e.spacing(2),marginTop:e.spacing(0)},checkbox:{color:e.palette.primary.dark},submit:{marginTop:e.spacing(2)}}})),dr=function(){var e,n=Object(mt.a)(pe.breakpoints.up("md")),a=G.a.useState(!1),t=Object(Te.a)(a,2),r=t[0],i=t[1],l=G.a.useState(!0),o=Object(Te.a)(l,2),s=o[0],c=o[1],u=Object(V.useState)(""),d=Object(Te.a)(u,2),m=d[0],p=d[1],g=Object(V.useState)(!1),h=Object(Te.a)(g,2),f=h[0],b=h[1],_=(Object(J.b)().user,ur()),E=ie.useMutation(ea,e),y=Object(Te.a)(E,2),j=y[0],O=y[1],w=O.data,x=O.loading,I=O.error,k=Hn(),C=Object(Te.a)(k,2),S=C[0],q=(C[1].data,Object(J.b)()),T=q.user,$=q.isLoading,N=Object(ce.g)(),M=function(){switch(n){case!0:return"right";case!1:return"center";default:return"right"}},A=function(){c(!s)},B=function(){var e=Object(ae.a)(ne.a.mark((function e(n){var a,t,r,l,o,s,u;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),m){e.next=3;break}return e.abrupt("return");case 3:return c(!0),e.next=6,j({variables:{channel:{owner_id:T.sub,name:m.toLocaleLowerCase(),is_private:f,channel_type:v.ChatMessage}}});case 6:return u=e.sent,e.next=9,S({variables:{message:{user_id:"admin",text:"Welcome to channel ".concat(null===(a=u.data)||void 0===a||null===(t=a.insert_channel)||void 0===t||null===(r=t.returning[0])||void 0===r?void 0:r.name),channel_id:null===(l=u.data)||void 0===l||null===(o=l.insert_channel)||void 0===o||null===(s=o.returning[0])||void 0===s?void 0:s.id}}});case 9:i(!1),p(""),N.push("/channel/".concat(m.toLocaleLowerCase()));case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return I&&console.log("error mutation",I),x?G.a.createElement(Se,null):G.a.createElement(Me.a,{className:_.root},G.a.createElement(Ae.a,{button:!0,onClick:function(){i(!r)}},G.a.createElement(tt.a,null,r?G.a.createElement(cr.a,null):G.a.createElement(or.a,null)),G.a.createElement(Be.a,{primary:"Add Channel"}),r?G.a.createElement(ir.a,{fontSize:"small"}):G.a.createElement(tr.a,{color:"secondary",fontSize:"small"})),G.a.createElement(xt.a,{in:r,timeout:"auto",unmountOnExit:!0},($||x)&&G.a.createElement(Se,null),G.a.createElement(Me.a,{component:"div"},I&&G.a.createElement(Ae.a,{className:_.nested},G.a.createElement(Jt.a,{open:s,autoHideDuration:5e3,onClose:A,anchorOrigin:{vertical:"top",horizontal:M()}},G.a.createElement($e.a,{severity:"error",onClose:A},"You can not use this name as it is already taken."))),w&&G.a.createElement(Ae.a,{className:_.nested},G.a.createElement(Jt.a,{open:s,autoHideDuration:5e3,onClose:A,anchorOrigin:{vertical:"top",horizontal:M()}},G.a.createElement($e.a,{severity:"success",onClose:A},"Channel has been added."))),G.a.createElement(Ae.a,{className:_.nested},G.a.createElement(fe.a,{container:!0},G.a.createElement("form",{className:_.form,noValidate:!0,autoComplete:"off",onSubmit:B},G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(Zt.a,{disabled:$||x,value:m,autoFocus:!1,onChange:function(e){p(e.target.value)},autoComplete:"off",placeholder:"Your channel name",id:"add-channel-input",label:"Add a new channel",fullWidth:!0})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(er.a,{control:G.a.createElement(nr.a,{checked:f,onChange:function(e){b(e.target.checked)},color:"secondary",name:"private",className:_.checkbox}),label:G.a.createElement(be.a,{variant:"caption",color:"textSecondary"},"Private Channel")})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ve.a,{disabled:$||x,type:"submit",value:"Submit",endIcon:G.a.createElement(tr.a,null),className:_.submit,variant:"outlined"},"Add new channel"))))))))},mr=Object(Ee.a)((function(e){var n,a;return{root:(n={},Object(pt.a)(n,e.breakpoints.up("sm"),{padding:e.spacing(1),margin:e.spacing(0),paddingTop:e.spacing(2)}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(1),margin:e.spacing(0),paddingTop:e.spacing(0),paddingBottom:e.spacing(12)}),n),treeView:{marginRight:e.spacing(0),marginLeft:e.spacing(0),paddingRight:e.spacing(0)},branding:{display:"flex",justifyContent:"center",alignItems:"center"},logo:(a={},Object(pt.a)(a,e.breakpoints.down("md"),{width:"150px"}),Object(pt.a)(a,e.breakpoints.up("md"),{width:"200px"}),a),menuButton:Object(pt.a)({width:50,height:50,backgroundColor:e.palette.primary.dark,marginLeft:e.spacing(1),"& .MuiIconButton-label":{marginRight:e.spacing(1)},justifyContent:"flex-end",marginTop:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(2)},e.breakpoints.up("md"),{display:"none"})}})),pr=function(e){var n=e.handleDrawerClose,a=e.open,t=Object(J.b)().user,r=mr(),i=Object(mt.a)(pe.breakpoints.up("md"));return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",flex:1,className:r.root},G.a.createElement(fe.a,{container:!0},!0===i&&G.a.createElement(fe.a,{item:!0,xs:12,className:r.branding},G.a.createElement("img",{alt:"The Great Chicken Fest",src:"/the-great-chicken-fest.svg",className:r.logo})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",style:{marginRight:pe.spacing(3),marginTop:pe.spacing(0)}},G.a.createElement(ht.a,{"aria-label":"open drawer",onClick:n,color:"inherit",size:"medium",className:Object(gt.a)(r.menuButton,a)},G.a.createElement(bt.a,null)),G.a.createElement(wt,{user_id:t.sub})),G.a.createElement(Ne.a,{style:{marginTop:pe.spacing(1),marginBottom:16}})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(Gt,{user_id:t.sub}),G.a.createElement(Ne.a,null),G.a.createElement(Ft,null),G.a.createElement(Ne.a,null),G.a.createElement(dr,null),G.a.createElement(Ne.a,null),G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",style:{paddingRight:8}},G.a.createElement(Kt,null))))))},gr=a(154),hr=a(65),fr=a.n(hr),br=a(425),vr=Object(Ee.a)((function(e){var n;return n={head:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(0)},root:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(2)}},Object(pt.a)(n,e.breakpoints.up("md"),{messageText:{paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,e.breakpoints.down("md"),{messageText:{fontSize:14,paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,e.breakpoints.down("sm"),{messageText:{fontSize:12,paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,"vspace",{marginBottom:e.spacing(1)}),Object(pt.a)(n,"vspaceTop",{marginBottom:e.spacing(3)}),Object(pt.a)(n,"vspaceBottom",{marginTop:e.spacing(1),marginBottom:e.spacing(0)}),Object(pt.a)(n,"image",{paddingBottom:"0.5rem"}),Object(pt.a)(n,"avatar",{backgroundColor:"#000000",color:"#F57C00"}),n})),_r=function(e){var n=e.messages,a=e.channelThread,t=e.currentChannel,r=vr();return G.a.createElement(G.a.Fragment,null,a?function(e){return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,null,G.a.createElement(be.a,{variant:"caption"},G.a.createElement("strong",null,"Thread - ",t.name," "))),G.a.createElement(Ne.a,{className:r.vspaceTop}),G.a.createElement(Ae.a,{key:e.message.id,className:r.head},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(br.a,null,G.a.createElement(tt.a,null,G.a.createElement(rt.a,{variant:"dot"},e.message.deleted?G.a.createElement(et.a,{alt:"Message has been removed",src:"".concat(window.location.origin,"/deleted.png")}):G.a.createElement(et.a,{className:r.avatar},e.message.user.username.substring(0,2).toUpperCase()))))),G.a.createElement(ge.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(be.a,{variant:"caption"},e.message.deleted?G.a.createElement("strong",null,"Oh sorry it seems..."):G.a.createElement(G.a.Fragment,null,G.a.createElement("strong",null,e.message.user.username," "),G.a.createElement("i",null,fr()(e.message.timestamp).fromNow()))),G.a.createElement(Ne.a,{className:r.vspace}))),G.a.createElement(be.a,{component:"div",className:r.messageText},e.message.text))),G.a.createElement(ge.a,{className:r.vspaceBottom},G.a.createElement(be.a,{component:"div",className:r.reply},null===n||void 0===n?void 0:n.length,1===(null===n||void 0===n?void 0:n.length)?" reply":" replies")))}(a):"")},Er=a(96),yr=a.n(Er),jr=function(e){var n,a,t,r=e.messageId,i=ie.useMutation(ca,t),l=Object(Te.a)(i,2),o=l[0],s=l[1],c=s.data,u=s.error;return u||void 0!==(null===c||void 0===c||null===(n=c.delete_channel_thread_message)||void 0===n?void 0:n.affected_rows)&&0===(null===c||void 0===c||null===(a=c.delete_channel_thread_message)||void 0===a?void 0:a.affected_rows)?G.a.createElement($e.a,{severity:"error"},"Message could not get deleted..."):G.a.createElement(ht.a,{onClick:function(){return function(e){o({variables:{message_id:e}})}(r)}},G.a.createElement(yr.a,{color:"primary",fontSize:"small"}))},Or=Object(Ee.a)((function(e){var n;return n={head:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(0)},root:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(2),overflowWrap:"break-word",wordBreak:"break-all"}},Object(pt.a)(n,e.breakpoints.up("md"),{messageText:{paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,e.breakpoints.down("md"),{messageText:{fontSize:14,paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,e.breakpoints.down("sm"),{messageText:{fontSize:12,paddingBottom:"1rem"},reply:{fontSize:11,paddingBottom:"1rem",color:"#ffffff"}}),Object(pt.a)(n,"vspace",{marginBottom:e.spacing(1)}),Object(pt.a)(n,"vspaceTop",{marginBottom:e.spacing(3)}),Object(pt.a)(n,"vspaceBottom",{marginTop:e.spacing(1),marginBottom:e.spacing(0)}),Object(pt.a)(n,"image",{paddingBottom:"0.5rem"}),Object(pt.a)(n,"avatar",{backgroundColor:"#000000",color:"#F57C00"}),n})),wr=function(e){var n,a,t=e.messages,r=e.user,i=e.channelThread,l=e.currentChannel,o=Or();return G.a.createElement(G.a.Fragment,null,G.a.createElement(_r,{messages:t,channelThread:i,currentChannel:l}),t?null===(n=Object(gr.a)(t))||void 0===n||null===(a=n.reverse())||void 0===a?void 0:a.map((function(e){return function(e){return G.a.createElement(Ae.a,{key:e.id,className:o.root},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(br.a,null,G.a.createElement(tt.a,null,G.a.createElement(rt.a,{variant:"dot"},G.a.createElement(et.a,{className:o.avatar},e.user.username.substring(0,2).toUpperCase()))))),G.a.createElement(ge.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(be.a,{variant:"caption"},G.a.createElement("strong",null,e.user.username," "),G.a.createElement("i",null,fr()(e.timestamp).fromNow())),G.a.createElement(Ne.a,{className:o.vspace})),G.a.createElement(ge.a,null,G.a.createElement(be.a,{variant:"caption"},r.sub===e.user.auth0_user_id?G.a.createElement(jr,{messageId:e.id}):""))),G.a.createElement(be.a,{component:"div",className:o.messageText},e.message),e.image?G.a.createElement(ge.a,{className:o.image},G.a.createElement("img",{src:e.image})):"",G.a.createElement(Ne.a,{className:o.vspace})))}(e)})):"")},xr=a(107),Ir=a(235),kr=Object(Ee.a)((function(e){return{giphySearchInput:Object(pt.a)({display:"flex",flex:1,paddingBottom:e.spacing(2),marginTop:e.spacing(1)},e.breakpoints.down("md"),{marginTop:e.spacing(1)}),giphyCarousel:{display:"flex",padding:e.spacing(3)}}})),Cr=new xr.GiphyFetch("gNDqYmKTip2mgTRqQbS5BwslaLM8Jdq0"),Sr=function(e){var n=e.hideGiphyCarousel,a=kr(),t=Object(X.useRecoilState)(Ja),r=Object(Te.a)(t,2),i=(r[0],r[1]),l=Object(V.useState)(""),o=Object(Te.a)(l,2),s=o[0],c=o[1];return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",flexDirection:"column",style:{maxWidth:"100%"}},G.a.createElement(Ir.Carousel,{key:s,fetchGifs:function(e){return s?Cr.search(s,{offset:e,limit:5}):Cr.trending({offset:e,limit:5})},onGifClick:function(e,a){a.preventDefault(),i(e),n()},gifHeight:50,gutter:6}),G.a.createElement(Zt.a,{className:a.giphySearchInput,size:"small",label:"Search giphy ...",variant:"standard",onChange:function(e){c(e.target.value)}})))},qr=a(453),Tr=a(426),$r=Object(Ee.a)((function(e){var n;return{root:{},toolbar:(n={},Object(pt.a)(n,e.breakpoints.up("md"),{paddingTop:e.spacing(0),paddingBottom:e.spacing(5)}),Object(pt.a)(n,e.breakpoints.down("md"),{paddingTop:e.spacing(0),paddingLeft:e.spacing(0),paddingRight:e.spacing(0),paddingBottom:e.spacing(2)}),Object(pt.a)(n,"borderTop",1),Object(pt.a)(n,"borderTopStyle","solid"),Object(pt.a)(n,"borderTopColor",e.palette.primary.dark),n),menuButton:{width:30,height:30,marginLeft:e.spacing(3),"& .MuiIconButton-label":{marginLeft:e.spacing(1)},justifyContent:"flex-end",marginTop:e.spacing(2),marginRight:e.spacing(2),marginBottom:e.spacing(2)},menuButtonHidden:{display:"none"},drawerPaper:{height:"100vh",width:"100%",transition:e.transitions.create("width",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.leavingScreen}),width:"100%"},appBarSpacer:e.mixins.toolbar,fab:{margin:e.spacing(2)},giphyImage:{marginTop:e.spacing(2)}}})),Nr=function(e){var n=e.open,a=e.handleDrawerClose,t=$r();return G.a.createElement(qr.a,{variant:"temporary",elevation:10,anchor:"left",classes:{paper:Object(gt.a)(t.drawerPaper,!n&&t.drawerPaperClose)},open:n},G.a.createElement(Tr.a,{className:t.toolbar},G.a.createElement(pr,{handleDrawerClose:a,open:n})))},Mr=a(450),Ar=a(454),Br=a(456),Pr=a(457),Dr=a(429),zr=a(149),Lr=a.n(zr),Fr=a(239),Rr=a.n(Fr),Qr=a(423),Ur=a(172),Wr=a.n(Ur),Vr=a(62),Gr=a.n(Vr),Hr=a(237),Yr=a.n(Hr),Xr=Object(Ee.a)((function(e){return{text:Object(pt.a)({},e.breakpoints.down("sm"),{fontSize:".875rem"})}})),Kr=function(e){var n=e.answerId,a=e.userVote,t=e.pollVotes,r=e.text,i=e.totalVotes,l=Xr(),o=function(e){return G.a.createElement(ge.a,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"},G.a.createElement(ge.a,{width:"100%",mr:1},G.a.createElement(Oe.a,Object.assign({id:n,color:a===n?"secondary":"primary",variant:"determinate"},e))),G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row-reverse"},G.a.createElement(vt.a,{size:"small",color:a===n?"secondary":"primary",variant:a===n?"default":"outlined",label:"".concat(t," / ").concat(e.value.toFixed(1),"%"),icon:a===n?G.a.createElement(Ot.a,null):G.a.createElement(Yr.a,null)})))};return G.a.createElement(ge.a,{key:n,width:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",mb:2},G.a.createElement(be.a,{variant:"body1",className:l.text},r),G.a.createElement(o,{value:100*t/i,answerid:n}))},Jr=Object(Ee.a)((function(e){return{pollSubmit:{marginTop:e.spacing(3)}}})),Zr=function(e){var n=e.enabled,a=Jr();return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{type:"submit",variant:"contained",color:"secondary",className:a.pollSubmit,disabled:n},n?"Choose Your Answer":"Vote"))},ei=function(e){var n=e.totalVotes;return G.a.createElement(G.a.Fragment,null,G.a.createElement(vt.a,{color:"primary",variant:"outlined",size:"small",label:"Total votes: ".concat(n),style:{marginLeft:8}}))},ni=a(244),ai=a(422),ti=a(428),ri=a(447),ii=Object(Ee.a)((function(e){return{pollCard:Object(pt.a)({width:"100%",padding:e.spacing(5)},e.breakpoints.down("md"),{transform:"scale(50%)",padding:e.spacing(2),minWidth:"100%"}),text:Object(pt.a)({},e.breakpoints.down("sm"),{fontSize:".875rem"})}})),li=function(){var e,n,a,t,r,i,l,o,s,c,u,d=ii(),m=Object(J.b)().user,p=Object(X.useRecoilState)(Xa),g=Object(Te.a)(p,2),h=g[0],f=(g[1],G.a.useState(null)),b=Object(Te.a)(f,2),v=b[0],_=b[1],E=(u={variables:{pollAnswerId:null!==v&&void 0!==v?v:0}},ie.useSubscription(Wa,u)),y=E.data,j=E.loading,O=function(e){return ie.useSubscription(Ua,e)}({variables:{channelId:h.id}}),w=O.data,x=O.loading,I=O.error,k=function(e){return ie.useMutation(ga,e)}(),C=Object(Te.a)(k,1)[0],S=function(){var e,n,a=null===w||void 0===w||null===(e=w.getChannelPoll[0])||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.poll_anwers,t=[];return void 0!==a?(a.map((function(e){return t.push(e.votes)})),t.reduce((function(e,n){return e+n}))):G.a.createElement(Se,null)},q=function(e){return ie.useSubscription(Ya,e)}({variables:{pollQuestionId:null===w||void 0===w||null===(e=w.getChannelPoll[0])||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.id,auth0UserId:m.sub}}),T=q.data,$=q.loading,N=function(e){return ie.useMutation(Ea,e)}({variables:{userName:m.username,auth0UserId:m.sub,pollQuestionId:null===w||void 0===w||null===(a=w.getChannelPoll[0])||void 0===a||null===(t=a.poll_question)||void 0===t?void 0:t.id,pollAnswerId:v}}),M=Object(Te.a)(N,1)[0],A=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(parseInt(n.target.value));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=Object(ae.a)(ne.a.mark((function e(n){var a,t,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null!==v){e.next=3;break}return e.abrupt("return");case 3:if(console.log("inside",v),void 0!==(r=null===y||void 0===y?void 0:y.pollAnswerVotes[0].votes)&&r++,void 0!==r){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,C({variables:{pollAnswerId:v,newVote:r}});case 10:return e.next=12,M({variables:{userName:m.nickname,auth0UserId:m.sub,pollQuestionId:null===w||void 0===w||null===(a=w.getChannelPoll[0])||void 0===a||null===(t=a.poll_question)||void 0===t?void 0:t.id,pollAnswerId:v}});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return x||I||j||$?G.a.createElement(Se,null):G.a.createElement(G.a.Fragment,null,(null===T||void 0===T||null===(r=T.user_votes)||void 0===r?void 0:r.length)?G.a.createElement(ni.a,{className:d.pollCard},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",mb:3},G.a.createElement(ge.a,null,G.a.createElement(be.a,{variant:"caption"},"Anonymous poll"),null===w||void 0===w?void 0:w.getChannelPoll.map((function(e){var n;return G.a.createElement(be.a,{key:e.id,color:"secondary",variant:"h2",style:{marginTop:0}},null===e||void 0===e||null===(n=e.poll_question)||void 0===n?void 0:n.text)}))),G.a.createElement(ei,{totalVotes:S()})),null===w||void 0===w||null===(i=w.getChannelPoll[0])||void 0===i||null===(l=i.poll_question)||void 0===l?void 0:l.poll_anwers.sort((function(e,n){return e.id>n.id?1:-1})).map((function(e){var n;return G.a.createElement(Kr,{key:e.id,answerId:e.id,userVote:null===T||void 0===T||null===(n=T.user_votes[0])||void 0===n?void 0:n.poll_answer_id,pollVotes:e.votes,text:e.text,totalVotes:S()})}))):G.a.createElement(ni.a,{className:d.pollCard},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexDirection:"row",mb:3},G.a.createElement(ge.a,null,G.a.createElement(be.a,{variant:"caption"},"Anonymous poll"),G.a.createElement(be.a,{variant:"h2",style:{marginTop:0}},(null===w||void 0===w?void 0:w.getChannelPoll[0])?null===w||void 0===w||null===(o=w.getChannelPoll[0].poll_question)||void 0===o?void 0:o.text:"no value")),G.a.createElement(ei,{totalVotes:S()})),G.a.createElement("form",{onSubmit:B},G.a.createElement(ai.a,{component:"fieldset"},G.a.createElement(ti.a,{"aria-label":"poll",name:"poll",value:v,onChange:A},null===w||void 0===w||null===(s=w.getChannelPoll[0])||void 0===s||null===(c=s.poll_question)||void 0===c?void 0:c.poll_anwers.sort((function(e,n){return e.id>n.id?1:-1})).map((function(e){return G.a.createElement(er.a,{key:e.id,value:e.id,control:G.a.createElement(ri.a,{value:e.id,checked:v===e.id,onChange:A}),label:G.a.createElement(be.a,{variant:"body2",className:d.text},e.text)})}))),G.a.createElement(Zr,{enabled:!1})))))},oi=a(238),si=Object(Ee.a)((function(e){var n;return{popoverRoot:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw"},popupWidth:(n={width:"40vw",minWidth:"40vw",maxWidth:"50vw",padding:e.spacing(5)},Object(pt.a)(n,e.breakpoints.up("sm"),{padding:e.spacing(3),minWidth:"50vw",maxWidth:"60vw",width:"50vw"}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(3),minWidth:"90vw",width:"90vw"}),n),voteIcon:{cursor:"pointer"},badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),ci=function(e){var n,a,t=e.channelId,r=si(),i=(a={variables:{currentChannelId:t}},ie.useSubscription(Ga,a)),l=i.data;return i.loading?G.a.createElement(Se,null):G.a.createElement(G.a.Fragment,null,1===(null===l||void 0===l||null===(n=l.poll_questions)||void 0===n?void 0:n.length)&&G.a.createElement(Wr.a,{variant:"popover",popupId:"pollingPopOver"},(function(e){return G.a.createElement(G.a.Fragment,null,G.a.createElement(rt.a,{variant:"dot",classes:{badge:r.badge}},G.a.createElement(Gr.a,Object.assign({color:"primary"},Object(oi.bindTrigger)(e),{className:r.voteIcon}))),G.a.createElement(Qr.a,Object.assign({anchorReference:"none",classes:{root:r.popoverRoot}},Object(Ur.bindPopover)(e)),G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",className:r.popupWidth},G.a.createElement(at,null),G.a.createElement(li,null),G.a.createElement(ve.a,{"aria-label":"close",onClick:e.close,style:{maxWidth:"10vw"}},"Close"))))})))},ui=Object(Ee.a)((function(e){var n;return Object(Mr.a)({root:Object(pt.a)({transform:"translateZ(0)",flexGrow:1},e.breakpoints.up("md"),{"& #ChickenfestNavi-action-4":{display:"none"}}),speedDial:(n={position:"absolute","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:"-10px",right:e.spacing(1)}},Object(pt.a)(n,e.breakpoints.down("sm"),{marginRight:e.spacing(0),marginBottom:"12px",height:38}),Object(pt.a)(n,e.breakpoints.up("md"),{marginRight:e.spacing(0),marginBottom:"75px"}),n),action:{backgroundColor:"#0f1448"},backdrop:Object(pt.a)({},e.breakpoints.up("md"),{})})})),di=function(e){var n=e.nickname,a=e.channelName,t=e.isPrivate,r=e.channelId,i=e.handleDrawerOpen,l=e.handleGiphyClick,o=ui(),s=G.a.useState(!1),c=Object(Te.a)(s,2),u=c[0],d=c[1],m=G.a.useState(!1),p=Object(Te.a)(m,2),g=p[0],h=(p[1],[{icon:t?G.a.createElement(Nt.a,{color:"secondary"}):G.a.createElement(yt.a,{style:{color:"#4CAF50"}}),type:"channel",state:!0,name:"".concat(a)},{icon:G.a.createElement(Wt.a,null),type:"user",name:"".concat(n)},{icon:G.a.createElement(ci,{channelId:r}),type:"poll",state:!0,name:"Admin Polling"},{icon:G.a.createElement(Lr.a,{onClick:l}),type:"giphy",state:!0,name:"+Giphy"},{icon:G.a.createElement(Rr.a,{onClick:i}),type:"menu",state:!0,name:"Menu"}]),f=function(){d(!1)};return G.a.createElement(G.a.Fragment,null,G.a.createElement("div",{className:o.root},G.a.createElement(Br.a,{ariaLabel:"Chickenfest Navi",className:o.speedDial,hidden:g,icon:G.a.createElement(Pr.a,null),onClose:f,onOpen:function(){d(!0)},open:u,direction:"up"},h.map((function(e){return G.a.createElement(Dr.a,{tooltipOpen:!0,key:e.type,icon:e.icon,tooltipTitle:e.name,onClick:function(e){f()},className:o.action})})))),G.a.createElement(Ar.a,{open:u,className:o.backdrop}))},mi=Object(Ee.a)((function(e){var n;return{root:{},toolbar:(n={},Object(pt.a)(n,e.breakpoints.up("md"),{paddingTop:e.spacing(5),paddingBottom:e.spacing(3)}),Object(pt.a)(n,e.breakpoints.down("md"),{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),Object(pt.a)(n,"borderTop",1),Object(pt.a)(n,"borderTopStyle","solid"),Object(pt.a)(n,"borderTopColor",e.palette.primary.dark),n),appBar:{backgroundColor:e.palette.background.default,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:"100%",width:"calc(100% - ".concat("100%","px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginTop:e.spacing(5),flex:"1"},menuButtonHidden:{display:"none"},drawerPaper:{height:"100vh",width:"100%",transition:e.transitions.create("width",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.leavingScreen}),width:"100%"},appBarSpacer:e.mixins.toolbar,fab:{margin:e.spacing(2)},giphyImage:{padding:e.spacing(1),marginTop:e.spacing(2)},popoverRoot:{display:"flex",justifyContent:"center",alignItems:"center"}}})),pi=function(e){var n=e.children,a=e.channelId,t=Object(J.b)().user,r=mi(),i=(Object(mt.a)(pe.breakpoints.up("md")),Object(X.useRecoilState)(Xa)),l=Object(Te.a)(i,2),o=l[0],s=(l[1],G.a.useState(!1)),c=Object(Te.a)(s,2),u=c[0],d=c[1],m=G.a.useState(!1),p=Object(Te.a)(m,2),g=p[0],h=p[1];return G.a.createElement(G.a.Fragment,null,n,G.a.createElement(di,{nickname:t.nickname,channelName:o.name,isPrivate:null===o||void 0===o?void 0:o.is_private,handleDrawerOpen:function(){d(!0)},handleGiphyClick:function(){h(!g)},channelId:a}),G.a.createElement(ge.a,{style:{display:g?"block":"none"},className:r.giphyImage,order:1,flex:"1",justifyContent:"flex-start",alignItems:"center"},G.a.createElement(Sr,{hideGiphyCarousel:function(){h(!1)}})),G.a.createElement(Nr,{open:u,handleDrawerClose:function(){d(!1)}}))},gi=a(430),hi=Object(Ee.a)((function(e){var n,a,t;return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between"},giphyVisible:{marginTop:e.spacing(2),display:"flex",justifyContent:"flex-start"},giphyHidden:{display:"none",marginTop:e.spacing(0)},giphyImage:{marginTop:e.spacing(0)},form:(n={display:"flex",marginLeft:e.spacing(1),marginRight:e.spacing(8),flexDirection:"column",flexGrow:1},Object(pt.a)(n,e.breakpoints.down("md"),{marginTop:e.spacing(.2)}),Object(pt.a)(n,e.breakpoints.up("md"),{marginTop:e.spacing(0)}),n),messageInput:Object(pt.a)({},e.breakpoints.down("md"),{fontSize:".9rem"}),messageButton:(a={},Object(pt.a)(a,e.breakpoints.down("sm"),{display:"none"}),Object(pt.a)(a,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(a,"marginTop",e.spacing(3)),Object(pt.a)(a,"marginLeft",e.spacing(0)),Object(pt.a)(a,"backgroundColor",e.palette.primary.dark),a),image:(t={},Object(pt.a)(t,e.breakpoints.up("md"),{maxHeight:55}),Object(pt.a)(t,e.breakpoints.down("md"),{maxHeight:40}),Object(pt.a)(t,"paddingRight",e.spacing(1)),t)}})),fi=function(e){var n,a,t=hi(),r=Object(mt.a)(pe.breakpoints.up("md")),i=Object(J.b)().user,l=Object(V.useState)(""),o=Object(Te.a)(l,2),s=o[0],c=o[1],u=Object(X.useRecoilState)(Ja),d=Object(Te.a)(u,2),m=d[0],p=d[1],g=Object(X.useRecoilState)(Za),h=Object(Te.a)(g,2),f=(h[0],h[1]),b=G.a.useState(!1),v=Object(Te.a)(b,2),_=v[0],E=v[1],y=e.channelId,j=ra({variables:{user_id:i.sub,channel_id:y}}),O=Object(Te.a)(j,2),w=O[0],x=O[1],I=(x.data,x.loading,x.error,sa()),k=Object(Te.a)(I,2),C=k[0],S=(k[1].data,function(){var n=Object(ae.a)(ne.a.mark((function n(a){var t,r;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),""!==s||null!==m){n.next=3;break}return n.abrupt("return");case 3:if(!(s.length>2e3)){n.next=6;break}return alert("Your text limit has reached the limit of 2000 characters"),n.abrupt("return");case 6:if(void 0!==e.channelThreadId){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,C({variables:{channel_thread_id:e.channelThreadId,message:s,image:null===m||void 0===m||null===(t=m.images)||void 0===t||null===(r=t.fixed_width_small)||void 0===r?void 0:r.url,user_id:i.sub}});case 10:c(""),p(null),f(!1);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return G.a.createElement("div",{className:t.root},G.a.createElement(ge.a,{className:m?t.giphyImage:""},m&&G.a.createElement("img",{className:t.image,src:null===m||void 0===m||null===(n=m.images)||void 0===n||null===(a=n.fixed_width_small)||void 0===a?void 0:a.url,onClick:function(){return p(null)}})),G.a.createElement(ge.a,null,G.a.createElement(ge.a,{className:_?t.giphyVisible:t.giphyHidden,order:1},G.a.createElement(Sr,{hideGiphyCarousel:function(){E(!1)}}))),G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:t.form,onSubmit:S},G.a.createElement(Zt.a,{value:s,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&w(),c(e)}(e.target.value)},size:function(){switch(r){case!0:return"medium";case!1:default:return"small"}}(),variant:"outlined",color:"secondary",autoComplete:"off",placeholder:"Type your message here ...",id:"chat-message-input-".concat(e.channelThreadId),label:"Crackle your message here ...",InputProps:{classes:{input:t.messageInput}},InputLabelProps:{className:t.messageInput}}),G.a.createElement(ve.a,{id:"chat-message-button-".concat(e.channelThreadId),size:function(){switch(r){case!0:return"large";case!1:default:return"small"}}(),variant:"contained",endIcon:G.a.createElement(gi.a,null,"send"),className:t.messageButton,type:"submit"},"Send")))},bi=Object(Ee.a)((function(e){var n;return{root:{overflowY:"scroll",height:"80vh",maxHeight:"80vh",marginTop:e.spacing(5),padding:e.spacing(3)},messageContainer:(n={},Object(pt.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(10),paddingTop:e.spacing(5),paddingBottom:e.spacing(0)}),Object(pt.a)(n,e.breakpoints.down("md"),{padding:e.spacing(3),paddingTop:e.spacing(3),paddingBottom:e.spacing(0)}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(0),paddingTop:e.spacing(0),paddingBottom:e.spacing(0)}),n)}})),vi=function(){var e,n,a=bi(),t=Object(V.useState)(20),r=Object(Te.a)(t,2),i=r[0],l=(r[1],Object(J.b)()),o=l.user,s=(l.error,Object(V.useRef)(null)),c=Object(X.useRecoilState)(Xa),u=Object(Te.a)(c,2),d=u[0],m=(u[1],Object(ce.g)()),p=Object(ce.h)(),g=p.messageId,h=p.channel,f=ka({variables:{limit:i,message_id:parseInt(g)},fetchPolicy:"network-only"}),b=f.data,v=f.loading,_=f.error,E=(n={variables:{message_id:parseInt(g)}},ie.useQuery(Oa,n)),y=E.data,j=E.loading,O=E.error;return Object(V.useEffect)((function(){!function(){var e;"object"===typeof s&&(null===s||void 0===s||null===(e=s.current)||void 0===e||e.scrollIntoView())}()}),[b]),Object(V.useEffect)((function(){void 0===(null===d||void 0===d?void 0:d.id)&&m.push("/channel/".concat(h))}),[]),v||j?G.a.createElement(Se,null):_||O?(console.log("error",_),G.a.createElement($e.a,{severity:"error"},"Thread Error")):G.a.createElement(G.a.Fragment,null,G.a.createElement("div",{className:a.root},G.a.createElement(fe.a,{container:!0},G.a.createElement(fe.a,{item:!0,xs:12,className:a.messageContainer},G.a.createElement(Me.a,{id:"message-list"},G.a.createElement(wr,{messages:null===b||void 0===b?void 0:b.channel_thread_message,user:o,channelThread:null===y||void 0===y?void 0:y.channel_thread[0],currentChannel:d})),G.a.createElement("div",{ref:s})),G.a.createElement(ge.a,{maxWidth:"xl",component:"nav"},G.a.createElement(pi,{channelId:null===d||void 0===d?void 0:d.id},G.a.createElement(fi,{channelId:null===d||void 0===d?void 0:d.id,channelThreadId:null===y||void 0===y||null===(e=y.channel_thread[0])||void 0===e?void 0:e.id}))))))},_i=Object(Ee.a)((function(e){var n,a;return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between"},rootSingleChip:{display:"flex",flexDirection:"column",flex:1},giphyVisible:{marginTop:e.spacing(2)},giphyHidden:{display:"none",marginTop:e.spacing(2)},giphyImage:{marginTop:e.spacing(2)},form:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},messageInput:{floatingLabelFocusStyle:{color:e.palette.secondary.dark}},messageButton:(n={},Object(pt.a)(n,e.breakpoints.down("md"),{display:"none"}),Object(pt.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(n,"marginTop",e.spacing(2)),Object(pt.a)(n,"marginLeft",e.spacing(0)),Object(pt.a)(n,"backgroundColor",e.palette.primary.dark),n),image:{maxHeight:55,paddingRight:e.spacing(1)},toolbar:(a={},Object(pt.a)(a,e.breakpoints.up("md"),{paddingTop:e.spacing(5),paddingBottom:e.spacing(5)}),Object(pt.a)(a,e.breakpoints.down("md"),{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),Object(pt.a)(a,"borderTop",1),Object(pt.a)(a,"borderTopStyle","solid"),Object(pt.a)(a,"borderTopColor",e.palette.primary.dark),a)}})),Ei=function(e){var n,a,t=_i(),r=Object(mt.a)(pe.breakpoints.up("md")),i=Object(J.b)().user,l=Object(V.useState)(""),o=Object(Te.a)(l,2),s=o[0],c=o[1],u=Object(X.useRecoilState)(Ja),d=Object(Te.a)(u,2),m=d[0],p=d[1],g=Object(X.useRecoilState)(Za),h=Object(Te.a)(g,2),f=(h[0],h[1]),b=G.a.useState(!1),v=Object(Te.a)(b,2),_=v[0],E=v[1],y=e.channelId,j=ra({variables:{user_id:i.sub,channel_id:y}}),O=Object(Te.a)(j,2),w=O[0],x=O[1],I=(x.data,x.loading,x.error,sa()),k=Object(Te.a)(I,2),C=k[0],S=(k[1].data,function(){var n=Object(ae.a)(ne.a.mark((function n(a){var t,r;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),""!==s||null!==m){n.next=3;break}return n.abrupt("return");case 3:if(!(s.length>2e3)){n.next=6;break}return alert("Your text limit has reached the limit of 2000 characters"),n.abrupt("return");case 6:if(void 0!==e.channelThreadId){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,C({variables:{channel_thread_id:e.channelThreadId,message:s,image:null===m||void 0===m||null===(t=m.images)||void 0===t||null===(r=t.fixed_width_small)||void 0===r?void 0:r.url,user_id:i.sub}});case 10:c(""),p(null),f(!1);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return G.a.createElement(G.a.Fragment,null,G.a.createElement("li",null,G.a.createElement(he.a,{maxWidth:"lg"},G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(vt.a,{variant:"outlined",color:"primary",size:"small",icon:G.a.createElement(Lr.a,null),label:"+Gif",onClick:function(){E(!_)}})),G.a.createElement(fe.a,{item:!0,xs:12,className:m?t.giphyImage:""},m&&G.a.createElement("img",{className:t.image,alt:null===m||void 0===m?void 0:m.bitly_url,src:null===m||void 0===m||null===(n=m.images)||void 0===n||null===(a=n.fixed_width_small)||void 0===a?void 0:a.url,onClick:function(){return p(null)}})),G.a.createElement(fe.a,{item:!0,xs:12,className:_?t.giphyVisible:t.giphyHidden},G.a.createElement(Sr,{hideGiphyCarousel:function(){E(!1)}})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:t.form,onSubmit:S},G.a.createElement(Zt.a,{value:s,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&w(),c(e)}(e.target.value)},size:function(){switch(r){case!0:return"medium";case!1:default:return"small"}}(),variant:"outlined",color:"secondary",autoComplete:"off",placeholder:"Type your message here ...",id:"chat-message-input-".concat(e.channelThreadId),label:"Crackle your message here ...",InputProps:{classes:{input:t.messageInput}},InputLabelProps:{className:t.messageInput}}),G.a.createElement(ve.a,{id:"chat-message-button-".concat(e.channelThreadId),size:function(){switch(r){case!0:return"large";case!1:default:return"small"}}(),variant:"contained",endIcon:G.a.createElement(gi.a,null,"send"),className:t.messageButton,type:"submit"},"Send"))))))},yi=function(e){var n,a=e.channelThread,t=Object(V.useState)(20),r=Object(Te.a)(t,2),i=r[0],l=(r[1],Object(J.b)()),o=l.user,s=l.error,c=ka({variables:{limit:i,message_id:a.message_id}}),u=c.data,d=c.error;if(d||s)return console.log("error",d),G.a.createElement($e.a,{severity:"error"},"Thread Error");return G.a.createElement(G.a.Fragment,null,G.a.createElement(Me.a,null,G.a.createElement(wr,{messages:null===u||void 0===u?void 0:u.channel_thread_message,user:o,channelThread:a,currentChannel:a.message.channel}),G.a.createElement(Ei,{channelId:null===(n=a.message)||void 0===n?void 0:n.id,channelThreadId:a.id})))},ji=a(431),Oi=Object(Ee.a)((function(e){var n;return{toolbar:(n={},Object(pt.a)(n,e.breakpoints.up("md"),{paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}),Object(pt.a)(n,e.breakpoints.down("md"),{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}),Object(pt.a)(n,"borderTop",1),Object(pt.a)(n,"borderTopStyle","solid"),Object(pt.a)(n,"borderTopColor",e.palette.primary.dark),n),appBar:{backgroundColor:e.palette.background.default,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:"100%",width:"calc(100% - ".concat("100%","px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}})),wi=function(e){e.channelThreadId;var n=Oi(),a=Object(mt.a)(pe.breakpoints.up("md")),t=G.a.useState(!1),r=Object(Te.a)(t,2),i=r[0],l=r[1];return G.a.createElement(ji.a,{elevation:0,position:"fixed",className:Object(gt.a)(n.appBar,i&&n.appBarShift)},G.a.createElement(Tr.a,{className:n.toolbar},G.a.createElement(he.a,{maxWidth:"xl",disableGutters:!0},G.a.createElement(fe.a,{container:!0},G.a.createElement(fe.a,{item:!0,style:{flex:1}},!1===a&&G.a.createElement(ge.a,{order:1,display:"flex",flex:"1",justifyContent:"flex-end",alignItems:"flex-end"},G.a.createElement(vt.a,{variant:"default","aria-label":"open drawer",onClick:function(){l(!0)},label:"Menu",clickable:!0,size:"small",color:"secondary",icon:G.a.createElement(St.a,null)})))))),G.a.createElement(Nr,{open:i,handleDrawerClose:function(){l(!1)}}))},xi=Object(Ee.a)((function(e){var n;return{root:{overflowY:"scroll",height:"90vh",marginTop:e.spacing(5),marginBottom:e.spacing(5)},end:{marginBottom:"2rem"},messageContainer:(n={},Object(pt.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(10),paddingTop:e.spacing(5),paddingBottom:e.spacing(0)}),Object(pt.a)(n,e.breakpoints.down("md"),{padding:e.spacing(3),paddingTop:e.spacing(3),paddingBottom:e.spacing(0)}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(1)}),n)}})),Ii=function(){var e,n,a=ie.useSubscription(qa,n),t=a.data,r=a.error,i=xi();return r?(console.log("error",r),G.a.createElement($e.a,{severity:"error"},"Thread Error")):G.a.createElement(G.a.Fragment,null,G.a.createElement("div",{className:i.root},G.a.createElement(fe.a,{container:!0},null===t||void 0===t||null===(e=t.channel_thread)||void 0===e?void 0:e.map((function(e,n){if(e.channel_thread_messages.length)return G.a.createElement(fe.a,{key:n,item:!0,xs:12,className:i.messageContainer},G.a.createElement(yi,{channelThread:e}))})),G.a.createElement(ge.a,{className:i.end},"\xa0"),G.a.createElement(ge.a,{maxWidth:"xl",component:"nav"},G.a.createElement(wi,null)))))},ki=Object(Ee.a)((function(e){return{container:{margin:0,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",overflowX:"hidden",overflowY:"hidden"},sidebar:{height:"100vh",maxHeight:"100vh",display:"flex",alignItems:"flex-start",paddingTop:e.spacing(5),borderRightWidth:1,borderRightStyle:"solid",borderRightColor:e.palette.primary.dark}}})),Ci=function(){var e=ki(),n=Object(mt.a)(pe.breakpoints.up("md")),a=Object(ce.h)().channel;return G.a.createElement(G.a.Fragment,null,G.a.createElement(he.a,{component:"main",maxWidth:"xl",disableGutters:!0,className:e.container},!0===n&&G.a.createElement(fe.a,{item:!0,xs:5,className:e.sidebar},G.a.createElement(pr,{handleDrawerClose:function(){return!1},open:!1})),G.a.createElement(fe.a,{item:!0,xs:12},a?G.a.createElement(vi,null):G.a.createElement(Ii,null))))},Si=function(){var e=Object(J.b)().user,n=Zn({variables:{user_id:e.sub}}),a=Object(Te.a)(n,1)[0];return Object(V.useEffect)((function(){setInterval((function(){void 0!==e.sub&&a()}),9e3)}),[]),G.a.createElement(he.a,{maxWidth:"xl",disableGutters:!0},G.a.createElement(Ci,null))},qi=a(156),Ti=a.n(qi),$i=function(e){var n,a,t,r,i=Object(ce.g)(),l=Sa({variables:{message_id:null===(n=e.message)||void 0===n?void 0:n.id}}),o=l.data,s=l.loading,c=l.error,u=(r={variables:{message_id:null===(a=e.message)||void 0===a?void 0:a.id}},ie.useMutation(ua,r)),d=Object(Te.a)(u,2),m=d[0],p=d[1].error,g=function(){var n;i.push("/channel/".concat(e.channelName,"/thread/").concat(null===(n=e.message)||void 0===n?void 0:n.id))},h=function(){var e=Object(ae.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:g();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p||c?G.a.createElement($e.a,null,"Error in Thread Reply"):s?G.a.createElement("div",null,G.a.createElement(ht.a,null,G.a.createElement(Ti.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"}}))):(null===o||void 0===o||null===(t=o.channel_thread_message)||void 0===t?void 0:t.length)?G.a.createElement("div",null,G.a.createElement(ht.a,{onClick:function(){return g()}},G.a.createElement(Ti.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"}}))):G.a.createElement("div",null,G.a.createElement(ht.a,{onClick:h},G.a.createElement(Ti.a,{color:"primary",fontSize:"small",style:{transform:"scaleX(-1)"}})))},Ni=Object(Ee.a)((function(e){var n;return n={},Object(pt.a)(n,e.breakpoints.up("md"),{messageText:{fontSize:11,paddingBottom:"1rem"}}),Object(pt.a)(n,e.breakpoints.down("md"),{messageText:{fontSize:11,paddingBottom:"1rem"}}),Object(pt.a)(n,e.breakpoints.down("sm"),{messageText:{fontSize:11,paddingBottom:"1rem"}}),Object(pt.a)(n,"link",{color:"#ffffff"}),n})),Mi=function(e){var n,a,t,r,i=e.channelName,l=e.message,o=Ni(),s=Sa({variables:{message_id:null===l||void 0===l?void 0:l.id}}),c=s.data;s.loading,s.error;return G.a.createElement(G.a.Fragment,null,(null===c||void 0===c||null===(n=c.channel_thread_message)||void 0===n?void 0:n.length)?G.a.createElement(be.a,{component:"div",className:o.messageText},G.a.createElement(K.b,{className:o.link,to:{pathname:"/channel/".concat(i,"/thread/").concat(null===l||void 0===l?void 0:l.id)}},"".concat(null===c||void 0===c||null===(a=c.channel_thread_message)||void 0===a?void 0:a.length," ").concat(1===(null===c||void 0===c||null===(t=c.channel_thread_message)||void 0===t?void 0:t.length)?"reply":"replies"," ")),G.a.createElement("i",{className:o.lastReply},"Last reply ".concat(fr()(null===c||void 0===c||null===(r=c.channel_thread_message[0])||void 0===r?void 0:r.timestamp).fromNow()))):"")},Ai=function(e){var n,a,t,r,i,l=e.messageId,o=Object(X.useSetRecoilState)(Za),s=ie.useMutation(Kn,i),c=Object(Te.a)(s,2),u=c[0],d=c[1],m=d.data,p=d.error;return p||void 0!==(null===m||void 0===m||null===(n=m.delete_message)||void 0===n?void 0:n.affected_rows)&&0===(null===m||void 0===m||null===(a=m.delete_message)||void 0===a?void 0:a.affected_rows)?G.a.createElement($e.a,{severity:"error"},"Message could not get deleted..."):(void 0!==(null===m||void 0===m||null===(t=m.delete_message)||void 0===t?void 0:t.affected_rows)&&(null===m||void 0===m||null===(r=m.delete_message)||void 0===r?void 0:r.affected_rows)>=0&&o(!0),G.a.createElement(ht.a,{onClick:function(){return function(e){u({variables:{message_id:e}})}(l)}},G.a.createElement(yr.a,{color:"primary",fontSize:"small"})))},Bi=function(e){var n,a,t=e.messageId,r=Xn(),i=Object(Te.a)(r,2),l=i[0],o=i[1],s=o.data,c=o.error,u=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,l({variables:{_eq:t,text:"...this message was deleted.",deleted:!0}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c||void 0!==(null===s||void 0===s||null===(n=s.update_message)||void 0===n?void 0:n.affected_rows)&&0===(null===s||void 0===s||null===(a=s.update_message)||void 0===a?void 0:a.affected_rows)?G.a.createElement($e.a,{severity:"error"},"Message could not get updated..."):G.a.createElement(ht.a,{onClick:u},G.a.createElement(yr.a,{color:"primary",fontSize:"small"}))},Pi=function(e){var n=e.messageId,a=Sa({variables:{message_id:n}}),t=a.data,r=a.loading,i=a.error;return r?G.a.createElement(G.a.Fragment,null):i?G.a.createElement($e.a,{severity:"error"},"useWatchChannelThreadSubscription Error..."):(null===t||void 0===t?void 0:t.channel_thread_message.length)?G.a.createElement(Bi,{messageId:n}):G.a.createElement(Ai,{messageId:n})},Di=Object(Ee.a)((function(e){var n;return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between"},form:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",flexGrow:1},messageButton:(n={},Object(pt.a)(n,e.breakpoints.down("md"),{width:"100%",size:"small"}),Object(pt.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(n,"marginTop",e.spacing(2)),Object(pt.a)(n,"marginLeft",e.spacing(0)),Object(pt.a)(n,"backgroundColor",e.palette.primary.dark),n)}})),zi=function(e){var n,a,t=e.message,r=Di(),i=(Object(J.b)().user,Object(V.useState)("")),l=Object(Te.a)(i,2),o=l[0],s=l[1];Object(V.useEffect)((function(){s(t.text)}),[t]);var c=Xn(),u=Object(Te.a)(c,2),d=u[0],m=u[1],p=m.data,g=m.loading,h=m.error,f=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==o){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d({variables:{_eq:t.id,text:o}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return g?G.a.createElement(G.a.Fragment,null,G.a.createElement(Se,null)):h||void 0!==(null===p||void 0===p||null===(n=p.update_message)||void 0===n?void 0:n.affected_rows)&&0===(null===p||void 0===p||null===(a=p.update_message)||void 0===a?void 0:a.affected_rows)?G.a.createElement($e.a,{severity:"error"},"Message could not get deleted..."):G.a.createElement("div",{className:r.root},G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:r.form},G.a.createElement(Zt.a,{value:o,autoFocus:!0,onChange:function(e){!function(e){s(e)}(e.target.value)},variant:"outlined",color:"secondary",autoComplete:"off",multiline:!0,rowsMax:4,id:"update-chat-message-input",label:"Update message..."}),G.a.createElement(ve.a,{id:"update-chat-message-button",variant:"contained",endIcon:G.a.createElement(gi.a,null,"send"),className:r.messageButton,onClick:function(e){return f(e)},type:"button"},"Save")))},Li=Object(Ee.a)((function(e){var n,a;return a={root:Object(pt.a)({display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:e.spacing(2),overflowWrap:"break-word",wordBreak:"break-all"},e.breakpoints.down("md"),{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),paddingBottom:e.spacing(0)})},Object(pt.a)(a,e.breakpoints.up("md"),{messageText:{padding:"1rem","&:hover":{backgroundColor:"#0f1448",cursor:"pointer"}}}),Object(pt.a)(a,e.breakpoints.down("md"),{messageText:{paddingBottom:".3rem"}}),Object(pt.a)(a,"vspace",Object(pt.a)({marginTop:e.spacing(3),marginBottom:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.spacing(1),marginBottom:e.spacing(0)})),Object(pt.a)(a,"image",{paddingBottom:"0.5rem"}),Object(pt.a)(a,"giphy",(n={},Object(pt.a)(n,e.breakpoints.down("sm"),{width:"100%"}),Object(pt.a)(n,e.breakpoints.up("md"),{width:"25%"}),n)),Object(pt.a)(a,"avatar",{backgroundColor:"#ed1859",color:"white",fontSize:12}),a})),Fi=function(e){var n,a,t=e.messages,r=e.lastMessage,i=e.preLastMessageId,l=e.user,o=Li(),s=Object(V.useState)(!1),c=Object(Te.a)(s,2),u=c[0],d=c[1],m=Object(V.useState)(null),p=Object(Te.a)(m,2),g=p[0],h=p[1],f=Object(ce.h)().channel,b=Object(X.useRecoilValue)(Za),v=function(e){return G.a.createElement(Ae.a,{key:e.id,className:o.root},G.a.createElement(br.a,null,G.a.createElement(tt.a,null,G.a.createElement(rt.a,{variant:"dot"},e.deleted?G.a.createElement(et.a,{alt:"Message has been removed",src:"".concat(window.location.origin,"/deleted.png")}):G.a.createElement(et.a,{className:o.avatar},e.user.username.substring(0,2).toUpperCase())))),G.a.createElement(ge.a,{component:"div",display:"flex",flexDirection:"column",flex:"1"},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"center"},G.a.createElement(ge.a,{component:"div",display:"flex",justifyContent:"space-between",flexGrow:"1",style:{marginRight:16}},G.a.createElement(be.a,{color:"secondary",variant:"caption"},e.deleted?G.a.createElement("strong",null,"Oh sorry it seems..."):G.a.createElement(G.a.Fragment,null,G.a.createElement("strong",null,e.user.username," "))),G.a.createElement(be.a,{variant:"caption",color:"primary",style:{marginLeft:"8px"}},fr()(e.timestamp).fromNow())),G.a.createElement(ge.a,null,G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(be.a,{variant:"caption"},G.a.createElement($i,{message:e,channelName:f})),e.deleted?"":G.a.createElement(G.a.Fragment,null,l.sub===e.user.auth0_user_id&&G.a.createElement(be.a,{variant:"caption"},!(u&&g===e.id)&&G.a.createElement(Pi,{messageId:e.id})))))),G.a.createElement(be.a,{component:"p",color:"textSecondary",className:o.messageText,onClick:function(){return function(e){e.user.auth0_user_id===l.sub&&(h(e.id),d(!u))}(e)}},u&&g===e.id&&l.sub===e.user.auth0_user_id&&!1===e.deleted?G.a.createElement(zi,{message:e}):e.text),(null===e||void 0===e?void 0:e.image)?G.a.createElement(ge.a,{className:o.image},G.a.createElement("img",{src:e.image,className:o.giphy})):"",G.a.createElement(ge.a,null,G.a.createElement(Mi,{message:e,channelName:f})),G.a.createElement(Ne.a,{className:o.vspace})))};return G.a.createElement(G.a.Fragment,null,null===(n=Object(gr.a)(t))||void 0===n||null===(a=n.reverse())||void 0===a?void 0:a.map((function(e,n){return v(e)})),!b&&r&&0!==i&&i<r.id?v(r):"")},Ri=Object(Ee.a)((function(e){return{indicator:{color:"#f9cd8b",fontSize:"10px",fontWeight:700}}})),Qi=function(){Ri();var e,n,a=Object(J.b)().user,t=Object(X.useRecoilState)(Xa),r=Object(Te.a)(t,2),i=r[0],l=(r[1],n={variables:{self_id:a.sub,channel_id:i.id}},ie.useSubscription(Pa,n)),o=l.data,s=l.loading;return l.error?G.a.createElement($e.a,{severity:"error"},"Typing Indicator Error..."):G.a.createElement(G.a.Fragment,null,!s&&(null===o||void 0===o||null===(e=o.user_typing[0])||void 0===e?void 0:e.username)?"".concat(o.user_typing[0].username," is typing ..."):"Type your message here ...")},Ui=Object(Ee.a)((function(e){var n,a,t,r;return{root:{display:"flex",flexDirection:"column",justifyContent:"space-between"},giphyImage:{marginTop:e.spacing(0)},form:(n={display:"flex",marginLeft:e.spacing(1),marginRight:e.spacing(1),flexDirection:"column",flexGrow:1},Object(pt.a)(n,e.breakpoints.down("md"),{marginTop:e.spacing(1)}),Object(pt.a)(n,e.breakpoints.up("md"),{marginTop:e.spacing(0)}),n),messageInput:(a={},Object(pt.a)(a,e.breakpoints.down("md"),{fontSize:".9rem"}),Object(pt.a)(a,"&.MuiFormLabel-root.Mui-focused",{color:e.palette.secondary.main}),a),messageButton:(t={},Object(pt.a)(t,e.breakpoints.down("sm"),{display:"none"}),Object(pt.a)(t,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(t,"marginTop",e.spacing(3)),Object(pt.a)(t,"marginLeft",e.spacing(0)),Object(pt.a)(t,"backgroundColor",e.palette.primary.dark),t),image:(r={},Object(pt.a)(r,e.breakpoints.up("md"),{maxHeight:250}),Object(pt.a)(r,e.breakpoints.down("md"),{border:"2px solid "+e.palette.secondary.main,height:120,marginBottom:e.spacing(3),maxWidth:"100vw",maxHeight:"50vw"}),r)}})),Wi=function(e){var n,a,t=Ui(),r=Object(mt.a)(pe.breakpoints.up("md")),i=Object(J.b)().user,l=Object(V.useState)(""),o=Object(Te.a)(l,2),s=o[0],c=o[1],u=Object(X.useRecoilState)(Ja),d=Object(Te.a)(u,2),m=d[0],p=d[1],g=Object(X.useRecoilState)(Za),h=Object(Te.a)(g,2),f=(h[0],h[1]),b=e.channelId,v=ra({variables:{user_id:i.sub,channel_id:b}}),_=Object(Te.a)(v,2),E=_[0],y=_[1],j=(y.data,y.loading,y.error,Hn()),O=Object(Te.a)(j,2),w=O[0],x=(O[1].data,function(){var n=Object(ae.a)(ne.a.mark((function n(a){var t,r,l,o;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),""!==s||null!==m){n.next=3;break}return n.abrupt("return");case 3:if(!(s.length>2e3)){n.next=6;break}return alert("Your text limit has reached the limit of 2000 characters"),n.abrupt("return");case 6:return e.handleSetLastMessage({id:e.preLastMessageId+1,user:{username:i.nickname},user_id:i.sub,text:s,image:null===m||void 0===m||null===(t=m.images)||void 0===t||null===(r=t.fixed_width_small)||void 0===r?void 0:r.url,channel_id:b}),n.next=9,w({variables:{message:{user_id:i.sub,text:s,image:null===m||void 0===m||null===(l=m.images)||void 0===l||null===(o=l.fixed_width_small)||void 0===o?void 0:o.url,channel_id:b}}});case 9:c(""),p(null),f(!1);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return G.a.createElement(ge.a,{className:t.root},G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",className:t.giphyImage},m&&G.a.createElement("img",{className:t.image,alt:"Giphy",src:null===m||void 0===m||null===(n=m.images)||void 0===n||null===(a=n.fixed_width_small)||void 0===a?void 0:a.url,onClick:function(){return p(null)}})),G.a.createElement("form",{noValidate:!0,autoComplete:"off",className:t.form,onSubmit:x},G.a.createElement(Zt.a,{value:s,autoFocus:!1,onChange:function(e){!function(e){var n=e.length;(0!==n&&n%5===0||1===n)&&E(),c(e)}(e.target.value)},focused:!0,size:function(){switch(r){case!0:return"medium";case!1:default:return"small"}}(),variant:"outlined",color:"primary",autoComplete:"off",placeholder:"...",id:"chat-message-input",label:G.a.createElement(Qi,null),InputProps:{classes:{input:t.messageInput}},InputLabelProps:{className:t.messageInput}}),G.a.createElement(ve.a,{id:"chat-message-button",size:function(){switch(r){case!0:return"large";case!1:default:return"small"}}(),variant:"contained",endIcon:G.a.createElement(gi.a,null,"send"),className:t.messageButton,type:"submit"},"Send")))},Vi=Object(Ee.a)((function(e){var n,a;return{root:(n={overflowY:"scroll",maxHeight:"100vh",marginTop:e.spacing(0),paddingBottom:e.spacing(0)},Object(pt.a)(n,e.breakpoints.up("lg"),{padding:e.spacing(3),paddingTop:e.spacing(7),paddingBottom:e.spacing(20)}),Object(pt.a)(n,e.breakpoints.down("md"),{padding:e.spacing(1),paddingTop:e.spacing(8),paddingBottom:e.spacing(9)}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(0),paddingTop:e.spacing(8),paddingBottom:e.spacing(9)}),n),messageInput:(a={position:"fixed",bottom:0,padding:e.spacing(2),background:e.palette.background.default,zIndex:1e3},Object(pt.a)(a,e.breakpoints.up("md"),{width:"70vw"}),Object(pt.a)(a,e.breakpoints.up("lg"),{width:"75vw"}),Object(pt.a)(a,e.breakpoints.down("sm"),{width:"100vw"}),a),polling:{position:"fixed",overflow:"hidden",flex:1}}})),Gi=function(e){var n,a=e.channelId,t=e.isPrivate,r=e.channelType,i=Vi(),l=Object(V.useState)(20),o=Object(Te.a)(l,2),s=o[0],c=(o[1],Object(V.useState)({})),u=Object(Te.a)(c,2),d=u[0],m=u[1],p=Object(J.b)(),g=p.user,h=(p.error,Object(ce.g)()),f=Object(V.useRef)(null),b=0,_=xa({variables:{channelId:a,limit:s},fetchPolicy:"network-only"}),E=_.data,y=_.loading,j=_.error,O=la(),w=Object(Te.a)(O,2),x=w[0],I=w[1];I.data,I.loading,I.error;if(Object(V.useEffect)((function(){var e,n;(null===E||void 0===E||null===(e=E.messages[0])||void 0===e?void 0:e.id)&&x({variables:{channel_id:a,message_id:null===E||void 0===E||null===(n=E.messages[0])||void 0===n?void 0:n.id,user_id:g.sub}}),function(){var e;"object"===typeof f&&(null===f||void 0===f||null===(e=f.current)||void 0===e||e.scrollIntoView())}()}),[E]),j)return G.a.createElement($e.a,{severity:"error"},"Messages could not be loaded.");if(y)return G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",style:{height:"100vh"}},G.a.createElement(ge.a,null,G.a.createElement(at,null),G.a.createElement(Oe.a,{color:"secondary",style:{marginTop:"8px"}})));E&&(b=null===E||void 0===E||null===(n=E.messages[0])||void 0===n?void 0:n.id);return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{className:i.root},t&&r!==v.DirectMessage&&G.a.createElement(ge.a,{display:"flex",justifyContent:"center",style:{marginBottom:"20px"}},G.a.createElement(ve.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){h.push("/addChannelMembers")}},"Add users to channel")),G.a.createElement(Me.a,{id:"message-list"},G.a.createElement(Fi,{messages:null===E||void 0===E?void 0:E.messages,lastMessage:d,preLastMessageId:b,user:g})),G.a.createElement("div",{ref:f})),G.a.createElement(ge.a,{className:i.messageInput},G.a.createElement(pi,{channelId:a},G.a.createElement(Wi,{channelId:a,handleSetLastMessage:function(e){m(e)},preLastMessageId:b}))))},Hi=function(){var e,n=Object(X.useRecoilState)(Xa),a=Object(Te.a)(n,2),t=a[0],r=a[1],i=Object(J.b)(),l=i.isAuthenticated,o=i.isLoading,s=i.error,c=Object(ce.h)().channel,u=(e={variables:{name:c}},ie.useQuery(ja,e)),d=u.data,m=u.loading,p=u.error;return o||m?G.a.createElement(Se,null):((!t||t&&t.name!==c)&&r(null===d||void 0===d?void 0:d.channel[0]),s||p?G.a.createElement(G.a.Fragment,null,"Error: ",s):G.a.createElement(G.a.Fragment,null,l&&G.a.createElement(G.a.Fragment,null,G.a.createElement(Gi,{channelId:null===t||void 0===t?void 0:t.id,isPrivate:null===t||void 0===t?void 0:t.is_private,channelType:null===t||void 0===t?void 0:t.channel_type}))))},Yi=a(240),Xi=a.n(Yi),Ki=Object(Ee.a)((function(e){var n;return{root:(n={backgroundColor:e.palette.background.default,marginTop:e.spacing(0),paddingTop:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(2),zIndex:1e3},Object(pt.a)(n,e.breakpoints.down("md"),{position:"fixed"}),Object(pt.a)(n,e.breakpoints.up("md"),{position:"fixed",width:"75vw"}),n),menuButton:{width:50,height:50,backgroundColor:e.palette.primary.dark,marginLeft:e.spacing(1),"& .MuiIconButton-label":{marginLeft:e.spacing(1)}}}})),Ji=function(e){var n=e.channelName,a=Ki(),t=Object(X.useRecoilState)(Xa),r=Object(Te.a)(t,1)[0],i=Object(mt.a)(pe.breakpoints.up("md")),l=G.a.useState(!1),o=Object(Te.a)(l,2),s=o[0],c=o[1];return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",width:1,className:a.root},!1===i&&G.a.createElement(ht.a,{className:a.menuButton,color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)}},G.a.createElement(Xi.a,null)),G.a.createElement(vt.a,{size:"small",variant:"outlined",color:"primary",label:n,icon:G.a.createElement(yt.a,null)}),G.a.createElement(ci,{channelId:null===r||void 0===r?void 0:r.id}),G.a.createElement(Kt,null)),G.a.createElement(Nr,{open:s,handleDrawerClose:function(){c(!1)}}))},Zi=Object(Ee.a)((function(e){return{container:{margin:0,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",overflowX:"hidden",overflowY:"hidden"},sidebar:{height:"100vh",minHeight:"50vh",display:"flex",alignItems:"flex-start",paddingTop:e.spacing(5),borderRightWidth:1,borderRightStyle:"solid",borderRightColor:e.palette.primary.dark},chatApp:{height:"100vh",overflow:"hidden"}}})),el=function(){var e=Zi(),n=Object(ce.h)().channel,a=Object(mt.a)(pe.breakpoints.up("md"));return G.a.createElement(he.a,{component:"main",disableGutters:!0,maxWidth:"xl",className:e.container},!0===a&&G.a.createElement(fe.a,{item:!0,xs:5,sm:4,className:e.sidebar},G.a.createElement(pr,{handleDrawerClose:function(){return!1},open:!1})),G.a.createElement(fe.a,{item:!0,xs:12,className:e.chatApp},G.a.createElement(Ji,{channelName:n}),G.a.createElement(Hi,null)))},nl=function(){var e=Object(J.b)().user,n=Zn({variables:{user_id:e.sub}}),a=Object(Te.a)(n,1)[0];return Object(V.useEffect)((function(){setInterval((function(){void 0!==e.sub&&a()}),9e3)}),[a,e.sub]),G.a.createElement(el,null)},al=a(432),tl=Object(Ee.a)((function(e){var n;return{root:(n={},Object(pt.a)(n,e.breakpoints.up("sm"),{marginRight:e.spacing(5),marginLeft:e.spacing(5),marginTop:e.spacing(0),marginBottom:e.spacing(5)}),Object(pt.a)(n,e.breakpoints.down("md"),{padding:e.spacing(2),margin:e.spacing(0),paddingTop:e.spacing(2)}),Object(pt.a)(n,e.breakpoints.down("sm"),{padding:e.spacing(0),margin:e.spacing(0),paddingTop:e.spacing(2)}),n),treeView:{overflowY:"hidden",maxHeight:"50vh",marginRight:e.spacing(0),marginLeft:e.spacing(0),paddingRight:e.spacing(0)},branding:{display:"flex",justifyContent:"center",alignItems:"center"}}})),rl=function(){var e=tl(),n=Object(J.b)().user;return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",flexDirection:"column",flex:"1",className:e.root},G.a.createElement(fe.a,{container:!0},G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(wt,{user_id:n.sub})),G.a.createElement(fe.a,{item:!0,xs:12,className:e.branding},G.a.createElement("img",{alt:"The Great Chicken Fest",src:"/the-great-chicken-fest.svg",width:"300"}))),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{className:e.treeView},G.a.createElement(Ne.a,null),G.a.createElement(Me.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:G.a.createElement(al.a,{component:"div",id:"nested-list-subheader"},"Administration"),className:e.root},G.a.createElement(Ae.a,{button:!0},G.a.createElement(tt.a,null,G.a.createElement(kt.a,null)),G.a.createElement(Be.a,null,G.a.createElement(K.b,{to:"/dashboard/users"},G.a.createElement(be.a,{variant:"h6",color:"secondary"},"Users")))),G.a.createElement(Ae.a,{button:!0},G.a.createElement(tt.a,null,G.a.createElement(Gr.a,null)),G.a.createElement(Be.a,null,G.a.createElement(K.b,{to:"/dashboard/pollings"},G.a.createElement(be.a,{variant:"h6",color:"secondary"},"Pollings"))))),G.a.createElement(Ne.a,null),G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},G.a.createElement(Kt,null))))))},il=a(433),ll=a(434),ol=a(435),sl=a(436),cl=a(437),ul=a(438),dl=Object(Ee.a)((function(e){return{root:{}}})),ml=function(){var e,n=dl(),a=(e={variables:{}},ie.useQuery(ya,e)),t=a.data,r=a.loading,i=a.error;return r?G.a.createElement(ke.a,null):i?G.a.createElement($e.a,{severity:"error"},"Users could not be loaded."):G.a.createElement(ge.a,{className:n.root},G.a.createElement("h2",null,"Userlist"),G.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore, quos sunt magni natus suscipit nesciunt. Nostrum voluptatum suscipit assumenda officia in! Incidunt similique a adipisci facere neque, cum nesciunt reprehenderit."),t&&G.a.createElement(il.a,{component:ni.a},G.a.createElement(ll.a,{"aria-label":"simple table"},G.a.createElement(ol.a,null,G.a.createElement(sl.a,null,G.a.createElement(cl.a,null,"Avatar"),G.a.createElement(cl.a,null,"Username"),G.a.createElement(cl.a,{align:"right"},"UserId"),G.a.createElement(cl.a,{align:"left"},"Auth0"),G.a.createElement(cl.a,{align:"left"},"Last seen"))),t.users.map((function(e){return G.a.createElement(ul.a,null,G.a.createElement(sl.a,{key:e.id},G.a.createElement(cl.a,null,G.a.createElement(et.a,{alt:e.username,src:"https://api.adorable.io/avatars/173/abott@adorable.png"})),G.a.createElement(cl.a,{component:"th",scope:"row"},G.a.createElement(be.a,{variant:"body2"},e.username)),G.a.createElement(cl.a,{align:"right"},G.a.createElement(be.a,{variant:"caption"},e.id)),G.a.createElement(cl.a,{align:"left"},G.a.createElement(be.a,{variant:"body2"},e.auth0_user_id)),G.a.createElement(cl.a,{align:"left"},e.last_seen?e.last_seen:"Has not logged in yet.")))})))))},pl=a(455),gl=a(439),hl=a(440),fl=a(441),bl=function(e){var n,a=e.questionId,t=e.setActiveState,r=(e.channelPollState,G.a.useState(t)),i=Object(Te.a)(r,2),l=i[0],o=(i[1],n={variables:{pollQuestionId:a}},ie.useMutation(fa,n)),s=Object(Te.a)(o,2),c=s[0],u=s[1].error;Object(V.useEffect)((function(){}),[l]);var d=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c({variables:{pollQuestionId:n}});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return u&&console.log("Error on delete question ".concat(a)),G.a.createElement(G.a.Fragment,null,l?G.a.createElement(ve.a,{variant:"outlined",size:"small",color:"secondary",disabled:!0},"Active poll"):G.a.createElement(ve.a,{variant:"contained",size:"small",color:"secondary",onClick:function(){d(a)}},"Delete"))},vl=a(151),_l=a.n(vl),El=a(152),yl=a.n(El),jl=Object(Ee.a)((function(e){return{root:{},locked:{color:e.palette.error.main},unlocked:{color:e.palette.success.main}}})),Ol=function(e){var n=e.setActiveState,a=jl();return Object(V.useEffect)((function(){}),[]),G.a.createElement(G.a.Fragment,null,G.a.createElement(vt.a,{size:"small",variant:"outlined",color:"primary",icon:n?G.a.createElement(_l.a,{className:a.locked}):G.a.createElement(yl.a,{className:a.unlocked}),label:n?"locked":"unlocked"}))},wl=function(e){var n,a=e.questionId,t=G.a.useState(a),r=Object(Te.a)(t,2),i=r[0],l=r[1],o=Object(X.useRecoilValue)(Ka),s=Object(V.useState)(""),c=Object(Te.a)(s,2),u=c[0],d=(c[1],ie.useSubscription(Va,n)),m=d.data,p=d.loading,g=d.error;(function(e){return ie.useSubscription(Ha,e)})({variables:{}}).data;console.log("GETPOLLQUESTIONID",o,a);var h=function(e){return ie.useMutation(pa,e)}(),f=Object(Te.a)(h,1)[0],b=function(e){return ie.useMutation(ba,e)}({variables:{pollQuestionId:o,channelId:parseInt(u)}}),v=Object(Te.a)(b,2),_=v[0],E=v[1].error;if(Object(V.useEffect)((function(){l(a)}),[a,i]),p)return G.a.createElement(ge.a,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},G.a.createElement(Se,null));if(g)return G.a.createElement("p",null,"Error loading.");var y=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({variables:{channelID:n,pollQuestionID:o}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_({variables:{pollQuestionId:o,channelId:n}});case 4:E&&console.log("error on delete question from channel");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column",pb:1},G.a.createElement(be.a,{variant:"h3"},"Channels with active polls:"),G.a.createElement(be.a,{variant:"caption"},"Click on chip to set actual question to channel:"),null===m||void 0===m?void 0:m.channel.sort((function(e,n){return e.id-n.id})).map((function(e,n){var a,t,r,l,o,s,c,u,d,m,p,g,h;return G.a.createElement(ge.a,{key:n,display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},G.a.createElement(vt.a,{disabled:(null===(a=e.channel_polls[0])||void 0===a||null===(t=a.poll_question)||void 0===t?void 0:t.id)!==i&&void 0!==(null===(r=e.channel_polls[0])||void 0===r||null===(l=r.poll_question)||void 0===l?void 0:l.id),onClick:function(){return y(e.id)},onDelete:function(){return j(e.id)},style:{marginTop:8,marginRight:8},variant:"outlined",size:"small",color:(null===(o=e.channel_polls[0])||void 0===o?void 0:o.channel_id)===e.id?"secondary":"primary",label:e.name}),G.a.createElement(vt.a,{variant:(null===(s=e.channel_polls[0])||void 0===s||null===(c=s.poll_question)||void 0===c?void 0:c.text)?"default":"outlined",color:(null===(u=e.channel_polls[0])||void 0===u||null===(d=u.poll_question)||void 0===d?void 0:d.text)?"secondary":"primary",label:(null===(m=e.channel_polls[0])||void 0===m||null===(p=m.poll_question)||void 0===p?void 0:p.text)?null===(g=e.channel_polls[0])||void 0===g||null===(h=g.poll_question)||void 0===h?void 0:h.text:"No poll set.",style:{marginTop:8,marginRight:8},size:"small"}))}))))},xl=Object(Ee.a)((function(e){return{root:{width:"100%"},play:{color:e.palette.error.main},stop:{color:e.palette.success.main},heading:{fontSize:e.typography.pxToRem(15)},details:{alignItems:"flex-start"},column:{flexBasis:"100%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)}}})),Il=function(){var e,n=xl(),a=(e={variables:{}},ie.useSubscription(za,e)),t=a.data,r=a.loading,i=a.error,l=Object(X.useRecoilState)(Ka),o=Object(Te.a)(l,2),s=(o[0],o[1]),c=function(e){s(e)};return r?G.a.createElement(Se,null):i?G.a.createElement(xe,null):G.a.createElement(G.a.Fragment,null,G.a.createElement("div",{className:n.root},G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"center"},G.a.createElement(be.a,{variant:"h3"},"Poll list overview:"),G.a.createElement(vt.a,{variant:"outlined",size:"small",color:"primary",label:"Total polls: "+(null===t||void 0===t?void 0:t.questions.length)})),0===(null===t||void 0===t?void 0:t.questions.length)?G.a.createElement($e.a,{severity:"info"},"Please add a new question."):null===t||void 0===t?void 0:t.questions.sort((function(e,n){return e.id+n.id})).map((function(e){return G.a.createElement(pl.a,{key:e.id,defaultExpanded:!1},G.a.createElement(gl.a,{expandIcon:G.a.createElement(Tt.a,null),"aria-controls":e.text,id:e.text},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",className:n.column},G.a.createElement(vt.a,{variant:"outlined",size:"small",color:"primary",label:e.id}),(null===e||void 0===e?void 0:e.channel_polls.length)>0?G.a.createElement(Gr.a,{color:"secondary"}):G.a.createElement(Gr.a,null),G.a.createElement(K.b,{onClick:function(){c(e.id)},to:{pathname:"/dashboard/pollings/edit/question/"+e.id,state:{fromDashboard:!0}}},G.a.createElement(be.a,{style:{marginLeft:16},className:n.heading},e.text))),G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",className:n.column},G.a.createElement(Ol,{setActiveState:e.is_active}),G.a.createElement(vt.a,{variant:"outlined",color:"primary",size:"small",label:"Created at | ".concat(fr()(e.created_at).format("DD-MM-YYYY | hh:mm:ss"))}))),G.a.createElement(hl.a,{className:n.details},G.a.createElement("div",{className:n.column},G.a.createElement(be.a,{variant:"caption",style:{display:"flex",width:"100%"}},"This poll is published on:"),null===e||void 0===e?void 0:e.channel_polls.map((function(e,n){return G.a.createElement(vt.a,{key:e.channel.name+n,style:{marginTop:8,marginRight:8},variant:"outlined",size:"small",color:"secondary",label:e.channel.name})}))),G.a.createElement("div",{className:Object(gt.a)(n.column,n.helper),onMouseEnter:function(){c(e.id)}},G.a.createElement(be.a,{variant:"caption"},"Where you want to publish this poll? Orange colored channels has an active poll."),G.a.createElement(wl,{questionId:e.id}))),G.a.createElement(Ne.a,null),G.a.createElement(fl.a,null,G.a.createElement(ve.a,{variant:"contained",color:"secondary",href:"/dashboard/pollings/edit/question/".concat(e.id)},"Edit"),G.a.createElement(bl,{questionId:e.id,setActiveState:e.is_active})))}))))},kl=a(369),Cl=Object(Ee.a)((function(e){var n;return{root:{},form:{},messageInput:{floatingLabelFocusStyle:{color:e.palette.secondary.dark}},messageButton:(n={},Object(pt.a)(n,e.breakpoints.down("md"),{width:"100%",size:"small"}),Object(pt.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(n,"marginTop",e.spacing(2)),Object(pt.a)(n,"marginLeft",e.spacing(0)),Object(pt.a)(n,"backgroundColor",e.palette.primary.dark),n)}})),Sl=function(){var e,n=Cl(),a=Object(J.b)().user,t=ie.useMutation(da,e),r=Object(Te.a)(t,1)[0],i=G.a.useState({title:""}),l=Object(Te.a)(i,2),o=l[0],s=l[1],c=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==o.title){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r({variables:{text:o.title,owner_id:a.sub}});case 5:s({title:""});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(V.useEffect)((function(){}),[o]),G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{className:n.root,mt:5,mb:3},G.a.createElement(be.a,{variant:"h2"},"Add a new poll")),G.a.createElement("form",{className:n.form,noValidate:!0,autoComplete:"off",onSubmit:c},G.a.createElement(kl.a,null,G.a.createElement(Zt.a,{id:"title",required:!0,value:o.title,onChange:function(e){s(Object(Z.a)({},o,Object(pt.a)({},e.target.id,e.target.value)))},size:"medium",variant:"outlined",color:"secondary",autoComplete:"off",placeholder:"Type your question here ...",label:"Add a meaningful question",fullWidth:!0,"data-testid":"pollquestion_title",InputProps:{classes:{input:n.messageInput}},InputLabelProps:{className:n.messageInput}}),G.a.createElement(ve.a,{type:"submit",value:"Add poll title",size:"medium",variant:"contained",endIcon:G.a.createElement(Gr.a,null),className:n.messageButton},"Add poll"))))},ql=Object(Ee.a)((function(e){return{divider:{marginTop:e.spacing(5),marginBottom:e.spacing(5)}}})),Tl=function(){var e=ql();return G.a.createElement(G.a.Fragment,null,G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(Sl,null),G.a.createElement(Ne.a,{className:e.divider})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(Il,null)))},$l=function(e){var n=e.pollQuestionId;return Object(V.useEffect)((function(){}),[n]),G.a.createElement(G.a.Fragment,null,G.a.createElement(vt.a,{color:"secondary",size:"small",variant:"outlined",label:"Poll question id: "+n}))},Nl=function(e){var n,a=e.answerId,t=e.setActiveState,r=(n={variables:{pollAnswerId:a}},ie.useMutation(_a,n)),i=Object(Te.a)(r,1)[0];Object(V.useEffect)((function(){}),[a,t]);var l=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{pollAnswerId:n}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{style:{marginTop:"8px",marginLeft:"8px",maxWidth:"100px"},variant:"outlined",size:"large",color:"secondary",disabled:t,onClick:function(){l(a)}},"Delete"))},Ml=Object(Ee.a)((function(e){return{messageInput:{floatingLabelFocusStyle:{color:e.palette.secondary.dark}}}})),Al=function(e){var n,a=e.pollQuestionId,t=Ml(),r=G.a.useState(!0),i=Object(Te.a)(r,2),l=i[0],o=i[1],s=G.a.useState(0),c=Object(Te.a)(s,2),u=c[0],d=c[1],m=G.a.useState({text:""}),p=Object(Te.a)(m,2),g=p[0],h=p[1],f=Fa({variables:{pollQuestionId:a}}),b=Qa({variables:{pollQuestionId:a}}),v=b.data,_=b.loading,E=(n={variables:{text:g.text,pollAnswerId:u}},ie.useMutation(va,n)),y=Object(Te.a)(E,1)[0],j=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(n),void 0!==n&&""!==g.text){e.next=4;break}return o(!0),e.abrupt("return");case 4:return e.next=6,y({variables:{text:Object.values(g)[0],pollAnswerId:n}});case 6:g.text="",o(!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return f.loading||_?G.a.createElement(Se,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-start",alignItems:"center"},G.a.createElement(be.a,{variant:"h3"},"Answers to these question"),G.a.createElement(vt.a,{variant:"outlined",size:"small",color:"primary",label:"Total answers: "+(null===v||void 0===v?void 0:v.poll_answers.length),style:{marginLeft:"16px"}})),0===(null===v||void 0===v?void 0:v.poll_answers.length)?G.a.createElement($e.a,{severity:"info"},"Please add an answer to the poll."):null===v||void 0===v?void 0:v.poll_answers.sort((function(e,n){return e.id-n.id})).map((function(e){var n,a,r;return G.a.createElement(kl.a,{row:!0,key:e.id},G.a.createElement(fe.a,{item:!0,xs:8},G.a.createElement(Zt.a,{key:e.id,name:e.text+e.id,required:!0,disabled:null===f||void 0===f||null===(n=f.data)||void 0===n?void 0:n.poll_question[0].is_active,onChange:function(n){!function(e,n){h({text:n.target.value}),o(!1)}(null===e||void 0===e||e.id,n),d(e.id)},multiline:!0,rows:4,size:"medium",variant:"outlined",color:"secondary",autoComplete:"off",placeholder:"Type your answers here ...",label:e.text,fullWidth:!0,margin:"dense",InputProps:{classes:{input:t.messageInput}},inputProps:{maxLength:250},InputLabelProps:{className:t.messageInput}})),G.a.createElement(fe.a,{item:!0,xs:4},G.a.createElement(ge.a,{display:"flex",justifyContent:"flex-end",alignItems:"center"},G.a.createElement(ve.a,{style:{marginTop:"8px",marginLeft:"8px",maxWidth:"100px"},key:e.id,variant:"contained",size:"large",color:"secondary",disabled:e.id!==u||!0===l,onClick:function(){j(e.id)}},"Update"),G.a.createElement(Nl,{answerId:e.id,setActiveState:!!(null===f||void 0===f||null===(a=f.data)||void 0===a||null===(r=a.poll_question[0])||void 0===r?void 0:r.is_active)}),G.a.createElement(ve.a,{style:{marginTop:"8px",marginLeft:"8px",whiteSpace:"nowrap",maxWidth:"100px",minWidth:"100px"},variant:"outlined",size:"large",color:"secondary",disabled:void 0!==e.votes},e.votes?e.votes:"no votes"))))})))},Bl=Object(Ee.a)((function(e){return{lock:{color:e.palette.error.main},unlock:{color:e.palette.success.main}}})),Pl=function(e){var n,a=e.pollQuestionId,t=e.setActiveState,r=Bl(),i=G.a.useState(t),l=Object(Te.a)(i,2),o=l[0],s=l[1],c=(n={variables:{pollQuestionId:a,is_active:t}},ie.useMutation(ha,n)),u=Object(Te.a)(c,1)[0],d=Qa({variables:{pollQuestionId:a}}),m=d.data,p=d.loading;Object(V.useEffect)((function(){var e,n=null===m||void 0===m||null===(e=m.poll_answers)||void 0===e?void 0:e.length;s(!(n&&n>1))}),[o,m]);var g=function(){var e=Object(ae.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{pollQuestionId:a,is_active:!t}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?G.a.createElement(Se,null):G.a.createElement(G.a.Fragment,null,G.a.createElement(ve.a,{variant:o?"outlined":"contained",color:"secondary",disabled:o,endIcon:t?G.a.createElement(_l.a,{className:r.lock}):G.a.createElement(yl.a,{className:r.unlock}),onClick:g},t?"locked":"unlocked"))},Dl=Object(Ee.a)((function(e){var n;return{divider:{marginTop:e.spacing(5),marginBottom:e.spacing(5)},form:{},messageInput:{floatingLabelFocusStyle:{color:e.palette.secondary.dark}},messageButton:(n={},Object(pt.a)(n,e.breakpoints.down("md"),{width:"100%",size:"small"}),Object(pt.a)(n,e.breakpoints.up("md"),{size:"large",width:"25%"}),Object(pt.a)(n,"marginTop",e.spacing(2)),Object(pt.a)(n,"marginLeft",e.spacing(0)),Object(pt.a)(n,"backgroundColor",e.palette.primary.dark),n)}})),zl=function(){var e,n,a,t,r,i,l,o,s,c,u,d=Dl(),m=G.a.useState({text:""}),p=Object(Te.a)(m,2),g=p[0],h=p[1],f=G.a.useState({text:""}),b=Object(Te.a)(f,2),v=(b[0],b[1],G.a.useState(0)),_=Object(Te.a)(v,2),E=(_[0],_[1],G.a.useState(0)),y=Object(Te.a)(E,2),j=y[0],O=y[1],w=Object(ce.h)().question,x=G.a.useState(),I=(Object(Te.a)(x,1)[0],Fa({variables:{pollQuestionId:parseInt(w)}})),k=ie.useMutation(ma,u),C=Object(Te.a)(k,1)[0],S=function(){var e=Object(ae.a)(ne.a.mark((function e(n){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==g.text){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,C({variables:{text:g.text,pollQuestionId:parseInt(w)}});case 5:h({text:""});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return G.a.createElement(G.a.Fragment,null,G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(ge.a,{mt:3,p:0},G.a.createElement($l,{pollQuestionId:parseInt(w)})),G.a.createElement(ge.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",mb:3,mt:0},G.a.createElement(be.a,{variant:"h2"},(null===I||void 0===I||null===(e=I.data)||void 0===e||null===(n=e.poll_question[0])||void 0===n?void 0:n.text)?null===I||void 0===I||null===(a=I.data)||void 0===a||null===(t=a.poll_question[0])||void 0===t?void 0:t.text:"no value"),G.a.createElement(Pl,{pollQuestionId:parseInt(w),setActiveState:!!(null===I||void 0===I||null===(r=I.data)||void 0===r||null===(i=r.poll_question[0])||void 0===i?void 0:i.is_active)})),G.a.createElement("form",{className:d.form,noValidate:!0,autoComplete:"off",onSubmit:S},G.a.createElement(kl.a,{row:!0},G.a.createElement(Zt.a,{key:null===I||void 0===I||null===(l=I.data)||void 0===l||null===(o=l.poll_question[0])||void 0===o?void 0:o.id,name:"poll_answer",value:g.text,required:!0,multiline:!0,rowsMax:4,disabled:null===I||void 0===I||null===(s=I.data)||void 0===s||null===(c=s.poll_question[0])||void 0===c?void 0:c.is_active,onChange:function(e){var n,a;return function(e,n){h({text:n.target.value}),O(n.target.id)}(null===I||void 0===I||null===(n=I.data)||void 0===n||null===(a=n.poll_question[0])||void 0===a||a.id,e)},size:"medium",variant:"outlined",color:"secondary",autoComplete:"off",placeholder:"Type your answers here ...",label:"Add an answer to these question",fullWidth:!0,InputProps:{classes:{input:d.messageInput}},inputProps:{maxLength:250},InputLabelProps:{className:d.messageInput}}),G.a.createElement(ve.a,{type:"submit",value:"Add poll title",size:"medium",variant:"contained",endIcon:G.a.createElement(Gr.a,null),className:d.messageButton},"Add answer"))),G.a.createElement(Ne.a,{className:d.divider})),G.a.createElement(fe.a,{item:!0,xs:12},G.a.createElement(Al,{pollQuestionId:parseInt(w)}),G.a.createElement(Ne.a,{className:d.divider}),G.a.createElement(wl,{questionId:j})))},Ll=Object(Ee.a)((function(e){return{root:{display:"flex",alignItems:"flex-start",flexGrow:1,height:"100vh",marginTop:e.spacing(0),paddingBottom:e.spacing(0)},container:{margin:e.spacing(5),marginTop:e.spacing(5)},sidebar:{height:"100vh",maxHeight:"100vh",display:"flex",alignItems:"flex-start",marginTop:e.spacing(0),paddingTop:e.spacing(5),borderRightWidth:1,borderRightStyle:"solid",borderRightColor:e.palette.primary.dark}}})),Fl=function(){var e=Ll(),n=Object(mt.a)(pe.breakpoints.up("md"));return G.a.createElement(he.a,{component:"main",maxWidth:"xl",disableGutters:!0,className:e.root},!0===n&&G.a.createElement(fe.a,{item:!0,xs:4,className:e.sidebar},G.a.createElement(rl,null)),G.a.createElement(fe.a,{item:!0,xs:12,md:8,className:e.container},G.a.createElement(be.a,{color:"primary",variant:"h1"},"Admin Dashboard"),G.a.createElement(Ne.a,null),G.a.createElement(ce.d,null,G.a.createElement(ce.b,{exact:!0,path:"/dashboard/users",component:ml}),G.a.createElement(ce.b,{exact:!0,path:"/dashboard",component:Tl}),G.a.createElement(ce.b,{exact:!0,path:"/dashboard/pollings",component:Tl}),G.a.createElement(ce.b,{exact:!0,path:"/dashboard/pollings/edit/question/:question",component:zl}),G.a.createElement(ce.b,{component:xe}))))},Rl=function(){return G.a.createElement(he.a,{maxWidth:"xl"},G.a.createElement(Fl,null))},Ql=function(){var e=Object(J.b)(),n=e.isAuthenticated;return e.isLoading?G.a.createElement(G.a.Fragment,null,G.a.createElement(ge.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",style:{height:"100vh",backgroundColor:pe.palette.error.dark}},G.a.createElement(ge.a,null,G.a.createElement(at,null),G.a.createElement(Oe.a,{color:"primary",style:{marginTop:"16px"}})))):G.a.createElement(ue.a,{theme:pe},G.a.createElement(de.a,null),G.a.createElement("div",{className:"app"},n?G.a.createElement(ce.d,null,G.a.createElement(ce.a,{exact:!0,from:"/",to:"/channel/general"}),G.a.createElement(ce.a,{exact:!0,from:"/channel",to:"/channel/general"}),G.a.createElement(qe,{path:"/channel/:channel/thread/:messageId",component:Si}),G.a.createElement(qe,{path:"/channel/threads",component:Si}),G.a.createElement(qe,{path:"/channel/:channel",component:nl}),G.a.createElement(qe,{path:"/add-user-to-channel",component:nl}),G.a.createElement(qe,{path:"/addChannelMembers",component:st}),G.a.createElement(qe,{path:"/addDirectMessageChannelMembers",component:dt}),G.a.createElement(qe,{path:"/dashboard",component:Rl}),G.a.createElement(ce.b,{exact:!0,path:"/404-not-found",component:xe}),G.a.createElement(ce.a,{to:"/404-not-found"})):G.a.createElement(ce.d,null,G.a.createElement(ce.a,{exact:!0,from:"/",to:"/channel/general"}),G.a.createElement(ce.b,{path:"/home",component:je}),G.a.createElement(qe,{path:"/channel/:channel/thread/:messageId",component:Si}),G.a.createElement(qe,{path:"/channel/threads",component:Si}),G.a.createElement(qe,{path:"/channel/:channel",component:nl}),G.a.createElement(qe,{path:"/dashboard",component:Rl}),G.a.createElement(ce.b,{exact:!0,path:"/404-not-found",component:xe}),G.a.createElement(ce.a,{to:"/404-not-found"}))))};Y.a.render(G.a.createElement(J.a,{domain:"tom-schall.eu.auth0.com",clientId:"5grQYQ4dnRzUJ8wbP0EfBt5WNCIkQr33",redirectUri:"https://chickenfest.ch/channel/general",onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},audience:"hasura"},G.a.createElement(K.a,null,G.a.createElement(X.RecoilRoot,null,G.a.createElement(se,null,G.a.createElement(G.a.Fragment,null,G.a.createElement(Ql,null)))))),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.4d2683d7.chunk.js.map