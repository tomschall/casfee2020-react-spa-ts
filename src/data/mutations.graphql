mutation insertMessage($message: message_insert_input!) {
  insert_message(objects: [$message]) {
    returning {
      id
      timestamp
      text
      user {
        username
      }
      channel {
        name
      }
    }
  }
}

mutation setUserOnline($user_id: String!) {
  update_user(
    _set: { last_seen: "now()" }
    where: { auth0_user_id: { _eq: $user_id } }
  ) {
    affected_rows
  }
}

mutation addChannel(
  $name: String
  $owner_id: String
  $is_private: Boolean
  $channel_type: channel_type_enum
) {
  insert_channel(
    objects: {
      name: $name
      owner_id: $owner_id
      is_private: $is_private
      channel_type: $channel_type
    }
  ) {
    returning {
      id
      name
      owner_id
      is_private
    }
  }
}

mutation addDirectMessageChannel(
  $channel_type: channel_type_enum! = DIRECT_MESSAGE
  $name: String!
  $is_private: Boolean! = true
  $user_id1: String!
  $user_id2: String!
) {
  insert_channel(
    objects: {
      channel_type: $channel_type
      name: $name
      is_private: $is_private
      user_channels: { data: [{ user_id: $user_id1 }, { user_id: $user_id2 }] }
    }
  ) {
    affected_rows
  }
}
