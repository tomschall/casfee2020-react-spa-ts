query getMessages(
  $last_received_id: Int
  $last_received_ts: timestamptz
  $channel: String
) {
  channel(where: { name: { _eq: $channel } }) {
    messages(
      order_by: { timestamp: asc }
      where: {
        _and: {
          id: { _neq: $last_received_id }
          timestamp: { _gte: $last_received_ts }
        }
      }
    ) {
      id
      text
      timestamp
      user {
        username
      }
      channel {
        name
      }
      channel_threads {
        id
      }
    }
  }
}

query getChannels {
  channels: channel {
    name
    id
    is_private
    owner_id
  }
}

query getUserList {
  users: user {
    username
    id
    auth0_user_id
    last_seen
  }
}

query getChannelByName($name: String!) {
  channel(where: { name: { _eq: $name } }) {
    name
    id
    is_private
    owner_id
    channel_type
  }
}

query getAuth0UserById($user_id: String) {
  user(where: { auth0_user_id: { _eq: $user_id } }) {
    id
    username
    auth0_user_id
    user_channels {
      channel {
        name
        id
        is_private
      }
    }
  }
}

query getPollQuestions {
  questions: poll_questions {
    id
    owner_id
    text
  }
}

query getPollQuestionAnswers($pollQuestionId: Int) {
  poll_question: poll_questions(where: { id: { _eq: $pollQuestionId } }) {
    id
    text
  }
  poll_answers: poll_anwers(
    where: { poll_question: { id: { _eq: $pollQuestionId } } }
  ) {
    question_id
    text
    id
    votes
  }
}
